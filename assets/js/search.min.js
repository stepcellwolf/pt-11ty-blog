!function(){"use strict";document.addEventListener("DOMContentLoaded",async function(){const t=document.getElementById("search-input"),e=document.getElementById("search-results"),n=document.getElementById("search-clear"),a=document.getElementById("posts-container"),r=document.querySelectorAll('nav[aria-label="Pagination"]');if(!t||!a)return;let s=[];try{const t=await fetch("/assets/js/search-index.json");s=await t.json()}catch(m){console.error("Failed to load search index:",m),s=Array.from(a.querySelectorAll("article[data-search]")).map(t=>({title:t.getAttribute("data-title")||"",description:t.getAttribute("data-description")||"",tags:t.getAttribute("data-tags")||"",date:t.getAttribute("data-date")||"",url:t.querySelector("a").getAttribute("href"),excerpt:t.getAttribute("data-search")||""}))}const o=a.innerHTML;function i(t){if(!t||t.length<2)return l(),c(),void d();const n=t.toLowerCase().split(" ").filter(t=>t.length>0),o=[];s.forEach(t=>{`${t.title} ${t.description} ${t.tags} ${t.excerpt}`.toLowerCase();let e=0;n.forEach(n=>{t.title.toLowerCase().includes(n)&&(e+=10),t.description.toLowerCase().includes(n)&&(e+=5),t.tags.toLowerCase().includes(n)&&(e+=3),t.excerpt.toLowerCase().includes(n)&&(e+=1)}),e>0&&o.push({post:t,score:e})}),o.sort((t,e)=>e.score-t.score),function(t,n){if(0===t.length)return void function(t){a.innerHTML=`\n                <div class="text-center py-12">\n                    <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />\n                    </svg>\n                    <h3 class="mt-2 text-lg font-semibold text-gray-900 dark:text-gray-100">No posts found</h3>\n                    <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">\n                        No posts match "<strong>${g(t)}</strong>". Try different keywords.\n                    </p>\n                </div>\n            `,e&&(e.innerHTML=`\n                    <div class="mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg">\n                        <p class="text-sm text-gray-700 dark:text-gray-300">\n                            No posts found matching "<strong>${g(t)}</strong>"\n                        </p>\n                        <p class="text-xs text-gray-600 dark:text-gray-400 mt-1">\n                            Try different keywords or clear the search to browse all posts\n                        </p>\n                    </div>\n                `,e.style.display="block")}(n);let r="";t.forEach(({post:t})=>{const e=new Date(t.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),n=t.excerpt.split(/\s+/).length,a=Math.max(1,Math.ceil(n/225)),s=t.tags?t.tags.split(" ").map(t=>t?`<a href="/tags/${t.toLowerCase().replace(/\s+/g,"-")}/" class="inline-flex items-center rounded-full bg-gray-100 dark:bg-gray-800 px-2.5 py-0.5 text-xs font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">${t}</a>`:"").join(" "):"";r+=`\n                    <article class="group relative glass dark:glass-dark rounded-2xl p-8 hover-card search-highlight">\n                        <div class="flex items-center space-x-3 text-sm">\n                            <time datetime="${t.date}" class="font-medium text-primary-600 dark:text-primary-400">\n                                ${e}\n                            </time>\n                            <span class="text-gray-400 dark:text-gray-600">•</span>\n                            <span class="text-gray-600 dark:text-gray-400">\n                                ${a} min read\n                            </span>\n                        </div>\n                        <h2 class="mt-3 text-2xl font-semibold leading-7 text-gray-900 dark:text-gray-100 group-hover:text-primary-600 dark:group-hover:text-primary-400">\n                            <a href="${t.url}">\n                                <span class="absolute inset-0"></span>\n                                ${g(t.title)}\n                            </a>\n                        </h2>\n                        ${t.description?`\n                        <p class="mt-3 text-base leading-7 text-gray-600 dark:text-gray-300">\n                            ${g(t.description)}\n                        </p>\n                        `:""}\n                        ${s?`\n                        <div class="mt-4 flex flex-wrap gap-2">\n                            ${s}\n                        </div>\n                        `:""}\n                        <div class="mt-4">\n                            <span class="text-sm font-semibold text-primary-600 dark:text-primary-400">\n                                Read more <span aria-hidden="true">→</span>\n                            </span>\n                        </div>\n                    </article>\n                `}),a.innerHTML=r,e&&(e.innerHTML=`\n                    <div class="mb-6 p-4 bg-primary-50 dark:bg-primary-900/20 rounded-lg">\n                        <p class="text-sm text-gray-700 dark:text-gray-300">\n                            Found <strong>${t.length}</strong> ${1===t.length?"post":"posts"} matching \n                            "<strong>${g(n)}</strong>"\n                        </p>\n                    </div>\n                `,e.style.display="block")}(o,t),r.forEach(t=>{t.style.display="none"})}function l(){a.innerHTML=o}function c(){e&&(e.style.display="none",e.innerHTML=""),n&&(n.style.display="none")}function d(){r.forEach(t=>{t.style.display=""})}function g(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}const p=function(t){let e;return function(...n){clearTimeout(e),e=setTimeout(()=>{clearTimeout(e),t(...n)},300)}}(i);t.addEventListener("input",function(t){const e=t.target.value.trim();p(e),n&&(n.style.display=e.length>0?"block":"none")}),n&&n.addEventListener("click",function(){t.value="",l(),c(),d(),t.focus()});const u=new URLSearchParams(window.location.search),y=u.get("q")||u.get("search");y&&(t.value=y,i(y))})}();