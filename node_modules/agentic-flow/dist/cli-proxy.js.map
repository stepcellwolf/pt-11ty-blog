{"version":3,"file":"cli-proxy.js","sourceRoot":"","sources":["../src/cli-proxy.ts"],"names":[],"mappings":"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","sourcesContent":["#!/usr/bin/env node\n/**\n * Agentic Flow - Standalone CLI with integrated OpenRouter proxy\n * Usage: npx agentic-flow-proxy --agent coder --task \"Create code\" --openrouter\n */\n\nimport dotenv from \"dotenv\";\nimport { existsSync, readFileSync } from 'fs';\nimport { resolve as pathResolve, dirname } from 'path';\nimport { fileURLToPath } from 'url';\n\n// Load .env from current directory, or search up the directory tree\nfunction loadEnvRecursive(startPath: string = process.cwd()): boolean {\n  let currentPath = startPath;\n  const root = pathResolve('/');\n\n  while (currentPath !== root) {\n    const envPath = pathResolve(currentPath, '.env');\n    if (existsSync(envPath)) {\n      dotenv.config({ path: envPath });\n      return true;\n    }\n    currentPath = pathResolve(currentPath, '..');\n  }\n\n  // Fallback to default behavior\n  dotenv.config();\n  return false;\n}\n\nloadEnvRecursive();\nimport { AnthropicToOpenRouterProxy } from \"./proxy/anthropic-to-openrouter.js\";\nimport { AnthropicToRequestyProxy } from \"./proxy/anthropic-to-requesty.js\";\nimport { logger } from \"./utils/logger.js\";\nimport { parseArgs } from \"./utils/cli.js\";\nimport { getAgent, listAgents } from \"./utils/agentLoader.js\";\nimport { claudeAgent } from \"./agents/claudeAgent.js\";\nimport { claudeAgentDirect } from \"./agents/claudeAgentDirect.js\";\nimport { handleMCPCommand } from \"./utils/mcpCommands.js\";\nimport { handleReasoningBankCommand } from \"./utils/reasoningbankCommands.js\";\nimport { handleConfigCommand } from \"./cli/config-wizard.js\";\nimport { handleAgentCommand } from \"./cli/agent-manager.js\";\nimport { handleFederationCommand } from \"./cli/federation-cli.js\";\nimport { ModelOptimizer } from \"./utils/modelOptimizer.js\";\nimport { detectModelCapabilities } from \"./utils/modelCapabilities.js\";\nimport { AgentBoosterPreprocessor } from \"./utils/agentBoosterPreprocessor.js\";\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = dirname(__filename);\nconst packageJson = JSON.parse(readFileSync(pathResolve(__dirname, '../package.json'), 'utf-8'));\nconst VERSION = packageJson.version;\n\nclass AgenticFlowCLI {\n  private proxyServer: any = null;\n  private proxyPort: number = 3000;\n\n  async start() {\n    const options = parseArgs();\n\n    if (options.version) {\n      console.log(`agentic-flow v${VERSION}`);\n      process.exit(0);\n    }\n\n    if (options.help) {\n      this.printHelp();\n      process.exit(0);\n    }\n\n    // If no mode and no agent specified, show help\n    if (!options.agent && options.mode !== 'list' && !['config', 'agent-manager', 'mcp-manager', 'proxy', 'quic', 'claude-code', 'mcp', 'reasoningbank', 'federation'].includes(options.mode)) {\n      this.printHelp();\n      process.exit(0);\n    }\n\n    if (options.mode === 'list') {\n      this.listAgents();\n      process.exit(0);\n    }\n\n    if (options.mode === 'config') {\n      // Handle config wizard\n      const configArgs = process.argv.slice(3); // Skip 'node', 'cli-proxy.js', 'config'\n      await handleConfigCommand(configArgs);\n      process.exit(0);\n    }\n\n    if (options.mode === 'agent-manager') {\n      // Handle agent management commands\n      const agentArgs = process.argv.slice(3); // Skip 'node', 'cli-proxy.js', 'agent'\n      await handleAgentCommand(agentArgs);\n      process.exit(0);\n    }\n\n    if (options.mode === 'mcp-manager') {\n      // Handle MCP manager commands (add, list, remove, etc.)\n      const { spawn } = await import('child_process');\n      const { resolve, dirname } = await import('path');\n      const { fileURLToPath } = await import('url');\n\n      const __filename = fileURLToPath(import.meta.url);\n      const __dirname = dirname(__filename);\n      const mcpManagerPath = resolve(__dirname, './cli/mcp-manager.js');\n\n      // Pass all args after 'mcp' to mcp-manager\n      const mcpArgs = process.argv.slice(3); // Skip 'node', 'cli-proxy.js', 'mcp'\n\n      const proc = spawn('node', [mcpManagerPath, ...mcpArgs], {\n        stdio: 'inherit'\n      });\n\n      proc.on('exit', (code) => {\n        process.exit(code || 0);\n      });\n\n      process.on('SIGINT', () => proc.kill('SIGINT'));\n      process.on('SIGTERM', () => proc.kill('SIGTERM'));\n      return;\n    }\n\n    if (options.mode === 'proxy') {\n      // Run standalone proxy server for Claude Code/Cursor\n      await this.runStandaloneProxy();\n      return;\n    }\n\n    if (options.mode === 'quic') {\n      // Run QUIC transport proxy server\n      await this.runQuicProxy();\n      return;\n    }\n\n    if (options.mode === 'claude-code') {\n      // Spawn Claude Code with auto-configured proxy\n      const { spawn } = await import('child_process');\n      const claudeCodePath = pathResolve(__dirname, './cli/claude-code-wrapper.js');\n\n      const proc = spawn('node', [claudeCodePath, ...process.argv.slice(3)], {\n        stdio: 'inherit',\n        env: process.env as NodeJS.ProcessEnv\n      });\n\n      proc.on('exit', (code) => {\n        process.exit(code || 0);\n      });\n\n      process.on('SIGINT', () => proc.kill('SIGINT'));\n      process.on('SIGTERM', () => proc.kill('SIGTERM'));\n      return;\n    }\n\n    if (options.mode === 'mcp') {\n      // Run standalone MCP server directly\n      const { spawn } = await import('child_process');\n      const { resolve, dirname } = await import('path');\n      const { fileURLToPath } = await import('url');\n\n      const __filename = fileURLToPath(import.meta.url);\n      const __dirname = dirname(__filename);\n      const serverPath = resolve(__dirname, './mcp/standalone-stdio.js');\n\n      const proc = spawn('node', [serverPath], {\n        stdio: 'inherit'\n      });\n\n      proc.on('exit', (code) => {\n        process.exit(code || 0);\n      });\n\n      // Handle termination signals\n      process.on('SIGINT', () => proc.kill('SIGINT'));\n      process.on('SIGTERM', () => proc.kill('SIGTERM'));\n      return;\n    }\n\n    if (options.mode === 'reasoningbank') {\n      // Handle ReasoningBank commands\n      const subcommand = process.argv[3] || 'help';\n      await handleReasoningBankCommand(subcommand);\n      process.exit(0);\n    }\n\n    if (options.mode === 'federation') {\n      // Handle Federation commands\n      const federationArgs = process.argv.slice(3); // Skip 'node', 'cli-proxy.js', 'federation'\n      await handleFederationCommand(federationArgs);\n      process.exit(0);\n    }\n\n    // Apply model optimization if requested\n    if (options.optimize && options.agent && options.task) {\n      const recommendation = ModelOptimizer.optimize({\n        agent: options.agent,\n        task: options.task,\n        priority: options.optimizePriority || 'balanced',\n        maxCostPerTask: options.maxCost,\n        requiresTools: true // Agents have MCP tools available, so require tool support\n      });\n\n      // Display recommendation\n      ModelOptimizer.displayRecommendation(recommendation);\n\n      // Apply recommendation to options\n      if (!options.provider || options.optimize) {\n        options.provider = recommendation.provider;\n      }\n      if (!options.model || options.optimize) {\n        options.model = recommendation.model;\n      }\n\n      console.log(`‚úÖ Using optimized model: ${recommendation.modelName}\\n`);\n    }\n\n    // Determine which provider to use\n    const useONNX = this.shouldUseONNX(options);\n    const useOpenRouter = this.shouldUseOpenRouter(options);\n    const useGemini = this.shouldUseGemini(options);\n    // Requesty temporarily disabled - keep proxy files for future use\n    const useRequesty = false; // this.shouldUseRequesty(options);\n\n    // Debug output for provider selection\n    if (options.verbose || process.env.VERBOSE === 'true') {\n      console.log('\\nüîç Provider Selection Debug:');\n      console.log(`  Provider flag: ${options.provider || 'not set'}`);\n      console.log(`  Model: ${options.model || 'default'}`);\n      console.log(`  Use ONNX: ${useONNX}`);\n      console.log(`  Use OpenRouter: ${useOpenRouter}`);\n      console.log(`  Use Gemini: ${useGemini}`);\n      console.log(`  Use Requesty: ${useRequesty}`);\n      console.log(`  OPENROUTER_API_KEY: ${process.env.OPENROUTER_API_KEY ? '‚úì set' : '‚úó not set'}`);\n      console.log(`  GOOGLE_GEMINI_API_KEY: ${process.env.GOOGLE_GEMINI_API_KEY ? '‚úì set' : '‚úó not set'}`);\n      console.log(`  REQUESTY_API_KEY: ${process.env.REQUESTY_API_KEY ? '‚úì set' : '‚úó not set'}`);\n      console.log(`  ANTHROPIC_API_KEY: ${process.env.ANTHROPIC_API_KEY ? '‚úì set' : '‚úó not set'}\\n`);\n    }\n\n    try {\n      // Start proxy if needed (ONNX, OpenRouter, Gemini, or Requesty)\n      if (useONNX) {\n        console.log('üöÄ Initializing ONNX local inference proxy...');\n        await this.startONNXProxy(options.model);\n      } else if (useRequesty) {\n        console.log('üöÄ Initializing Requesty proxy...');\n        await this.startRequestyProxy(options.model);\n      } else if (useOpenRouter) {\n        console.log('üöÄ Initializing OpenRouter proxy...');\n        await this.startOpenRouterProxy(options.model);\n      } else if (useGemini) {\n        console.log('üöÄ Initializing Gemini proxy...');\n        // Don't pass Anthropic model names to Gemini proxy\n        const geminiModel = options.model?.startsWith('claude') ? undefined : options.model;\n        console.log(`üîç Model filtering: options.model=${options.model}, geminiModel=${geminiModel}`);\n        await this.startGeminiProxy(geminiModel);\n      } else {\n        console.log('üöÄ Using direct Anthropic API...\\n');\n      }\n\n      // Run agent\n      await this.runAgent(options, useOpenRouter, useGemini, useONNX, useRequesty);\n\n      logger.info('Execution completed successfully');\n      process.exit(0);\n    } catch (err: unknown) {\n      logger.error('Execution failed', { error: err });\n      console.error(err);\n      process.exit(1);\n    }\n  }\n\n  private shouldUseONNX(options: any): boolean {\n    // Use ONNX if:\n    // 1. Provider is explicitly set to onnx\n    // 2. PROVIDER env var is set to onnx\n    // 3. USE_ONNX env var is set\n    if (options.provider === 'onnx' || process.env.PROVIDER === 'onnx') {\n      return true;\n    }\n\n    if (process.env.USE_ONNX === 'true') {\n      return true;\n    }\n\n    return false;\n  }\n\n  private shouldUseGemini(options: any): boolean {\n    // Use Gemini if:\n    // 1. Provider is explicitly set to gemini\n    // 2. PROVIDER env var is set to gemini\n    // 3. USE_GEMINI env var is set\n    // 4. GOOGLE_GEMINI_API_KEY is set and no other provider is specified\n    if (options.provider === 'gemini' || process.env.PROVIDER === 'gemini') {\n      return true;\n    }\n\n    if (process.env.USE_GEMINI === 'true') {\n      return true;\n    }\n\n    // BUG FIX: Don't auto-select Gemini if user explicitly specified a different provider\n    if (options.provider && options.provider !== 'gemini') {\n      return false;\n    }\n\n    if (process.env.GOOGLE_GEMINI_API_KEY &&\n        !process.env.ANTHROPIC_API_KEY &&\n        !process.env.OPENROUTER_API_KEY &&\n        options.provider !== 'onnx') {\n      return true;\n    }\n\n    return false;\n  }\n\n  private shouldUseRequesty(options: any): boolean {\n    // Use Requesty if:\n    // 1. Provider is explicitly set to requesty\n    // 2. PROVIDER env var is set to requesty\n    // 3. USE_REQUESTY env var is set\n    if (options.provider === 'requesty' || process.env.PROVIDER === 'requesty') {\n      return true;\n    }\n\n    if (process.env.USE_REQUESTY === 'true') {\n      return true;\n    }\n\n    return false;\n  }\n\n  private shouldUseOpenRouter(options: any): boolean {\n    // Don't use OpenRouter if ONNX, Gemini, or Requesty is explicitly requested\n    if (options.provider === 'onnx' || process.env.USE_ONNX === 'true' || process.env.PROVIDER === 'onnx') {\n      return false;\n    }\n\n    if (options.provider === 'gemini' || process.env.PROVIDER === 'gemini') {\n      return false;\n    }\n\n    if (options.provider === 'requesty' || process.env.PROVIDER === 'requesty') {\n      return false;\n    }\n\n    // Use OpenRouter if:\n    // 1. Provider is explicitly set to openrouter\n    // 2. Model parameter contains \"/\" (e.g., \"meta-llama/llama-3.1-8b-instruct\")\n    // 3. USE_OPENROUTER env var is set\n    // 4. OPENROUTER_API_KEY is set and ANTHROPIC_API_KEY is not\n    if (options.provider === 'openrouter' || process.env.PROVIDER === 'openrouter') {\n      return true;\n    }\n\n    if (options.model?.includes('/')) {\n      return true;\n    }\n\n    if (process.env.USE_OPENROUTER === 'true') {\n      return true;\n    }\n\n    if (process.env.OPENROUTER_API_KEY && !process.env.ANTHROPIC_API_KEY && !process.env.GOOGLE_GEMINI_API_KEY) {\n      return true;\n    }\n\n    return false;\n  }\n\n  private async startOpenRouterProxy(modelOverride?: string): Promise<void> {\n    const openrouterKey = process.env.OPENROUTER_API_KEY;\n\n    if (!openrouterKey) {\n      console.error('‚ùå Error: OPENROUTER_API_KEY required for OpenRouter models');\n      console.error('Set it in .env or export OPENROUTER_API_KEY=sk-or-v1-xxxxx');\n      process.exit(1);\n    }\n\n    logger.info('Starting integrated OpenRouter proxy');\n\n    const defaultModel = modelOverride ||\n                        process.env.COMPLETION_MODEL ||\n                        process.env.REASONING_MODEL ||\n                        'deepseek/deepseek-chat';\n\n    const capabilities = detectModelCapabilities(defaultModel);\n\n    const proxy = new AnthropicToOpenRouterProxy({\n      openrouterApiKey: openrouterKey,\n      openrouterBaseUrl: process.env.ANTHROPIC_PROXY_BASE_URL,\n      defaultModel,\n      capabilities: capabilities\n    });\n\n    // Start proxy in background\n    proxy.start(this.proxyPort);\n    this.proxyServer = proxy;\n\n    // Set ANTHROPIC_BASE_URL to proxy\n    process.env.ANTHROPIC_BASE_URL = `http://localhost:${this.proxyPort}`;\n\n    // Set dummy ANTHROPIC_API_KEY for proxy (actual auth uses OPENROUTER_API_KEY)\n    if (!process.env.ANTHROPIC_API_KEY) {\n      process.env.ANTHROPIC_API_KEY = 'sk-ant-proxy-dummy-key';\n    }\n\n    console.log(`üîó Proxy Mode: OpenRouter`);\n    console.log(`üîß Proxy URL: http://localhost:${this.proxyPort}`);\n    console.log(`ü§ñ Default Model: ${defaultModel}`);\n\n    if (capabilities.requiresEmulation) {\n      console.log(`\\n‚öôÔ∏è  Detected: Model lacks native tool support`);\n      console.log(`üîß Using ${capabilities.emulationStrategy.toUpperCase()} emulation pattern`);\n      console.log(`üìä Expected reliability: ${capabilities.emulationStrategy === 'react' ? '70-85%' : '50-70%'}`);\n    }\n    console.log('');\n\n    // Wait for proxy to be ready\n    await new Promise(resolve => setTimeout(resolve, 1500));\n  }\n\n  private async startGeminiProxy(modelOverride?: string): Promise<void> {\n    const geminiKey = process.env.GOOGLE_GEMINI_API_KEY;\n\n    if (!geminiKey) {\n      console.error('‚ùå Error: GOOGLE_GEMINI_API_KEY required for Gemini models');\n      console.error('Set it in .env or export GOOGLE_GEMINI_API_KEY=xxxxx');\n      process.exit(1);\n    }\n\n    logger.info('Starting integrated Gemini proxy');\n\n    // BUG FIX: Don't use COMPLETION_MODEL for Gemini (it contains Anthropic model names)\n    // Always use modelOverride if provided, otherwise default to gemini-2.0-flash-exp\n    console.log(`üîç Gemini proxy debug: modelOverride=${modelOverride}, COMPLETION_MODEL=${process.env.COMPLETION_MODEL}`);\n    const defaultModel = (modelOverride && !modelOverride.startsWith('claude'))\n                        ? modelOverride\n                        : 'gemini-2.0-flash-exp';\n\n    // Import Gemini proxy\n    const { AnthropicToGeminiProxy } = await import('./proxy/anthropic-to-gemini.js');\n\n    const proxy = new AnthropicToGeminiProxy({\n      geminiApiKey: geminiKey,\n      defaultModel\n    });\n\n    // Start proxy in background\n    proxy.start(this.proxyPort);\n    this.proxyServer = proxy;\n\n    // Set ANTHROPIC_BASE_URL to proxy\n    process.env.ANTHROPIC_BASE_URL = `http://localhost:${this.proxyPort}`;\n\n    // Set dummy ANTHROPIC_API_KEY for proxy (actual auth uses GOOGLE_GEMINI_API_KEY)\n    if (!process.env.ANTHROPIC_API_KEY) {\n      process.env.ANTHROPIC_API_KEY = 'sk-ant-proxy-dummy-key';\n    }\n\n    console.log(`üîó Proxy Mode: Google Gemini`);\n    console.log(`üîß Proxy URL: http://localhost:${this.proxyPort}`);\n    console.log(`ü§ñ Default Model: ${defaultModel}\\n`);\n\n    // Wait for proxy to be ready\n    await new Promise(resolve => setTimeout(resolve, 1500));\n  }\n\n  private async startRequestyProxy(modelOverride?: string): Promise<void> {\n    const requestyKey = process.env.REQUESTY_API_KEY;\n\n    if (!requestyKey) {\n      console.error('‚ùå Error: REQUESTY_API_KEY required for Requesty models');\n      console.error('Set it in .env or export REQUESTY_API_KEY=sk-xxxxx');\n      process.exit(1);\n    }\n\n    logger.info('Starting integrated Requesty proxy');\n\n    const defaultModel = modelOverride ||\n                        process.env.COMPLETION_MODEL ||\n                        process.env.REASONING_MODEL ||\n                        'deepseek/deepseek-chat';\n\n    const capabilities = detectModelCapabilities(defaultModel);\n\n    const proxy = new AnthropicToRequestyProxy({\n      requestyApiKey: requestyKey,\n      requestyBaseUrl: process.env.REQUESTY_BASE_URL,\n      defaultModel,\n      capabilities: capabilities\n    });\n\n    // Start proxy in background\n    proxy.start(this.proxyPort);\n    this.proxyServer = proxy;\n\n    // Set ANTHROPIC_BASE_URL to proxy\n    process.env.ANTHROPIC_BASE_URL = `http://localhost:${this.proxyPort}`;\n\n    // Set dummy ANTHROPIC_API_KEY for proxy (actual auth uses REQUESTY_API_KEY)\n    if (!process.env.ANTHROPIC_API_KEY) {\n      process.env.ANTHROPIC_API_KEY = 'sk-ant-proxy-dummy-key';\n    }\n\n    console.log(`üîó Proxy Mode: Requesty`);\n    console.log(`üîß Proxy URL: http://localhost:${this.proxyPort}`);\n    console.log(`ü§ñ Default Model: ${defaultModel}`);\n\n    if (capabilities.requiresEmulation) {\n      console.log(`\\n‚öôÔ∏è  Detected: Model lacks native tool support`);\n      console.log(`üîß Using ${capabilities.emulationStrategy.toUpperCase()} emulation pattern`);\n      console.log(`üìä Expected reliability: ${capabilities.emulationStrategy === 'react' ? '70-85%' : '50-70%'}`);\n    }\n    console.log('');\n\n    // Wait for proxy to be ready\n    await new Promise(resolve => setTimeout(resolve, 1500));\n  }\n\n  private async startONNXProxy(modelOverride?: string): Promise<void> {\n    logger.info('Starting integrated ONNX local inference proxy');\n\n    console.log('üîß Provider: ONNX Local (Phi-4-mini)');\n    console.log('üíæ Free local inference - no API costs\\n');\n\n    // Import ONNX proxy\n    const { AnthropicToONNXProxy } = await import('./proxy/anthropic-to-onnx.js');\n\n    // Use a different port for ONNX to avoid conflicts\n    const onnxProxyPort = parseInt(process.env.ONNX_PROXY_PORT || '3001');\n\n    const proxy = new AnthropicToONNXProxy({\n      port: onnxProxyPort,\n      modelPath: process.env.ONNX_MODEL_PATH,\n      executionProviders: process.env.ONNX_EXECUTION_PROVIDERS?.split(',') || ['cpu']\n    });\n\n    // Start proxy in background\n    await proxy.start();\n    this.proxyServer = proxy;\n\n    // Set ANTHROPIC_BASE_URL to ONNX proxy\n    process.env.ANTHROPIC_BASE_URL = `http://localhost:${onnxProxyPort}`;\n\n    // Set dummy ANTHROPIC_API_KEY for proxy (local inference doesn't need key)\n    if (!process.env.ANTHROPIC_API_KEY) {\n      process.env.ANTHROPIC_API_KEY = 'sk-ant-onnx-local-key';\n    }\n\n    console.log(`üîó Proxy Mode: ONNX Local Inference`);\n    console.log(`üîß Proxy URL: http://localhost:${onnxProxyPort}`);\n    console.log(`ü§ñ Model: Phi-4-mini-instruct (ONNX)\\n`);\n\n    // Wait for proxy to be ready and model to load\n    console.log('‚è≥ Loading ONNX model... (this may take a moment)\\n');\n    await new Promise(resolve => setTimeout(resolve, 2000));\n  }\n\n  private async runStandaloneProxy(): Promise<void> {\n    const args = process.argv.slice(3); // Skip 'node', 'cli-proxy.js', 'proxy'\n\n    // Parse proxy arguments\n    let provider = 'gemini';\n    let port = 3000;\n    let model: string | undefined;\n\n    for (let i = 0; i < args.length; i++) {\n      if ((args[i] === '--provider' || args[i] === '-p') && args[i + 1]) {\n        provider = args[++i];\n      } else if ((args[i] === '--port' || args[i] === '-P') && args[i + 1]) {\n        port = parseInt(args[++i]);\n      } else if ((args[i] === '--model' || args[i] === '-m') && args[i + 1]) {\n        model = args[++i];\n      } else if (args[i] === '--help' || args[i] === '-h') {\n        this.printProxyHelp();\n        process.exit(0);\n      }\n    }\n\n    console.log(`\n‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n‚ïë   Agentic Flow - Standalone Anthropic Proxy Server    ‚ïë\n‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n`);\n\n    if (provider === 'gemini') {\n      const apiKey = process.env.GOOGLE_GEMINI_API_KEY;\n      if (!apiKey) {\n        console.error(`‚ùå Error: GOOGLE_GEMINI_API_KEY environment variable required\n\nSet it with:\n  export GOOGLE_GEMINI_API_KEY=your-key-here\n`);\n        process.exit(1);\n      }\n\n      const finalModel = model || process.env.COMPLETION_MODEL || 'gemini-2.0-flash-exp';\n\n      console.log(`üöÄ Starting Gemini ‚Üí Anthropic Proxy\nüìç Port: ${port}\nü§ñ Model: ${finalModel}\nüîó Gemini API: https://generativelanguage.googleapis.com\n`);\n\n      const { AnthropicToGeminiProxy } = await import('./proxy/anthropic-to-gemini.js');\n      const proxy = new AnthropicToGeminiProxy({\n        geminiApiKey: apiKey,\n        defaultModel: finalModel\n      });\n\n      proxy.start(port);\n\n      console.log(`‚úÖ Proxy server running!\n\nConfigure Claude Code:\n  export ANTHROPIC_BASE_URL=http://localhost:${port}\n  export ANTHROPIC_API_KEY=sk-ant-proxy-dummy-key\n  claude\n\nCost Savings: ~85% vs direct Anthropic API\n`);\n\n    } else if (provider === 'openrouter') {\n      const apiKey = process.env.OPENROUTER_API_KEY;\n      if (!apiKey) {\n        console.error(`‚ùå Error: OPENROUTER_API_KEY environment variable required\n\nSet it with:\n  export OPENROUTER_API_KEY=sk-or-v1-your-key-here\n\nGet your key at: https://openrouter.ai/keys\n`);\n        process.exit(1);\n      }\n\n      const finalModel = model || process.env.COMPLETION_MODEL || 'deepseek/deepseek-chat';\n\n      console.log(`üöÄ Starting OpenRouter ‚Üí Anthropic Proxy\nüìç Port: ${port}\nü§ñ Model: ${finalModel}\nüîó OpenRouter API: https://openrouter.ai/api/v1\n`);\n\n      const { AnthropicToOpenRouterProxy } = await import('./proxy/anthropic-to-openrouter.js');\n      const proxy = new AnthropicToOpenRouterProxy({\n        openrouterApiKey: apiKey,\n        defaultModel: finalModel\n      });\n\n      proxy.start(port);\n\n      console.log(`‚úÖ Proxy server running!\n\nConfigure Claude Code:\n  export ANTHROPIC_BASE_URL=http://localhost:${port}\n  export ANTHROPIC_API_KEY=sk-ant-proxy-dummy-key\n  claude\n\nCost Savings: ~90% vs direct Anthropic API\nPopular Models:\n  - openai/gpt-4o-mini (fast, cheap)\n  - anthropic/claude-3.5-sonnet (via OpenRouter)\n  - meta-llama/llama-3.1-405b-instruct (OSS)\n`);\n    } else {\n      console.error(`‚ùå Error: Invalid provider \"${provider}\". Must be \"gemini\" or \"openrouter\"`);\n      process.exit(1);\n    }\n\n    // Keep process running\n    process.on('SIGINT', () => {\n      console.log('\\n\\nüëã Shutting down proxy server...');\n      process.exit(0);\n    });\n\n    // Keep alive\n    await new Promise(() => {});\n  }\n\n  private printProxyHelp(): void {\n    console.log(`\nAgentic Flow - Standalone Anthropic Proxy Server\n\nUSAGE:\n  npx agentic-flow proxy [OPTIONS]\n\nOPTIONS:\n  --provider, -p <provider>   Provider (gemini, openrouter) [default: gemini]\n  --port, -P <port>           Port number [default: 3000]\n  --model, -m <model>         Model to use (provider-specific)\n  --help, -h                  Show this help\n\nENVIRONMENT VARIABLES:\n  GOOGLE_GEMINI_API_KEY       Required for Gemini\n  OPENROUTER_API_KEY          Required for OpenRouter\n  COMPLETION_MODEL            Default model (optional)\n\nEXAMPLES:\n  # Start Gemini proxy\n  npx agentic-flow proxy --provider gemini --port 3000\n\n  # Start OpenRouter proxy with GPT-4o-mini\n  npx agentic-flow proxy --provider openrouter --model \"openai/gpt-4o-mini\"\n\n  # Use with Claude Code\n  export ANTHROPIC_BASE_URL=http://localhost:3000\n  export ANTHROPIC_API_KEY=sk-ant-proxy-dummy-key\n  claude\n`);\n  }\n\n  private async runQuicProxy(): Promise<void> {\n    const args = process.argv.slice(3); // Skip 'node', 'cli-proxy.js', 'quic'\n\n    // Parse QUIC arguments\n    let port = parseInt(process.env.QUIC_PORT || '4433');\n    let certPath = process.env.QUIC_CERT_PATH;\n    let keyPath = process.env.QUIC_KEY_PATH;\n\n    for (let i = 0; i < args.length; i++) {\n      if ((args[i] === '--port' || args[i] === '-P') && args[i + 1]) {\n        port = parseInt(args[++i]);\n      } else if ((args[i] === '--cert' || args[i] === '-c') && args[i + 1]) {\n        certPath = args[++i];\n      } else if ((args[i] === '--key' || args[i] === '-k') && args[i + 1]) {\n        keyPath = args[++i];\n      } else if (args[i] === '--help' || args[i] === '-h') {\n        this.printQuicHelp();\n        process.exit(0);\n      }\n    }\n\n    console.log(`\n‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n‚ïë      Agentic Flow - QUIC Transport Proxy Server       ‚ïë\n‚ïë           Ultra-Low Latency Agent Communication       ‚ïë\n‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n`);\n\n    console.log(`üöÄ Starting QUIC Transport Server\nüìç Port: ${port}\nüîê Protocol: QUIC (UDP-based, TLS 1.3 encrypted)\n‚ö° Performance: 50-70% faster than TCP\n`);\n\n    if (certPath && keyPath) {\n      console.log(`üîí TLS Certificates:\n   Cert: ${certPath}\n   Key:  ${keyPath}\n`);\n    } else {\n      console.log(`‚ö†Ô∏è  Warning: No TLS certificates specified, using development certificates\n   Set QUIC_CERT_PATH and QUIC_KEY_PATH for production use\n`);\n    }\n\n    // Import and start QUIC proxy\n    const { spawn } = await import('child_process');\n    const { resolve } = await import('path');\n    const { fileURLToPath } = await import('url');\n\n    const __filename = fileURLToPath(import.meta.url);\n    const __dirname = dirname(__filename);\n    const quicProxyPath = resolve(__dirname, './proxy/quic-proxy.js');\n\n    const env = { ...process.env };\n    if (certPath) env.QUIC_CERT_PATH = certPath;\n    if (keyPath) env.QUIC_KEY_PATH = keyPath;\n    env.QUIC_PORT = port.toString();\n\n    const proc = spawn('node', [quicProxyPath], {\n      stdio: 'inherit',\n      env: env as NodeJS.ProcessEnv\n    });\n\n    console.log(`‚úÖ QUIC server running on UDP port ${port}!\n\nFeatures:\n  ‚Ä¢ 0-RTT connection establishment\n  ‚Ä¢ 100+ concurrent streams per connection\n  ‚Ä¢ Built-in TLS 1.3 encryption\n  ‚Ä¢ Connection migration support\n  ‚Ä¢ Automatic packet loss recovery\n\nUse with agents:\n  import { QuicTransport } from 'agentic-flow/transport/quic';\n  const transport = new QuicTransport({ port: ${port} });\n  await transport.connect();\n\nPress Ctrl+C to stop...\n`);\n\n    proc.on('exit', (code) => {\n      console.log(`\\nüëã QUIC server stopped (exit code: ${code})`);\n      process.exit(code || 0);\n    });\n\n    process.on('SIGINT', () => {\n      console.log('\\n\\nüëã Shutting down QUIC server...');\n      proc.kill('SIGINT');\n    });\n\n    process.on('SIGTERM', () => proc.kill('SIGTERM'));\n  }\n\n  private printQuicHelp(): void {\n    console.log(`\nAgentic Flow - QUIC Transport Proxy Server\n\nUSAGE:\n  npx agentic-flow quic [OPTIONS]\n\nOPTIONS:\n  --port, -P <port>           Port number [default: 4433]\n  --cert, -c <path>           TLS certificate path\n  --key, -k <path>            TLS private key path\n  --help, -h                  Show this help\n\nENVIRONMENT VARIABLES:\n  QUIC_PORT                   QUIC server port (default: 4433)\n  QUIC_CERT_PATH              Path to TLS certificate\n  QUIC_KEY_PATH               Path to TLS private key\n\nEXAMPLES:\n  # Start QUIC server (development mode)\n  npx agentic-flow quic\n\n  # Start with custom port\n  npx agentic-flow quic --port 5443\n\n  # Start with production certificates\n  npx agentic-flow quic --cert ./certs/cert.pem --key ./certs/key.pem\n\n  # Use via npm scripts\n  npm run proxy:quic         # Start QUIC proxy\n  npm run test:quic:wasm     # Test WASM bindings\n\nPROGRAMMATIC USAGE:\n  import { QuicTransport } from 'agentic-flow/transport/quic';\n\n  const transport = new QuicTransport({\n    host: 'localhost',\n    port: 4433,\n    maxConcurrentStreams: 100\n  });\n\n  await transport.connect();\n  await transport.send({ type: 'task', data: { ... } });\n\nPERFORMANCE:\n  ‚Ä¢ 50-70% faster than TCP-based protocols\n  ‚Ä¢ 0-RTT reconnection (instant resume)\n  ‚Ä¢ 100+ concurrent streams per connection\n  ‚Ä¢ Built-in TLS 1.3 encryption\n  ‚Ä¢ Survives network changes (WiFi ‚Üî cellular)\n`);\n  }\n\n  private async runAgent(options: any, useOpenRouter: boolean, useGemini: boolean, useONNX: boolean = false, useRequesty: boolean = false): Promise<void> {\n    const agentName = options.agent || process.env.AGENT || '';\n    const task = options.task || process.env.TASK || '';\n\n    if (!agentName) {\n      console.error('‚ùå Error: --agent required');\n      this.printHelp();\n      process.exit(1);\n    }\n\n    if (!task) {\n      console.error('‚ùå Error: --task required');\n      this.printHelp();\n      process.exit(1);\n    }\n\n    // Set PROVIDER environment variable if --provider flag is used\n    if (options.provider) {\n      process.env.PROVIDER = options.provider;\n    }\n\n    // Check for API key (unless using ONNX)\n    const isOnnx = options.provider === 'onnx' || process.env.USE_ONNX === 'true' || process.env.PROVIDER === 'onnx';\n\n    if (!isOnnx && !useOpenRouter && !useGemini && !useRequesty && !process.env.ANTHROPIC_API_KEY) {\n      console.error('\\n‚ùå Error: ANTHROPIC_API_KEY is required\\n');\n      console.error('Please set your API key:');\n      console.error('  export ANTHROPIC_API_KEY=sk-ant-xxxxx\\n');\n      console.error('Or use alternative providers:');\n      console.error('  --provider openrouter  (requires OPENROUTER_API_KEY)');\n      console.error('  --provider gemini      (requires GOOGLE_GEMINI_API_KEY)');\n      console.error('  --provider onnx        (free local inference)\\n');\n      process.exit(1);\n    }\n\n\n    if (!isOnnx && useOpenRouter && !process.env.OPENROUTER_API_KEY) {\n      console.error('\\n‚ùå Error: OPENROUTER_API_KEY is required for OpenRouter\\n');\n      console.error('Please set your API key:');\n      console.error('  export OPENROUTER_API_KEY=sk-or-v1-xxxxx\\n');\n      console.error('Or use alternative providers:');\n      console.error('  --provider anthropic  (requires ANTHROPIC_API_KEY)');\n      console.error('  --provider gemini     (requires GOOGLE_GEMINI_API_KEY)');\n      console.error('  --provider onnx       (free local inference)\\n');\n      process.exit(1);\n    }\n\n    if (!isOnnx && useGemini && !process.env.GOOGLE_GEMINI_API_KEY) {\n      console.error('\\n‚ùå Error: GOOGLE_GEMINI_API_KEY is required for Gemini\\n');\n      console.error('Please set your API key:');\n      console.error('  export GOOGLE_GEMINI_API_KEY=xxxxx\\n');\n      console.error('Or use alternative providers:');\n      console.error('  --provider anthropic   (requires ANTHROPIC_API_KEY)');\n      console.error('  --provider openrouter  (requires OPENROUTER_API_KEY)');\n      console.error('  --provider onnx        (free local inference)\\n');\n      process.exit(1);\n    }\n\n    const agent = getAgent(agentName);\n    if (!agent) {\n      const available = listAgents();\n      console.error(`\\n‚ùå Agent '${agentName}' not found.\\n`);\n      console.error('Available agents:');\n      available.slice(0, 20).forEach(a => {\n        console.error(`  ‚Ä¢ ${a.name}: ${a.description.substring(0, 80)}...`);\n      });\n      if (available.length > 20) {\n        console.error(`  ... and ${available.length - 20} more (use --list to see all)`);\n      }\n      process.exit(1);\n    }\n\n    console.log(`\\nü§ñ Agent: ${agent.name}`);\n    console.log(`üìù Description: ${agent.description}\\n`);\n    console.log(`üéØ Task: ${task}\\n`);\n\n    if (useOpenRouter) {\n      const model = options.model || process.env.COMPLETION_MODEL || 'deepseek/deepseek-chat';\n      console.log(`üîß Provider: OpenRouter (via proxy)`);\n      console.log(`üîß Model: ${model}`);\n\n      // Show tool capability information\n      const capabilities = detectModelCapabilities(model);\n      if (capabilities.requiresEmulation) {\n        console.log(`‚öôÔ∏è  Tool Emulation: ${capabilities.emulationStrategy.toUpperCase()} pattern`);\n        console.log(`üìä Note: This model uses prompt-based tool emulation`);\n        console.log(`   Tools are handled by Claude Agent SDK (limited to SDK tools)`);\n      }\n      console.log('');\n    } else if (useGemini) {\n      const model = options.model || 'gemini-2.0-flash-exp';\n      console.log(`üîß Provider: Google Gemini`);\n      console.log(`üîß Model: ${model}\\n`);\n    } else if (options.provider === 'onnx' || process.env.USE_ONNX === 'true' || process.env.PROVIDER === 'onnx') {\n      console.log(`üîß Provider: ONNX Local (Phi-4-mini)`);\n      console.log(`üíæ Free local inference - no API costs`);\n      if (process.env.ONNX_OPTIMIZED === 'true') {\n        console.log(`‚ö° Optimizations: Context pruning, prompt optimization`);\n      }\n      console.log('');\n    }\n\n    console.log('‚è≥ Running...\\n');\n\n    // Try Agent Booster pre-processing if enabled\n    if (options.agentBooster || process.env.AGENTIC_FLOW_AGENT_BOOSTER === 'true') {\n      const preprocessor = new AgentBoosterPreprocessor({\n        confidenceThreshold: options.boosterThreshold || parseFloat(process.env.AGENTIC_FLOW_BOOSTER_THRESHOLD || '0.7')\n      });\n\n      console.log('‚ö° Agent Booster: Analyzing task for pattern matching opportunities...\\n');\n\n      const intent = preprocessor.detectIntent(task);\n\n      if (intent) {\n        console.log(`üéØ Detected intent: ${intent.type}`);\n        if (intent.filePath) {\n          console.log(`üìÑ Target file: ${intent.filePath}`);\n        }\n        console.log('üîß Attempting Agent Booster pre-processing...\\n');\n\n        const result = await preprocessor.tryApply(intent);\n\n        if (result.success) {\n          console.log(`‚úÖ Agent Booster Success!\\n`);\n          console.log(`‚ö° Method: ${result.method}`);\n          console.log(`‚è±Ô∏è  Latency: ${result.latency}ms`);\n          console.log(`üéØ Confidence: ${((result.confidence || 0) * 100).toFixed(1)}%`);\n          console.log(`üìä Strategy: ${result.strategy}`);\n          console.log(`\\n‚úÖ File updated successfully!\\n`);\n          console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\\n');\n          console.log(result.output || 'Edit applied');\n          console.log('\\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\\n');\n\n          logger.info('Agent Booster completed', {\n            agent: agentName,\n            latency: result.latency,\n            confidence: result.confidence,\n            strategy: result.strategy\n          });\n\n          return; // Skip LLM execution\n        } else {\n          console.log(`‚ö†Ô∏è  Agent Booster: ${result.reason || 'Low confidence'}`);\n          console.log(`üîÑ Falling back to LLM agent...\\n`);\n        }\n      } else {\n        console.log('‚ÑπÔ∏è  No code editing pattern detected, using LLM agent...\\n');\n      }\n    }\n\n    const streamHandler = options.stream ? (chunk: string) => process.stdout.write(chunk) : undefined;\n\n    // FIXED: Use claudeAgentDirect (no Claude Code dependency) instead of claudeAgent\n    // This allows agentic-flow to work standalone in Docker/CI/CD without Claude Code\n    // BUG FIX: Don't pass Anthropic model names to non-Anthropic providers\n    const modelForAgent = useGemini || useOpenRouter || useONNX || useRequesty\n      ? (options.model?.startsWith('claude') ? undefined : options.model)\n      : options.model;\n\n    const result = await claudeAgentDirect(agent, task, streamHandler, modelForAgent);\n\n    if (!options.stream) {\n      console.log('\\n‚úÖ Completed!\\n');\n      console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\\n');\n      console.log(result.output);\n      console.log('\\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\\n');\n    }\n\n    logger.info('Agent completed', {\n      agent: agentName,\n      outputLength: result.output.length,\n      provider: useOpenRouter ? 'openrouter' : useGemini ? 'gemini' : 'anthropic'\n    });\n  }\n\n  private listAgents(): void {\n    const agents = listAgents();\n    console.log(`\\nüì¶ Available Agents (${agents.length} total)\\n`);\n\n    const grouped = new Map<string, typeof agents>();\n    agents.forEach(agent => {\n      const parts = agent.filePath.split('/');\n      const category = parts[parts.length - 2] || 'other';\n      if (!grouped.has(category)) {\n        grouped.set(category, []);\n      }\n      grouped.get(category)!.push(agent);\n    });\n\n    Array.from(grouped.entries())\n      .sort(([a], [b]) => a.localeCompare(b))\n      .forEach(([category, categoryAgents]) => {\n        console.log(`\\n${category.toUpperCase()}:`);\n        categoryAgents.forEach(agent => {\n          console.log(`  ${agent.name.padEnd(30)} ${agent.description.substring(0, 80)}`);\n        });\n      });\n\n    console.log(`\\nUsage:`);\n    console.log(`  npx agentic-flow --agent <name> --task \"Your task\"\\n`);\n  }\n\n  private printHelp(): void {\n    console.log(`\nü§ñ Agentic Flow v${VERSION} - AI Agent Orchestration with Multi-Provider Support\n\nNEW IN v1.9.4: Enterprise provider fallback & dynamic switching for long-running agents\n‚úÖ Automatic failover  ‚úÖ Circuit breaker  ‚úÖ Cost optimization  ‚úÖ Health monitoring\n\nUSAGE:\n  npx agentic-flow [COMMAND] [OPTIONS]\n\nCOMMANDS:\n  config [subcommand]     Manage environment configuration (interactive wizard)\n  mcp <command> [server]  Manage MCP servers (start, stop, status, list)\n  agent <command>         Agent management (list, create, info, conflicts)\n  federation <command>    Federation hub management (start, spawn, stats, test)\n  proxy [options]         Run standalone proxy server for Claude Code/Cursor\n  quic [options]          Run QUIC transport proxy for ultra-low latency (50-70% faster)\n  claude-code [options]   Spawn Claude Code with auto-configured proxy\n  --list, -l              List all available agents\n  --agent, -a <name>      Run specific agent mode\n\nCONFIG COMMANDS:\n  npx agentic-flow config              # Interactive wizard\n  npx agentic-flow config set KEY VAL  # Set configuration value\n  npx agentic-flow config get KEY      # Get configuration value\n  npx agentic-flow config list         # List all configuration\n  npx agentic-flow config delete KEY   # Delete configuration value\n  npx agentic-flow config reset        # Reset to defaults\n\nMCP COMMANDS:\n  npx agentic-flow mcp start [server]    Start MCP server(s)\n  npx agentic-flow mcp stop [server]     Stop MCP server(s)\n  npx agentic-flow mcp status [server]   Check MCP server status\n  npx agentic-flow mcp list              List all available MCP tools\n\n  Available servers: claude-flow, flow-nexus, agentic-payments, all (default)\n\nAGENT COMMANDS:\n  npx agentic-flow agent list [format]   List all agents (summary/detailed/json)\n  npx agentic-flow agent create          Create new custom agent (interactive)\n  npx agentic-flow agent info <name>     Show detailed agent information\n  npx agentic-flow agent conflicts       Check for package/local conflicts\n\nFEDERATION COMMANDS:\n  npx agentic-flow federation start      Start federation hub server\n  npx agentic-flow federation spawn      Spawn ephemeral agent\n  npx agentic-flow federation stats      Show hub statistics\n  npx agentic-flow federation status     Show federation system status\n  npx agentic-flow federation test       Run multi-agent collaboration test\n  npx agentic-flow federation help       Show federation help\n\n  Federation enables ephemeral agents (5s-15min lifetime) with persistent memory.\n  Hub stores memories permanently; agents access past learnings from dead agents.\n\nOPTIONS:\n  --task, -t <task>           Task description for agent mode\n  --model, -m <model>         Model to use (triggers OpenRouter if contains \"/\")\n  --provider, -p <name>       Provider to use (anthropic, openrouter, gemini, onnx)\n  --stream, -s                Enable real-time streaming output\n  --help, -h                  Show this help message\n\n  API CONFIGURATION:\n  --anthropic-key <key>       Override ANTHROPIC_API_KEY environment variable\n  --openrouter-key <key>      Override OPENROUTER_API_KEY environment variable\n  --gemini-key <key>          Override GOOGLE_GEMINI_API_KEY environment variable\n\n  AGENT BEHAVIOR:\n  --temperature <0.0-1.0>     Sampling temperature (creativity control)\n  --max-tokens <number>       Maximum tokens in response\n\n  DIRECTORY:\n  --agents-dir <path>         Custom agents directory (default: .claude/agents)\n\n  OUTPUT:\n  --output <text|json|md>     Output format (text/json/markdown)\n  --verbose                   Enable verbose logging for debugging\n\n  EXECUTION:\n  --timeout <ms>              Execution timeout in milliseconds\n  --retry                     Auto-retry on transient errors\n\n  MODEL OPTIMIZATION (NEW!):\n  --optimize, -O              Auto-select best model for agent/task based on priorities\n  --priority <type>           Optimization priority:\n                              ‚Ä¢ quality   - Best results (Claude Sonnet 4.5, GPT-4o)\n                              ‚Ä¢ balanced  - Mix quality/cost (DeepSeek R1, Gemini 2.5 Flash) [default]\n                              ‚Ä¢ cost      - Cheapest (DeepSeek Chat V3, Llama 3.1 8B)\n                              ‚Ä¢ speed     - Fastest responses (Gemini 2.5 Flash)\n                              ‚Ä¢ privacy   - Local only (ONNX Phi-4, no cloud)\n  --max-cost <dollars>        Maximum cost per task (e.g., 0.001 = $0.001/task budget cap)\n\n  Optimization analyzes agent type + task complexity to recommend best model.\n  Example savings: DeepSeek R1 costs 85% less than Claude Sonnet 4.5 with similar quality.\n  See docs/agentic-flow/benchmarks/MODEL_CAPABILITIES.md for full comparison.\n\nPROVIDER FALLBACK (NEW v1.9.4):\n  Enterprise-grade provider fallback for long-running agents with automatic failover,\n  circuit breaker, health monitoring, cost tracking, and crash recovery.\n\n  Features:\n  ‚Ä¢ Automatic failover between providers (Gemini ‚Üí Claude ‚Üí ONNX)\n  ‚Ä¢ Circuit breaker prevents cascading failures (auto-recovery after timeout)\n  ‚Ä¢ Real-time health monitoring (success rate, latency, error tracking)\n  ‚Ä¢ Cost optimization (70% savings using Gemini for simple tasks)\n  ‚Ä¢ Checkpointing for crash recovery (save/restore agent state)\n  ‚Ä¢ Budget controls (hard limits on spending and runtime)\n\n  See: docs/PROVIDER-FALLBACK-GUIDE.md for complete documentation\n  Example: src/examples/use-provider-fallback.ts\n\nEXAMPLES:\n  # MCP Server Management\n  npx agentic-flow mcp start              # Start all MCP servers\n  npx agentic-flow mcp start claude-flow  # Start specific server\n  npx agentic-flow mcp list               # List all 203+ MCP tools\n  npx agentic-flow mcp status             # Check server status\n\n  # Federation Hub Management\n  npx agentic-flow federation start       # Start hub server (WebSocket)\n  npx agentic-flow federation start --port 9443 --db-path ./data/hub.db\n  npx agentic-flow federation spawn       # Spawn ephemeral agent\n  npx agentic-flow federation spawn --tenant acme-corp --lifetime 600\n  npx agentic-flow federation stats       # Show hub statistics\n  npx agentic-flow federation test        # Run multi-agent test\n\n  # Proxy Server for Claude Code/Cursor\n  npx agentic-flow proxy --provider openrouter --port 3000\n  npx agentic-flow proxy --provider gemini --port 3001\n\n  # QUIC Transport (Ultra-low latency, 50-70% faster than TCP)\n  npx agentic-flow quic --port 4433                    # Start QUIC server\n  npx agentic-flow quic --cert ./certs/cert.pem --key ./certs/key.pem\n  npm run proxy:quic                                    # Development mode\n  npm run test:quic:wasm                                # Test WASM bindings\n\n  # Claude Code Integration (Auto-start proxy + spawn Claude Code)\n  npx agentic-flow claude-code --provider openrouter \"Write a Python function\"\n  npx agentic-flow claude-code --provider gemini \"Create a REST API\"\n  npx agentic-flow claude-code --provider anthropic \"Help me debug this code\"\n\n  # Agent Execution\n  npx agentic-flow --list                 # List all 150+ agents\n  npx agentic-flow --agent coder --task \"Create Python hello world\"\n  npx agentic-flow --agent coder --task \"Create REST API\" --provider openrouter\n  npx agentic-flow --agent coder --task \"Create REST API\" --model \"meta-llama/llama-3.1-8b-instruct\"\n  npx agentic-flow --agent coder --task \"Create code\" --provider onnx\n\n  # Model Optimization (Auto-select best model)\n  npx agentic-flow --agent coder --task \"Build API\" --optimize\n  npx agentic-flow --agent coder --task \"Build API\" --optimize --priority cost\n  npx agentic-flow --agent reviewer --task \"Security audit\" --optimize --priority quality\n  npx agentic-flow --agent coder --task \"Simple function\" --optimize --max-cost 0.001\n\nENVIRONMENT VARIABLES:\n  ANTHROPIC_API_KEY       Anthropic API key (for Claude models)\n  OPENROUTER_API_KEY      OpenRouter API key (for alternative models)\n  GOOGLE_GEMINI_API_KEY   Google Gemini API key (for Gemini models)\n  USE_OPENROUTER          Set to 'true' to force OpenRouter usage\n  USE_GEMINI              Set to 'true' to force Gemini usage\n  COMPLETION_MODEL        Default model for OpenRouter\n  AGENTS_DIR              Path to agents directory\n  PROXY_PORT              Proxy server port (default: 3000)\n  QUIC_PORT               QUIC transport port (default: 4433)\n  QUIC_CERT_PATH          Path to TLS certificate for QUIC\n  QUIC_KEY_PATH           Path to TLS private key for QUIC\n\nOPENROUTER MODELS (Best Free Tested):\n  ‚úÖ deepseek/deepseek-r1-0528:free           (reasoning, 95s/task, RFC validation)\n  ‚úÖ deepseek/deepseek-chat-v3.1:free         (coding, 21-103s/task, enterprise-grade)\n  ‚úÖ meta-llama/llama-3.3-8b-instruct:free    (versatile, 4.4s/task, fast coding)\n  ‚úÖ openai/gpt-4-turbo                       (premium, 10.7s/task, no :free needed)\n\n  All models above support OpenRouter leaderboard tracking via HTTP-Referer headers.\n  See https://openrouter.ai/models for full model catalog.\n\nMCP TOOLS (213+ available):\n  ‚Ä¢ agentic-flow: 7 tools (agent execution, creation, management, model optimization)\n  ‚Ä¢ claude-flow: 101 tools (neural networks, GitHub, workflows, DAA)\n  ‚Ä¢ flow-nexus: 96 cloud tools (sandboxes, distributed swarms, templates)\n  ‚Ä¢ agentic-payments: 6 tools (payment authorization, multi-agent consensus)\n\nOPTIMIZATION BENEFITS:\n  üí∞ Cost Savings: 85-98% cheaper models for same quality tasks\n  üéØ Smart Selection: Agent-aware (coder needs quality ‚â•85, researcher flexible)\n  üìä 10+ Models: Claude, GPT-4o, Gemini, DeepSeek, Llama, ONNX local\n  ‚ö° Zero Overhead: <5ms decision time, no API calls during optimization\n\nTWO WAYS TO USE AGENTIC-FLOW:\n\n  1Ô∏è‚É£  DIRECT AGENT EXECUTION (agentic-flow agents)\n      Run agents directly in your terminal with full control:\n\n      npx agentic-flow --agent coder --task \"Create Python script\"\n      npx agentic-flow --agent researcher --task \"Research AI trends\"\n\n      This runs agentic-flow's 80+ specialized agents directly.\n\n  2Ô∏è‚É£  CLAUDE CODE INTEGRATION (proxy for Claude Code CLI)\n      Use Claude Code CLI with OpenRouter/Gemini models via proxy:\n\n      # Option A: Auto-spawn Claude Code with proxy (easiest)\n      npx agentic-flow claude-code --provider openrouter \"Build API\"\n\n      # Option B: Manual proxy setup (advanced)\n      Terminal 1 - Start Proxy:\n        npx agentic-flow proxy --provider openrouter\n\n      Terminal 2 - Configure Claude Code:\n        export ANTHROPIC_BASE_URL=\"http://localhost:3000\"\n        export ANTHROPIC_API_KEY=\"sk-ant-proxy-dummy-key\"\n        export OPENROUTER_API_KEY=\"sk-or-v1-xxxxx\"\n        claude  # Now uses OpenRouter via proxy\n\n  Benefits of proxy mode:\n  ‚Ä¢ 85-99% cost savings vs Claude Sonnet 4.5\n  ‚Ä¢ Access to 100+ models (DeepSeek, Llama, Gemini, etc.)\n  ‚Ä¢ Leaderboard tracking on OpenRouter\n  ‚Ä¢ No code changes to Claude Code itself\n\nQUIC TRANSPORT (Ultra-Low Latency Agent Communication):\n  QUIC is a UDP-based protocol offering 50-70% faster connections than TCP.\n\n  Performance Benefits:\n  ‚Ä¢ 0-RTT connection establishment - Instant reconnection without handshake delay\n  ‚Ä¢ Stream multiplexing - Send 100+ concurrent messages without blocking\n  ‚Ä¢ Built-in TLS 1.3 security - Encrypted by default\n  ‚Ä¢ Connection migration - Survives network changes (WiFi ‚Üí cellular)\n  ‚Ä¢ Reduced latency - Perfect for real-time agent coordination\n\n  Programmatic Usage (API):\n    import { QuicTransport } from 'agentic-flow/transport/quic';\n\n    const transport = new QuicTransport({\n      host: 'localhost',\n      port: 4433,\n      maxConcurrentStreams: 100\n    });\n\n    await transport.connect();\n    await transport.send({ type: 'task', data: { ... } });\n\n  CLI Usage:\n    # Start QUIC server\n    npx agentic-flow quic --port 4433\n\n    # With custom certificates\n    npx agentic-flow quic --cert ./certs/cert.pem --key ./certs/key.pem\n\n    # Test WASM bindings\n    npm run test:quic:wasm\n\n    # Development mode\n    npm run proxy:quic:dev\n\n  Use Cases:\n  ‚Ä¢ Multi-agent swarm coordination (mesh/hierarchical topologies)\n  ‚Ä¢ High-frequency task distribution across worker agents\n  ‚Ä¢ Real-time state synchronization between agents\n  ‚Ä¢ Low-latency RPC for distributed agent systems\n\nDOCUMENTATION:\n  https://github.com/ruvnet/agentic-flow\n  https://ruv.io\n    `);\n  }\n}\n\n// Run CLI\nconst cli = new AgenticFlowCLI();\ncli.start();\n"]}