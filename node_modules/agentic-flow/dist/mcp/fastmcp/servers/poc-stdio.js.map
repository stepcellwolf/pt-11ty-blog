{"version":3,"file":"poc-stdio.js","sourceRoot":"","sources":["../../../../src/mcp/fastmcp/servers/poc-stdio.ts"],"names":[],"mappings":"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","sourcesContent":["#!/usr/bin/env node\n// POC: FastMCP server with stdio transport and 2 basic tools\nimport { FastMCP } from 'fastmcp';\nimport { z } from 'zod';\nimport { execSync } from 'child_process';\n\nconsole.error('ğŸš€ Starting FastMCP POC Server (stdio transport)...');\n\n// Create server\nconst server = new FastMCP({\n  name: 'fastmcp-poc',\n  version: '0.1.0'\n});\n\n// Tool 1: Memory Store\nserver.addTool({\n  name: 'memory_store',\n  description: 'Store a value in persistent memory',\n  parameters: z.object({\n    key: z.string().min(1).describe('Memory key'),\n    value: z.string().describe('Value to store'),\n    namespace: z.string().optional().default('default').describe('Memory namespace'),\n    ttl: z.number().positive().optional().describe('Time-to-live in seconds')\n  }),\n  execute: async ({ key, value, namespace, ttl }) => {\n    try {\n      const cmd = [\n        'npx claude-flow@alpha memory store',\n        `\"${key}\"`,\n        `\"${value}\"`,\n        `--namespace \"${namespace}\"`,\n        ttl ? `--ttl ${ttl}` : ''\n      ].filter(Boolean).join(' ');\n\n      const result = execSync(cmd, { encoding: 'utf-8', maxBuffer: 10 * 1024 * 1024 });\n\n      // Return as text content (fastmcp requirement)\n      return JSON.stringify({\n        success: true,\n        key,\n        namespace,\n        size: value.length,\n        ttl,\n        timestamp: new Date().toISOString(),\n        message: 'Memory stored successfully'\n      }, null, 2);\n    } catch (error: any) {\n      throw new Error(`Failed to store memory: ${error.message}`);\n    }\n  }\n});\n\n// Tool 2: Memory Retrieve\nserver.addTool({\n  name: 'memory_retrieve',\n  description: 'Retrieve a value from persistent memory',\n  parameters: z.object({\n    key: z.string().min(1).describe('Memory key'),\n    namespace: z.string().optional().default('default').describe('Memory namespace')\n  }),\n  execute: async ({ key, namespace }) => {\n    try {\n      const cmd = `npx claude-flow@alpha memory retrieve \"${key}\" --namespace \"${namespace}\"`;\n      const result = execSync(cmd, { encoding: 'utf-8', maxBuffer: 10 * 1024 * 1024 });\n\n      // Return as text content (fastmcp requirement)\n      return JSON.stringify({\n        success: true,\n        key,\n        namespace,\n        value: result.trim(),\n        timestamp: new Date().toISOString()\n      }, null, 2);\n    } catch (error: any) {\n      throw new Error(`Failed to retrieve memory: ${error.message}`);\n    }\n  }\n});\n\nconsole.error('ğŸ“¦ Registered 2 tools: memory_store, memory_retrieve');\nconsole.error('ğŸ”Œ Starting stdio transport...');\n\n// Start with stdio transport\nserver.start({ transportType: 'stdio' }).then(() => {\n  console.error('âœ… FastMCP POC server running on stdio');\n}).catch((error) => {\n  console.error('âŒ Failed to start server:', error);\n  process.exit(1);\n});\n"]}