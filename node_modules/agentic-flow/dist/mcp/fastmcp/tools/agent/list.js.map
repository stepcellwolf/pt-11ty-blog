{"version":3,"file":"list.js","sourceRoot":"","sources":["../../../../../src/mcp/fastmcp/tools/agent/list.ts"],"names":[],"mappings":"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","sourcesContent":["import { z } from 'zod';\nimport { ToolDefinition, ToolContext } from '../../types/index.js';\nimport { execSync } from 'child_process';\n\nconst listAgentsSchema = z.object({\n  format: z.enum(['summary', 'detailed', 'json']).optional().default('summary')\n    .describe('Output format for agent list')\n});\n\nexport const listAgentsTool: ToolDefinition = {\n  name: 'agent_list',\n  description: 'List all available agents (equivalent to --list CLI command)',\n  parameters: listAgentsSchema,\n\n  async execute({ format }: z.infer<typeof listAgentsSchema>, { onProgress }: ToolContext) {\n    try {\n      onProgress?.({ progress: 0.3, message: 'Loading available agents...' });\n\n      // Execute list command\n      const result = execSync('npx agentic-flow --list', {\n        encoding: 'utf8',\n        maxBuffer: 5 * 1024 * 1024,\n        timeout: 30000\n      });\n\n      onProgress?.({ progress: 0.8, message: 'Processing agent list...' });\n\n      // Parse the output to extract agent info\n      const agents: any[] = [];\n      const lines = result.split('\\n');\n\n      let currentCategory = '';\n      for (const line of lines) {\n        if (line.includes(':') && line.trim().endsWith(':')) {\n          currentCategory = line.replace(':', '').trim();\n        } else if (line.trim().startsWith('•') || /^\\s{2,}\\w/.test(line)) {\n          const match = line.match(/^\\s*[•\\s]*(\\S+)\\s+(.+)$/);\n          if (match) {\n            agents.push({\n              name: match[1],\n              description: match[2].trim(),\n              category: currentCategory\n            });\n          }\n        }\n      }\n\n      onProgress?.({ progress: 1.0, message: `Found ${agents.length} agents` });\n\n      let output;\n      if (format === 'json') {\n        output = JSON.stringify({ agents, count: agents.length }, null, 2);\n      } else if (format === 'detailed') {\n        output = result;\n      } else {\n        output = JSON.stringify({\n          success: true,\n          count: agents.length,\n          agents: agents.map(a => ({\n            name: a.name,\n            category: a.category,\n            description: a.description.substring(0, 100) + (a.description.length > 100 ? '...' : '')\n          })),\n          timestamp: new Date().toISOString()\n        }, null, 2);\n      }\n\n      return {\n        content: [{\n          type: 'text',\n          text: output\n        }]\n      };\n    } catch (error: any) {\n      return {\n        content: [{\n          type: 'text',\n          text: JSON.stringify({\n            success: false,\n            error: error.message,\n            stderr: error.stderr?.toString(),\n            timestamp: new Date().toISOString()\n          }, null, 2)\n        }],\n        isError: true\n      };\n    }\n  }\n};\n"]}