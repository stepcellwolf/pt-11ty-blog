{"version":3,"file":"mcp-manager.js","sourceRoot":"","sources":["../../src/cli/mcp-manager.ts"],"names":[],"mappings":"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","sourcesContent":["#!/usr/bin/env node\n/**\n * MCP Server Manager - CLI for adding/managing MCP servers\n *\n * Allows end users to add custom MCP servers without editing code:\n * - npx agentic-flow mcp add weather --npm weather-mcp\n * - npx agentic-flow mcp add local --local /path/to/server.js\n * - npx agentic-flow mcp list\n * - npx agentic-flow mcp remove weather\n */\n\nimport fs from 'fs';\nimport path from 'path';\nimport os from 'os';\nimport { execSync } from 'child_process';\nimport { Command } from 'commander';\n\n// Configuration file location\nconst CONFIG_DIR = path.join(os.homedir(), '.agentic-flow');\nconst CONFIG_FILE = path.join(CONFIG_DIR, 'mcp-config.json');\n\ninterface MCPServerConfig {\n  enabled: boolean;\n  type: 'npm' | 'local';\n  package?: string;\n  command: string;\n  args: string[];\n  env: Record<string, string>;\n  description?: string;\n}\n\ninterface MCPConfig {\n  servers: Record<string, MCPServerConfig>;\n}\n\n/**\n * Load MCP configuration\n */\nfunction loadConfig(): MCPConfig {\n  if (!fs.existsSync(CONFIG_FILE)) {\n    return { servers: {} };\n  }\n\n  try {\n    const content = fs.readFileSync(CONFIG_FILE, 'utf-8');\n    return JSON.parse(content);\n  } catch (error) {\n    console.error('‚ùå Error loading MCP config:', error);\n    return { servers: {} };\n  }\n}\n\n/**\n * Save MCP configuration\n */\nfunction saveConfig(config: MCPConfig): void {\n  // Ensure directory exists\n  if (!fs.existsSync(CONFIG_DIR)) {\n    fs.mkdirSync(CONFIG_DIR, { recursive: true });\n  }\n\n  fs.writeFileSync(CONFIG_FILE, JSON.stringify(config, null, 2), 'utf-8');\n}\n\n/**\n * Add MCP server from JSON config (Claude-style)\n */\nfunction addServerFromJson(name: string, configJson: string): void {\n  const config = loadConfig();\n\n  // Check if already exists\n  if (config.servers[name]) {\n    console.error(`‚ùå MCP server '${name}' already exists`);\n    console.log('üí° Use update command or remove first');\n    process.exit(1);\n  }\n\n  try {\n    const serverConfig = JSON.parse(configJson);\n\n    // Validate required fields\n    if (!serverConfig.command) {\n      console.error('‚ùå Config must include \"command\" field');\n      process.exit(1);\n    }\n\n    // Build MCP server config\n    const mcpConfig: MCPServerConfig = {\n      enabled: true,\n      type: serverConfig.npm ? 'npm' : 'local',\n      package: serverConfig.npm,\n      command: serverConfig.command,\n      args: serverConfig.args || [],\n      env: serverConfig.env || {},\n      description: serverConfig.description || `MCP server: ${name}`\n    };\n\n    config.servers[name] = mcpConfig;\n    saveConfig(config);\n\n    console.log(`‚úÖ Added MCP server: ${name}`);\n    console.log(`   Type: ${mcpConfig.type}`);\n    console.log(`   Command: ${mcpConfig.command} ${mcpConfig.args.join(' ')}`);\n    if (Object.keys(mcpConfig.env).length > 0) {\n      console.log(`   Environment: ${Object.keys(mcpConfig.env).length} vars`);\n    }\n    console.log('\\nüí° Use it with: npx agentic-flow --agent coder --task \"your task\"');\n  } catch (error: any) {\n    console.error('‚ùå Invalid JSON config:', error.message);\n    console.log('\\nExpected format:');\n    console.log('  \\'{\"command\":\"npx\",\"args\":[\"-y\",\"weather-mcp\"],\"env\":{\"API_KEY\":\"xxx\"}}\\'');\n    process.exit(1);\n  }\n}\n\n/**\n * Add MCP server (flag-based)\n */\nfunction addServer(options: {\n  name: string;\n  npm?: string;\n  local?: string;\n  command?: string;\n  args?: string;\n  env?: string[];\n  desc?: string;\n}): void {\n  const config = loadConfig();\n\n  // Check if already exists\n  if (config.servers[options.name]) {\n    console.error(`‚ùå MCP server '${options.name}' already exists`);\n    console.log('üí° Use update command or remove first');\n    process.exit(1);\n  }\n\n  let serverConfig: MCPServerConfig;\n\n  if (options.npm) {\n    // NPM package\n    serverConfig = {\n      enabled: true,\n      type: 'npm',\n      package: options.npm,\n      command: 'npx',\n      args: ['-y', options.npm],\n      env: {},\n      description: options.desc || `MCP server from ${options.npm}`\n    };\n  } else if (options.local) {\n    // Local path\n    serverConfig = {\n      enabled: true,\n      type: 'local',\n      command: options.command || 'node',\n      args: [options.local],\n      env: {},\n      description: options.desc || `Local MCP server at ${options.local}`\n    };\n  } else if (options.command) {\n    // Custom command\n    const args = options.args ? options.args.split(' ') : [];\n    serverConfig = {\n      enabled: true,\n      type: 'local',\n      command: options.command,\n      args,\n      env: {},\n      description: options.desc || `Custom MCP server: ${options.command}`\n    };\n  } else {\n    console.error('‚ùå Must specify --npm, --local, or --command');\n    process.exit(1);\n  }\n\n  // Add environment variables\n  if (options.env) {\n    for (const envStr of options.env) {\n      const [key, ...valueParts] = envStr.split('=');\n      const value = valueParts.join('=');\n      serverConfig.env[key] = value;\n    }\n  }\n\n  config.servers[options.name] = serverConfig;\n  saveConfig(config);\n\n  console.log(`‚úÖ Added MCP server: ${options.name}`);\n  console.log(`   Type: ${serverConfig.type}`);\n  if (serverConfig.package) {\n    console.log(`   Package: ${serverConfig.package}`);\n  }\n  console.log(`   Command: ${serverConfig.command} ${serverConfig.args.join(' ')}`);\n  if (Object.keys(serverConfig.env).length > 0) {\n    console.log(`   Environment: ${Object.keys(serverConfig.env).length} vars`);\n  }\n  console.log('\\nüí° Run tests with: npx agentic-flow mcp test ' + options.name);\n}\n\n/**\n * List MCP servers\n */\nfunction listServers(options: { enabled?: boolean; verbose?: boolean }): void {\n  const config = loadConfig();\n  const servers = Object.entries(config.servers);\n\n  if (servers.length === 0) {\n    console.log('No MCP servers configured');\n    console.log('\\nüí° Add a server with: npx agentic-flow mcp add NAME --npm PACKAGE');\n    return;\n  }\n\n  console.log('Configured MCP Servers:\\n');\n\n  for (const [name, server] of servers) {\n    // Filter by enabled status\n    if (options.enabled && !server.enabled) {\n      continue;\n    }\n\n    const status = server.enabled ? '‚úÖ' : '‚ùå';\n    const state = server.enabled ? 'enabled' : 'disabled';\n\n    console.log(`${status} ${name} (${state})`);\n    console.log(`   Type: ${server.type}`);\n\n    if (server.package) {\n      console.log(`   Package: ${server.package}`);\n    } else {\n      console.log(`   Command: ${server.command} ${server.args.join(' ')}`);\n    }\n\n    if (server.description) {\n      console.log(`   Description: ${server.description}`);\n    }\n\n    if (options.verbose) {\n      console.log(`   Environment:`);\n      for (const [key, value] of Object.entries(server.env)) {\n        const masked = value.length > 10 ? `${value.slice(0, 4)}***${value.slice(-4)}` : '***';\n        console.log(`     ${key}: ${masked}`);\n      }\n    }\n\n    console.log('');\n  }\n}\n\n/**\n * Remove MCP server\n */\nfunction removeServer(name: string, options: { confirm?: boolean }): void {\n  const config = loadConfig();\n\n  if (!config.servers[name]) {\n    console.error(`‚ùå MCP server '${name}' not found`);\n    process.exit(1);\n  }\n\n  if (!options.confirm) {\n    console.log(`‚ö†Ô∏è  This will remove MCP server: ${name}`);\n    console.log('   Use --confirm to proceed');\n    process.exit(0);\n  }\n\n  delete config.servers[name];\n  saveConfig(config);\n\n  console.log(`‚úÖ Removed MCP server: ${name}`);\n}\n\n/**\n * Enable/disable MCP server\n */\nfunction toggleServer(name: string, enabled: boolean): void {\n  const config = loadConfig();\n\n  if (!config.servers[name]) {\n    console.error(`‚ùå MCP server '${name}' not found`);\n    process.exit(1);\n  }\n\n  config.servers[name].enabled = enabled;\n  saveConfig(config);\n\n  const action = enabled ? 'Enabled' : 'Disabled';\n  console.log(`‚úÖ ${action} MCP server: ${name}`);\n}\n\n/**\n * Update MCP server\n */\nfunction updateServer(name: string, options: {\n  version?: string;\n  env?: string[];\n  command?: string;\n  args?: string;\n}): void {\n  const config = loadConfig();\n\n  if (!config.servers[name]) {\n    console.error(`‚ùå MCP server '${name}' not found`);\n    process.exit(1);\n  }\n\n  const server = config.servers[name];\n\n  // Update version for NPM packages\n  if (options.version && server.type === 'npm' && server.package) {\n    const packageName = server.package.split('@')[0];\n    server.package = `${packageName}@${options.version}`;\n    server.args = ['-y', server.package];\n  }\n\n  // Update environment variables\n  if (options.env) {\n    for (const envStr of options.env) {\n      const [key, ...valueParts] = envStr.split('=');\n      const value = valueParts.join('=');\n      server.env[key] = value;\n    }\n  }\n\n  // Update command\n  if (options.command) {\n    server.command = options.command;\n  }\n\n  // Update args\n  if (options.args) {\n    server.args = options.args.split(' ');\n  }\n\n  saveConfig(config);\n  console.log(`‚úÖ Updated MCP server: ${name}`);\n}\n\n/**\n * Test MCP server\n */\nfunction testServer(name: string, options: { verbose?: boolean }): void {\n  const config = loadConfig();\n\n  if (!config.servers[name]) {\n    console.error(`‚ùå MCP server '${name}' not found`);\n    process.exit(1);\n  }\n\n  const server = config.servers[name];\n\n  console.log(`Testing MCP server: ${name}`);\n  console.log(`Command: ${server.command} ${server.args.join(' ')}\\n`);\n\n  try {\n    // Build environment\n    const env = { ...process.env, ...server.env };\n\n    // Test if server responds (send tools/list request)\n    const testRequest = JSON.stringify({\n      jsonrpc: '2.0',\n      method: 'tools/list',\n      id: 1\n    });\n\n    const cmd = `echo '${testRequest}' | ${server.command} ${server.args.join(' ')}`;\n\n    const result = execSync(cmd, {\n      encoding: 'utf-8',\n      env,\n      timeout: 5000\n    });\n\n    if (options.verbose) {\n      console.log('Response:', result);\n    }\n\n    // Try to parse response\n    const response = JSON.parse(result.split('\\n')[0]);\n\n    if (response.result?.tools) {\n      console.log(`‚úÖ Server started successfully`);\n      console.log(`‚úÖ Responds to tools/list`);\n      console.log(`‚úÖ Found ${response.result.tools.length} tools:`);\n\n      for (const tool of response.result.tools) {\n        console.log(`   - ${tool.name}: ${tool.description || 'No description'}`);\n      }\n\n      console.log('\\n‚úÖ Server is working correctly');\n    } else {\n      console.log('‚ö†Ô∏è  Server responded but no tools found');\n    }\n  } catch (error: any) {\n    console.error('‚ùå Server test failed:', error.message);\n    process.exit(1);\n  }\n}\n\n/**\n * Show server info\n */\nfunction showInfo(name: string): void {\n  const config = loadConfig();\n\n  if (!config.servers[name]) {\n    console.error(`‚ùå MCP server '${name}' not found`);\n    process.exit(1);\n  }\n\n  const server = config.servers[name];\n\n  console.log(`MCP Server: ${name}`);\n  console.log(`Status: ${server.enabled ? '‚úÖ Enabled' : '‚ùå Disabled'}`);\n  console.log(`Type: ${server.type}`);\n\n  if (server.package) {\n    console.log(`Package: ${server.package}`);\n  }\n\n  console.log(`Command: ${server.command} ${server.args.join(' ')}`);\n\n  if (Object.keys(server.env).length > 0) {\n    console.log(`Environment:`);\n    for (const [key, value] of Object.entries(server.env)) {\n      const masked = value.length > 10 ? `***${key.slice(0, 3)}***` : '***';\n      console.log(`  ${key}: ${masked}`);\n    }\n  }\n\n  if (server.description) {\n    console.log(`Description: ${server.description}`);\n  }\n\n  console.log(`\\nConfig file: ${CONFIG_FILE}`);\n}\n\n/**\n * Export configuration\n */\nfunction exportConfig(): void {\n  const config = loadConfig();\n  console.log(JSON.stringify(config, null, 2));\n}\n\n/**\n * Import configuration\n */\nfunction importConfig(configJson: string): void {\n  try {\n    const importedConfig: MCPConfig = JSON.parse(configJson);\n\n    // Validate structure\n    if (!importedConfig.servers || typeof importedConfig.servers !== 'object') {\n      throw new Error('Invalid config format');\n    }\n\n    const config = loadConfig();\n\n    // Merge configs\n    for (const [name, server] of Object.entries(importedConfig.servers)) {\n      config.servers[name] = server;\n    }\n\n    saveConfig(config);\n\n    const count = Object.keys(importedConfig.servers).length;\n    console.log(`‚úÖ Imported ${count} MCP server(s)`);\n  } catch (error: any) {\n    console.error('‚ùå Import failed:', error.message);\n    process.exit(1);\n  }\n}\n\n// CLI setup\nconst program = new Command();\n\nprogram\n  .name('agentic-flow mcp')\n  .description('Manage MCP servers for agentic-flow')\n  .version('1.0.0')\n  .addHelpText('after', `\nExamples:\n  # Add MCP server (Claude-style JSON config)\n  $ npx agentic-flow mcp add weather '{\"command\":\"npx\",\"args\":[\"-y\",\"weather-mcp\"],\"env\":{\"API_KEY\":\"xxx\"}}'\n\n  # Add MCP server (simple flags)\n  $ npx agentic-flow mcp add weather --npm weather-mcp --env \"API_KEY=xxx\"\n\n  # Add local MCP server\n  $ npx agentic-flow mcp add my-tools --local /path/to/server.js\n\n  # List all configured servers\n  $ npx agentic-flow mcp list\n\n  # Test server\n  $ npx agentic-flow mcp test weather\n\n  # Use in agents (automatic)\n  $ npx agentic-flow --agent researcher --task \"Get weather for Tokyo\"\n\nConfig file: ~/.agentic-flow/mcp-config.json\n`);\n\nprogram\n  .command('add <name> [config]')\n  .description('Add a new MCP server (config as JSON string or options)')\n  .option('--npm <package>', 'NPM package name (e.g., weather-mcp@latest)')\n  .option('--local <path>', 'Local file path (e.g., /path/to/server.js)')\n  .option('--command <cmd>', 'Custom command (e.g., python3)')\n  .option('--args <args>', 'Command arguments')\n  .option('--env <key=value>', 'Environment variable (can use multiple times)')\n  .option('--desc <description>', 'Server description')\n  .action((name, config, options) => {\n    if (config) {\n      // JSON config format (like Claude MCP)\n      addServerFromJson(name, config);\n    } else {\n      // Flag-based format\n      addServer({ name, ...options });\n    }\n  });\n\nprogram\n  .command('list')\n  .description('List configured MCP servers')\n  .option('--enabled', 'Show only enabled servers')\n  .option('--verbose', 'Show detailed information')\n  .action((options) => listServers(options));\n\nprogram\n  .command('remove <name>')\n  .description('Remove an MCP server')\n  .option('--confirm', 'Confirm removal')\n  .action((name, options) => removeServer(name, options));\n\nprogram\n  .command('enable <name>')\n  .description('Enable an MCP server')\n  .action((name) => toggleServer(name, true));\n\nprogram\n  .command('disable <name>')\n  .description('Disable an MCP server')\n  .action((name) => toggleServer(name, false));\n\nprogram\n  .command('update <name>')\n  .description('Update MCP server configuration')\n  .option('--version <version>', 'Update NPM package version')\n  .option('--env <key=value>', 'Update environment variable (can use multiple times)')\n  .option('--command <cmd>', 'Update command')\n  .option('--args <args>', 'Update arguments')\n  .action((name, options) => updateServer(name, options));\n\nprogram\n  .command('test <name>')\n  .description('Test if MCP server works')\n  .option('--verbose', 'Show detailed output')\n  .action((name, options) => testServer(name, options));\n\nprogram\n  .command('info <name>')\n  .description('Show MCP server information')\n  .action((name) => showInfo(name));\n\nprogram\n  .command('export')\n  .description('Export MCP configuration to stdout')\n  .action(() => exportConfig());\n\nprogram\n  .command('import')\n  .description('Import MCP configuration from stdin')\n  .action(() => {\n    let data = '';\n    process.stdin.on('data', (chunk) => (data += chunk));\n    process.stdin.on('end', () => importConfig(data));\n  });\n\nprogram.parse();\n"]}