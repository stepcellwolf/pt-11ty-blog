{"version":3,"file":"mcp.js","sourceRoot":"","sources":["../../src/cli/mcp.ts"],"names":[],"mappings":"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","sourcesContent":["#!/usr/bin/env node\n// MCP CLI commands for agentic-flow\nimport { spawn } from 'child_process';\nimport { resolve, dirname } from 'path';\nimport { fileURLToPath } from 'url';\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = dirname(__filename);\n\nexport interface MCPOptions {\n  port?: string;\n  debug?: boolean;\n}\n\n// Start stdio MCP server (for Claude Desktop)\nexport async function startStdioServer(options: MCPOptions = {}) {\n  console.log('üöÄ Starting FastMCP stdio server...');\n  console.log('üì¶ Tools: memory_store, memory_retrieve, memory_search, swarm_init, agent_spawn, task_orchestrate\\n');\n\n  const serverPath = resolve(__dirname, '../mcp/fastmcp/servers/stdio-full.js');\n\n  const proc = spawn('node', [serverPath], {\n    stdio: 'inherit',\n    env: {\n      ...process.env,\n      DEBUG: options.debug ? 'fastmcp:*' : undefined\n    }\n  });\n\n  proc.on('exit', (code) => {\n    process.exit(code || 0);\n  });\n\n  // Handle termination signals\n  process.on('SIGINT', () => {\n    proc.kill('SIGINT');\n  });\n\n  process.on('SIGTERM', () => {\n    proc.kill('SIGTERM');\n  });\n}\n\n// Start HTTP + SSE server (for web/remote clients)\nexport async function startHttpServer(options: MCPOptions = {}) {\n  const port = options.port || '3000';\n\n  console.log('üöÄ Starting FastMCP HTTP + SSE server...');\n  console.log(`üåê Port: ${port}`);\n  console.log('üì° SSE endpoint: /events');\n  console.log('üîß MCP endpoint: /mcp');\n  console.log('‚ù§Ô∏è  Health check: /health');\n  console.log('üì¶ Tools: 11 (memory √ó 3, swarm √ó 3, agent √ó 5)\\n');\n\n  const serverPath = resolve(__dirname, '../mcp/fastmcp/servers/http-streaming.js');\n\n  const proc = spawn('node', [serverPath], {\n    stdio: 'inherit',\n    env: {\n      ...process.env,\n      PORT: port,\n      DEBUG: options.debug ? 'fastmcp:*' : undefined\n    }\n  });\n\n  proc.on('exit', (code) => {\n    process.exit(code || 0);\n  });\n\n  // Handle termination signals\n  process.on('SIGINT', () => {\n    proc.kill('SIGINT');\n  });\n\n  process.on('SIGTERM', () => {\n    proc.kill('SIGTERM');\n  });\n}\n\n// List available MCP tools\nexport function listTools() {\n  console.log('\\nüì¶ Available MCP Tools (11 total)\\n');\n\n  console.log('Memory Tools:');\n  console.log('  1. memory_store    - Store values with TTL and namespacing');\n  console.log('  2. memory_retrieve - Retrieve stored values');\n  console.log('  3. memory_search   - Search keys with pattern matching\\n');\n\n  console.log('Swarm Coordination Tools:');\n  console.log('  4. swarm_init      - Initialize multi-agent swarms');\n  console.log('  5. agent_spawn     - Spawn specialized agents');\n  console.log('  6. task_orchestrate - Orchestrate distributed tasks\\n');\n\n  console.log('Agent Execution Tools:');\n  console.log('  7. agent_execute   - Execute specific agent with task');\n  console.log('  8. agent_parallel  - Run 3 agents in parallel mode');\n  console.log('  9. agent_list      - List all available agents\\n');\n\n  console.log('Custom Extension Tools:');\n  console.log('  10. agent_add      - Add new custom agent (markdown)');\n  console.log('  11. command_add    - Add new custom command (markdown)\\n');\n}\n\n// Show server status\nexport function showStatus() {\n  console.log('\\nüîç FastMCP Server Status\\n');\n\n  console.log('Available Transports:');\n  console.log('  ‚úÖ stdio    - JSON-RPC over stdio (for local MCP clients)');\n  console.log('  ‚úÖ HTTP+SSE - HTTP with Server-Sent Events (for web/remote)\\n');\n\n  console.log('Tools: 11/11 implemented');\n  console.log('  ‚úÖ memory_store');\n  console.log('  ‚úÖ memory_retrieve');\n  console.log('  ‚úÖ memory_search');\n  console.log('  ‚úÖ swarm_init');\n  console.log('  ‚úÖ agent_spawn');\n  console.log('  ‚úÖ task_orchestrate');\n  console.log('  ‚úÖ agent_execute');\n  console.log('  ‚úÖ agent_parallel');\n  console.log('  ‚úÖ agent_list');\n  console.log('  ‚úÖ agent_add');\n  console.log('  ‚úÖ command_add\\n');\n\n  console.log('Documentation:');\n  console.log('  üìñ Implementation: docs/fastmcp-implementation.md');\n  console.log('  üöÄ Quick Start: docs/fastmcp-quick-start.md');\n  console.log('  üèóÔ∏è  Architecture: docs/ARCHITECTURE.md\\n');\n}\n\n// CLI handler\nexport function handleMCPCommand(command: string, options: MCPOptions = {}) {\n  switch (command) {\n    case 'start':\n    case 'stdio':\n      return startStdioServer(options);\n\n    case 'http':\n    case 'sse':\n      return startHttpServer(options);\n\n    case 'tools':\n      return listTools();\n\n    case 'status':\n      return showStatus();\n\n    default:\n      console.error(`Unknown MCP command: ${command}`);\n      console.error('\\nAvailable commands:');\n      console.error('  start, stdio - Start stdio MCP server');\n      console.error('  http, sse    - Start HTTP + SSE server');\n      console.error('  tools        - List available tools');\n      console.error('  status       - Show server status\\n');\n      process.exit(1);\n  }\n}\n\n// If run directly\nif (import.meta.url === `file://${process.argv[1]}`) {\n  const command = process.argv[2] || 'start';\n  const options: MCPOptions = {\n    port: process.argv.includes('--port')\n      ? process.argv[process.argv.indexOf('--port') + 1]\n      : undefined,\n    debug: process.argv.includes('--debug')\n  };\n\n  handleMCPCommand(command, options);\n}\n"]}