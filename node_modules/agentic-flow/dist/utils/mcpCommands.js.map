{"version":3,"file":"mcpCommands.js","sourceRoot":"","sources":["../../src/utils/mcpCommands.ts"],"names":[],"mappings":"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","sourcesContent":["// MCP server management commands\nimport { spawn, exec } from 'child_process';\nimport { promisify } from 'util';\n\nconst execAsync = promisify(exec);\n\ninterface MCPServerConfig {\n  name: string;\n  command: string;\n  args: string[];\n  description: string;\n  toolCount: number;\n}\n\nconst MCP_SERVERS: Record<string, MCPServerConfig> = {\n  'claude-flow': {\n    name: 'claude-flow',\n    command: 'npx',\n    args: ['claude-flow@alpha', 'mcp', 'start'],\n    description: '101 tools (neural networks, GitHub, workflows, DAA)',\n    toolCount: 101\n  },\n  'flow-nexus': {\n    name: 'flow-nexus',\n    command: 'npx',\n    args: ['flow-nexus@latest', 'mcp', 'start'],\n    description: '96 cloud tools (sandboxes, distributed swarms, templates)',\n    toolCount: 96\n  },\n  'agentic-payments': {\n    name: 'agentic-payments',\n    command: 'npx',\n    args: ['-y', 'agentic-payments', 'mcp'],\n    description: 'Payment authorization and multi-agent consensus',\n    toolCount: 10\n  }\n};\n\nexport async function handleMCPCommand(command: string, server: string = 'all'): Promise<void> {\n  switch (command) {\n    case 'start':\n      await startMCPServers(server);\n      break;\n    case 'stop':\n      await stopMCPServers(server);\n      break;\n    case 'status':\n      await checkMCPStatus(server);\n      break;\n    case 'list':\n      await listMCPTools(server);\n      break;\n    default:\n      console.error(`‚ùå Unknown MCP command: ${command}`);\n      console.error('Available commands: start, stop, status, list');\n      process.exit(1);\n  }\n}\n\nasync function startMCPServers(server: string): Promise<void> {\n  console.log(`\\nüöÄ Starting MCP Server(s): ${server}\\n`);\n\n  const serversToStart = server === 'all'\n    ? Object.keys(MCP_SERVERS)\n    : [server];\n\n  for (const serverName of serversToStart) {\n    const config = MCP_SERVERS[serverName];\n    if (!config) {\n      console.error(`‚ùå Unknown server: ${serverName}`);\n      continue;\n    }\n\n    console.log(`üì¶ ${config.name}`);\n    console.log(`   ${config.description}`);\n    console.log(`   Command: ${config.command} ${config.args.join(' ')}`);\n    console.log(`   Status: Starting as subprocess...\\n`);\n\n    // Start server in background\n    const child = spawn(config.command, config.args, {\n      detached: true,\n      stdio: 'inherit',\n      env: {\n        ...process.env,\n        MCP_AUTO_START: 'true'\n      }\n    });\n\n    child.unref(); // Allow parent to exit independently\n  }\n\n  console.log(`\\n‚úÖ MCP server(s) started in background`);\n  console.log(`üí° Tip: Use 'npx agentic-flow mcp status' to check server status\\n`);\n}\n\nasync function stopMCPServers(server: string): Promise<void> {\n  console.log(`\\nüõë Stopping MCP Server(s): ${server}\\n`);\n\n  const serversToStop = server === 'all'\n    ? Object.keys(MCP_SERVERS)\n    : [server];\n\n  for (const serverName of serversToStop) {\n    const config = MCP_SERVERS[serverName];\n    if (!config) {\n      console.error(`‚ùå Unknown server: ${serverName}`);\n      continue;\n    }\n\n    try {\n      // Try to kill processes by name\n      const killCommand = process.platform === 'win32'\n        ? `taskkill /F /IM node.exe /FI \"WINDOWTITLE eq ${serverName}*\"`\n        : `pkill -f \"${serverName}\"`;\n\n      await execAsync(killCommand);\n      console.log(`‚úÖ Stopped ${config.name}`);\n    } catch (error: any) {\n      if (error.code === 1) {\n        console.log(`‚ö†Ô∏è  ${config.name} not running`);\n      } else {\n        console.error(`‚ùå Error stopping ${config.name}:`, error.message);\n      }\n    }\n  }\n\n  console.log();\n}\n\nasync function checkMCPStatus(server: string): Promise<void> {\n  console.log(`\\nüìä MCP Server Status: ${server}\\n`);\n\n  const serversToCheck = server === 'all'\n    ? Object.keys(MCP_SERVERS)\n    : [server];\n\n  for (const serverName of serversToCheck) {\n    const config = MCP_SERVERS[serverName];\n    if (!config) {\n      console.error(`‚ùå Unknown server: ${serverName}`);\n      continue;\n    }\n\n    console.log(`üì¶ ${config.name}`);\n    console.log(`   Description: ${config.description}`);\n    console.log(`   Tool Count: ${config.toolCount}`);\n\n    try {\n      // Check if process is running\n      const checkCommand = process.platform === 'win32'\n        ? `tasklist /FI \"IMAGENAME eq node.exe\" /FO CSV | findstr /C:\"${serverName}\"`\n        : `pgrep -f \"${serverName}\"`;\n\n      const { stdout } = await execAsync(checkCommand);\n      const isRunning = stdout.trim().length > 0;\n\n      console.log(`   Status: ${isRunning ? '‚úÖ Running' : '‚ö†Ô∏è  Not running'}`);\n    } catch (error) {\n      console.log(`   Status: ‚ö†Ô∏è  Not running`);\n    }\n    console.log();\n  }\n}\n\nasync function listMCPTools(server: string): Promise<void> {\n  console.log(`\\nüìã MCP Tools Available\\n`);\n\n  const serversToList = server === 'all'\n    ? Object.keys(MCP_SERVERS)\n    : [server];\n\n  let totalTools = 0;\n\n  for (const serverName of serversToList) {\n    const config = MCP_SERVERS[serverName];\n    if (!config) {\n      console.error(`‚ùå Unknown server: ${serverName}`);\n      continue;\n    }\n\n    console.log(`\\nüì¶ ${config.name.toUpperCase()} (${config.toolCount} tools)`);\n    console.log(`   ${config.description}`);\n    console.log();\n\n    totalTools += config.toolCount;\n\n    // Show example tools based on server\n    const examples = getExampleTools(serverName);\n    examples.forEach(tool => {\n      console.log(`   ‚Ä¢ ${tool}`);\n    });\n  }\n\n  // Add in-SDK tools\n  console.log(`\\nüì¶ CLAUDE-FLOW-SDK (6 in-process tools)`);\n  console.log(`   Fast, zero-latency tools running in-process`);\n  console.log();\n  console.log(`   ‚Ä¢ memory_store - Store values in persistent memory`);\n  console.log(`   ‚Ä¢ memory_retrieve - Retrieve values from memory`);\n  console.log(`   ‚Ä¢ memory_list - List all memory keys`);\n  console.log(`   ‚Ä¢ swarm_init - Initialize agent swarms`);\n  console.log(`   ‚Ä¢ agent_spawn - Spawn specialized agents`);\n  console.log(`   ‚Ä¢ coordination_sync - Synchronize agent coordination`);\n\n  totalTools += 6;\n\n  console.log(`\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ`);\n  console.log(`üìä TOTAL: ${totalTools} MCP tools available`);\n  console.log(`‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n`);\n\n  console.log(`üí° Usage: Tools are automatically available to agents`);\n  console.log(`   npx agentic-flow --agent coder --task \"Your task\"\\n`);\n}\n\nfunction getExampleTools(serverName: string): string[] {\n  switch (serverName) {\n    case 'claude-flow':\n      return [\n        'swarm_init - Initialize multi-agent swarms',\n        'agent_spawn - Create specialized AI agents',\n        'task_orchestrate - Orchestrate complex tasks',\n        'neural_train - Train neural networks with WASM',\n        'github_repo_analyze - Analyze GitHub repositories',\n        'workflow_create - Create automated workflows',\n        'daa_agent_create - Create autonomous agents',\n        'performance_report - Generate performance metrics',\n        '... and 93 more tools'\n      ];\n    case 'flow-nexus':\n      return [\n        'sandbox_create - Create isolated E2B sandboxes',\n        'sandbox_execute - Execute code in sandboxes',\n        'swarm_init - Initialize cloud-based swarms',\n        'neural_train - Distributed neural training',\n        'workflow_create - Event-driven workflows',\n        'template_deploy - Deploy project templates',\n        'user_login - Authenticate Flow Nexus users',\n        'storage_upload - Cloud file storage',\n        '... and 88 more tools'\n      ];\n    case 'agentic-payments':\n      return [\n        'create_active_mandate - Create payment authorization',\n        'sign_mandate - Sign with Ed25519 cryptography',\n        'verify_mandate - Verify payment signatures',\n        'revoke_mandate - Revoke authorizations',\n        'verify_consensus - Multi-agent consensus',\n        'generate_agent_identity - Create agent identities',\n        '... and 4 more tools'\n      ];\n    default:\n      return [];\n  }\n}\n"]}