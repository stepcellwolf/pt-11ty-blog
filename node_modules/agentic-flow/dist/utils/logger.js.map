{"version":3,"file":"logger.js","sourceRoot":"","sources":["../../src/utils/logger.ts"],"names":[],"mappings":"AAWA,MAAM,MAAM;IACF,OAAO,GAAwB,EAAE,CAAC;IAE1C,UAAU,CAAC,GAAwB;QACjC,IAAI,CAAC,OAAO,GAAG,EAAE,GAAG,IAAI,CAAC,OAAO,EAAE,GAAG,GAAG,EAAE,CAAC;IAC7C,CAAC;IAEO,GAAG,CAAC,KAAe,EAAE,OAAe,EAAE,IAAiB;QAC7D,gEAAgE;QAChE,IAAI,OAAO,CAAC,GAAG,CAAC,KAAK,KAAK,MAAM,IAAI,KAAK,KAAK,OAAO,EAAE,CAAC;YACtD,OAAO;QACT,CAAC;QAED,MAAM,SAAS,GAAG,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC;QAC3C,MAAM,QAAQ,GAAG;YACf,SAAS;YACT,KAAK;YACL,OAAO;YACP,GAAG,IAAI,CAAC,OAAO;YACf,GAAG,IAAI;SACR,CAAC;QAEF,yCAAyC;QACzC,IAAI,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,YAAY,EAAE,CAAC;YAC1C,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC;QACxC,CAAC;aAAM,CAAC;YACN,iCAAiC;YACjC,MAAM,MAAM,GAAG,IAAI,SAAS,KAAK,KAAK,CAAC,WAAW,EAAE,EAAE,CAAC;YACvD,MAAM,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,OAAO,EAAE,GAAG,IAAI,EAAE,CAAC,CAAC,MAAM,GAAG,CAAC;gBACrE,CAAC,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,EAAE,GAAG,IAAI,CAAC,OAAO,EAAE,GAAG,IAAI,EAAE,CAAC,EAAE;gBACpD,CAAC,CAAC,EAAE,CAAC;YACP,OAAO,CAAC,GAAG,CAAC,GAAG,MAAM,KAAK,OAAO,GAAG,UAAU,EAAE,CAAC,CAAC;QACpD,CAAC;IACH,CAAC;IAED,KAAK,CAAC,OAAe,EAAE,IAAiB;QACtC,sEAAsE;QACtE,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC;YAC/C,OAAO;QACT,CAAC;QACD,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC;IACnC,CAAC;IAED,IAAI,CAAC,OAAe,EAAE,IAAiB;QACrC,uCAAuC;QACvC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC;YAC/C,OAAO;QACT,CAAC;QACD,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC;IAClC,CAAC;IAED,IAAI,CAAC,OAAe,EAAE,IAAiB;QACrC,sCAAsC;QACtC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC;YAC/C,OAAO;QACT,CAAC;QACD,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC;IAClC,CAAC;IAED,KAAK,CAAC,OAAe,EAAE,IAAiB;QACtC,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC;IACnC,CAAC;CACF;AAED,MAAM,CAAC,MAAM,MAAM,GAAG,IAAI,MAAM,EAAE,CAAC","sourcesContent":["// Structured logging utility\ntype LogLevel = 'debug' | 'info' | 'warn' | 'error';\n\ninterface LogContext {\n  agent?: string;\n  task?: string;\n  duration?: number;\n  error?: unknown;\n  [key: string]: any;\n}\n\nclass Logger {\n  private context: Record<string, any> = {};\n\n  setContext(ctx: Record<string, any>) {\n    this.context = { ...this.context, ...ctx };\n  }\n\n  private log(level: LogLevel, message: string, data?: LogContext) {\n    // Skip all logs if QUIET mode is enabled (unless it's an error)\n    if (process.env.QUIET === 'true' && level !== 'error') {\n      return;\n    }\n\n    const timestamp = new Date().toISOString();\n    const logEntry = {\n      timestamp,\n      level,\n      message,\n      ...this.context,\n      ...data\n    };\n\n    // Structured JSON logging for production\n    if (process.env.NODE_ENV === 'production') {\n      console.log(JSON.stringify(logEntry));\n    } else {\n      // Human-readable for development\n      const prefix = `[${timestamp}] ${level.toUpperCase()}`;\n      const contextStr = Object.keys({ ...this.context, ...data }).length > 0\n        ? ` ${JSON.stringify({ ...this.context, ...data })}`\n        : '';\n      console.log(`${prefix}: ${message}${contextStr}`);\n    }\n  }\n\n  debug(message: string, data?: LogContext) {\n    // Skip debug logs unless DEBUG or VERBOSE environment variable is set\n    if (!process.env.DEBUG && !process.env.VERBOSE) {\n      return;\n    }\n    this.log('debug', message, data);\n  }\n\n  info(message: string, data?: LogContext) {\n    // Skip info logs unless VERBOSE is set\n    if (!process.env.DEBUG && !process.env.VERBOSE) {\n      return;\n    }\n    this.log('info', message, data);\n  }\n\n  warn(message: string, data?: LogContext) {\n    // Skip warnings unless VERBOSE is set\n    if (!process.env.DEBUG && !process.env.VERBOSE) {\n      return;\n    }\n    this.log('warn', message, data);\n  }\n\n  error(message: string, data?: LogContext) {\n    this.log('error', message, data);\n  }\n}\n\nexport const logger = new Logger();\n"]}