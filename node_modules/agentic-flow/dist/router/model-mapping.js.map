{"version":3,"file":"model-mapping.js","sourceRoot":"","sources":["../../src/router/model-mapping.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Model ID Mapping for Multi-Provider Support\n *\n * Different providers use different model ID formats:\n * - Anthropic: \"claude-sonnet-4-5-20250929\" (dated releases)\n * - OpenRouter: \"anthropic/claude-sonnet-4.5\" (vendor/model format)\n * - AWS Bedrock: \"anthropic.claude-sonnet-4-5-v2:0\" (ARN-style)\n */\n\nexport interface ModelMapping {\n  anthropic: string;\n  openrouter: string;\n  bedrock?: string;\n  canonical: string; // Human-readable name\n}\n\n/**\n * Claude Model Mappings\n */\nexport const CLAUDE_MODELS: Record<string, ModelMapping> = {\n  // Claude Sonnet 4.5 (September 2025 release)\n  'claude-sonnet-4.5': {\n    anthropic: 'claude-sonnet-4-5-20250929',\n    openrouter: 'anthropic/claude-sonnet-4.5',\n    bedrock: 'anthropic.claude-sonnet-4-5-v2:0',\n    canonical: 'Claude Sonnet 4.5'\n  },\n\n  // Claude Sonnet 4 (original release)\n  'claude-sonnet-4': {\n    anthropic: 'claude-sonnet-4-20240620',\n    openrouter: 'anthropic/claude-sonnet-4',\n    bedrock: 'anthropic.claude-sonnet-4-v1:0',\n    canonical: 'Claude Sonnet 4'\n  },\n\n  // Claude 3.7 Sonnet\n  'claude-3.7-sonnet': {\n    anthropic: 'claude-3-7-sonnet-20250219',\n    openrouter: 'anthropic/claude-3.7-sonnet',\n    canonical: 'Claude 3.7 Sonnet'\n  },\n\n  // Claude 3.5 Sonnet (October 2024)\n  'claude-3.5-sonnet': {\n    anthropic: 'claude-3-5-sonnet-20241022',\n    openrouter: 'anthropic/claude-3.5-sonnet-20241022',\n    bedrock: 'anthropic.claude-3-5-sonnet-20241022-v2:0',\n    canonical: 'Claude 3.5 Sonnet'\n  },\n\n  // Claude 3.5 Haiku\n  'claude-3.5-haiku': {\n    anthropic: 'claude-3-5-haiku-20241022',\n    openrouter: 'anthropic/claude-3.5-haiku-20241022',\n    canonical: 'Claude 3.5 Haiku'\n  },\n\n  // Claude Opus 4.1\n  'claude-opus-4.1': {\n    anthropic: 'claude-opus-4-1-20250514',\n    openrouter: 'anthropic/claude-opus-4.1',\n    canonical: 'Claude Opus 4.1'\n  }\n};\n\n/**\n * Map a model ID from one provider format to another\n */\nexport function mapModelId(\n  modelId: string,\n  targetProvider: 'anthropic' | 'openrouter' | 'bedrock'\n): string {\n  // If already in correct format, return as-is\n  if (targetProvider === 'anthropic' && modelId.startsWith('claude-')) {\n    // Check if it's already an Anthropic API ID (has date like 20250929)\n    if (/claude-.*-\\d{8}/.test(modelId)) {\n      return modelId;\n    }\n  }\n\n  if (targetProvider === 'openrouter' && modelId.startsWith('anthropic/')) {\n    return modelId;\n  }\n\n  // Try to find canonical mapping\n  for (const [canonical, mapping] of Object.entries(CLAUDE_MODELS)) {\n    if (\n      modelId === mapping.anthropic ||\n      modelId === mapping.openrouter ||\n      modelId === mapping.bedrock ||\n      modelId === canonical\n    ) {\n      const mapped = mapping[targetProvider];\n      if (mapped) {\n        return mapped;\n      }\n    }\n  }\n\n  // If no mapping found, try to convert format\n  if (targetProvider === 'openrouter') {\n    // Convert Anthropic format to OpenRouter format\n    // claude-sonnet-4-5-20250929 -> anthropic/claude-sonnet-4.5\n    if (modelId.startsWith('claude-')) {\n      const withoutDate = modelId.replace(/-\\d{8}$/, '');\n      const parts = withoutDate.split('-');\n\n      if (parts.length >= 3) {\n        const family = parts[0]; // claude\n        const tier = parts[1]; // sonnet, opus, haiku\n        const version = parts.slice(2).join('.'); // 4.5 or 3.5\n\n        return `anthropic/${family}-${tier}-${version}`;\n      }\n    }\n  } else if (targetProvider === 'anthropic') {\n    // Convert OpenRouter format to Anthropic format\n    // anthropic/claude-sonnet-4.5 -> claude-sonnet-4-5-20250929\n    if (modelId.startsWith('anthropic/')) {\n      const withoutPrefix = modelId.replace('anthropic/', '');\n\n      // Look up in mappings by OpenRouter ID\n      for (const mapping of Object.values(CLAUDE_MODELS)) {\n        if (mapping.openrouter === modelId) {\n          return mapping.anthropic;\n        }\n      }\n    }\n  }\n\n  // No conversion possible, return original\n  console.warn(`⚠️  No model mapping found for '${modelId}' to ${targetProvider}, using original ID`);\n  return modelId;\n}\n\n/**\n * Get human-readable model name\n */\nexport function getModelName(modelId: string): string {\n  for (const mapping of Object.values(CLAUDE_MODELS)) {\n    if (\n      modelId === mapping.anthropic ||\n      modelId === mapping.openrouter ||\n      modelId === mapping.bedrock\n    ) {\n      return mapping.canonical;\n    }\n  }\n\n  return modelId;\n}\n\n/**\n * List all available model IDs for a provider\n */\nexport function listModels(provider: 'anthropic' | 'openrouter' | 'bedrock'): string[] {\n  return Object.values(CLAUDE_MODELS)\n    .map(m => m[provider])\n    .filter((id): id is string => id !== undefined);\n}\n"]}