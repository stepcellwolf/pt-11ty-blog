{"version":3,"sources":["../../../src/memory/enhanced-examples.js"],"sourcesContent":["/**\n * Examples of using enhanced memory features\n */\n\nimport { enhancedMemory } from './enhanced-memory.js';\n\n// Initialize enhanced memory\nawait enhancedMemory.initialize();\n\n// === 1. Session Management Example ===\nasync function exampleSessionManagement() {\n  console.log('\\n=== Session Management ===');\n\n  // Save current session state\n  const sessionId = `session-${Date.now()}`;\n  await enhancedMemory.saveSessionState(sessionId, {\n    state: 'active',\n    context: {\n      currentTask: 'Implementing authentication',\n      openFiles: ['src/auth.js', 'src/middleware/auth.js'],\n      cursorPositions: { 'src/auth.js': { line: 45, column: 12 } },\n      activeAgents: ['AuthExpert', 'SecurityReviewer'],\n      completedSteps: ['Design API', 'Create models'],\n      nextSteps: ['Implement JWT', 'Add tests'],\n    },\n  });\n\n  console.log('Session saved:', sessionId);\n\n  // Later, resume the session\n  const resumed = await enhancedMemory.resumeSession(sessionId);\n  console.log('Resumed context:', resumed.context);\n}\n\n// === 2. MCP Tool Usage Tracking ===\nasync function exampleToolTracking() {\n  console.log('\\n=== Tool Usage Tracking ===');\n\n  const startTime = Date.now();\n\n  // Track a successful tool usage\n  await enhancedMemory.trackToolUsage(\n    'memory_usage',\n    { action: 'store', key: 'test', value: 'data' },\n    { success: true, stored: true },\n    Date.now() - startTime,\n    true,\n  );\n\n  // Track a failed tool usage\n  await enhancedMemory.trackToolUsage(\n    'swarm_init',\n    { topology: 'invalid' },\n    null,\n    150,\n    false,\n    'Invalid topology specified',\n  );\n\n  // Get tool statistics\n  const stats = await enhancedMemory.getToolStats();\n  console.log('Tool effectiveness:', stats);\n}\n\n// === 3. Training Data Collection ===\nasync function exampleTrainingData() {\n  console.log('\\n=== Training Data ===');\n\n  // Record a successful code fix\n  await enhancedMemory.recordTrainingExample(\n    'error_fix',\n    {\n      error: 'TypeError: Cannot read property of undefined',\n      code: 'const result = user.profile.name;',\n      context: 'User object might be null',\n    },\n    {\n      fix: 'const result = user?.profile?.name || \"Anonymous\";',\n      explanation: 'Added optional chaining and default value',\n    },\n    {\n      errorResolved: true,\n      testsPass: true,\n    },\n    0.95,\n    'Good defensive programming practice',\n  );\n\n  // Get training examples\n  const examples = await enhancedMemory.getTrainingData('error_fix', 5);\n  console.log('Training examples:', examples.length);\n}\n\n// === 4. Code Pattern Recognition ===\nasync function exampleCodePatterns() {\n  console.log('\\n=== Code Patterns ===');\n\n  // Record a frequently used pattern\n  await enhancedMemory.recordCodePattern(\n    'src/utils/api.js',\n    'error_handler',\n    `\n    try {\n      const response = await fetch(url);\n      if (!response.ok) throw new Error(\\`HTTP \\${response.status}\\`);\n      return await response.json();\n    } catch (error) {\n      console.error('API Error:', error);\n      throw new ApiError(error.message, error.status);\n    }\n    `,\n    'javascript',\n  );\n\n  // Find similar patterns\n  const patterns = await enhancedMemory.findSimilarPatterns('javascript', 5);\n  console.log(\n    'Found patterns:',\n    patterns.map((p) => p.pattern_name),\n  );\n}\n\n// === 5. Agent Collaboration ===\nasync function exampleAgentCollaboration() {\n  console.log('\\n=== Agent Collaboration ===');\n\n  const taskId = 'task-auth-001';\n\n  // Record agent interactions\n  await enhancedMemory.recordAgentInteraction(\n    'Coordinator',\n    'AuthExpert',\n    'request',\n    { action: 'design', component: 'JWT middleware' },\n    taskId,\n  );\n\n  await enhancedMemory.recordAgentInteraction(\n    'AuthExpert',\n    'Coordinator',\n    'response',\n    {\n      design: 'JWT with refresh tokens',\n      estimatedTime: '2 hours',\n      dependencies: ['jsonwebtoken', 'bcrypt'],\n    },\n    taskId,\n  );\n\n  // Get conversation history\n  const conversation = await enhancedMemory.getAgentConversation(taskId);\n  console.log('Agent conversation:', conversation.length, 'messages');\n}\n\n// === 6. Knowledge Graph ===\nasync function exampleKnowledgeGraph() {\n  console.log('\\n=== Knowledge Graph ===');\n\n  // Add entities and relationships\n  await enhancedMemory.addKnowledgeEntity(\n    'module',\n    'AuthModule',\n    'src/auth/index.js',\n    ['UserModel', 'JWTService', 'AuthMiddleware'],\n    {\n      exports: ['authenticate', 'authorize', 'refreshToken'],\n      dependencies: 4,\n      complexity: 'medium',\n    },\n  );\n\n  await enhancedMemory.addKnowledgeEntity(\n    'service',\n    'JWTService',\n    'src/auth/jwt.service.js',\n    ['AuthModule', 'ConfigService'],\n    {\n      methods: ['sign', 'verify', 'decode'],\n      tokenExpiry: '1h',\n    },\n  );\n\n  // Find related entities\n  const related = await enhancedMemory.findRelatedEntities('AuthModule');\n  console.log(\n    'Related entities:',\n    related.map((e) => e.entity_name),\n  );\n}\n\n// === 7. Error Learning ===\nasync function exampleErrorLearning() {\n  console.log('\\n=== Error Learning ===');\n\n  // Record an error and its resolution\n  await enhancedMemory.recordError(\n    'DatabaseError',\n    'Connection timeout',\n    'at Database.connect (db.js:45)',\n    {\n      operation: 'startup',\n      config: { host: 'localhost', port: 5432 },\n    },\n    'Increased connection timeout to 30s and added retry logic',\n  );\n\n  // Later, get solutions for similar errors\n  const solutions = await enhancedMemory.getErrorSolutions('DatabaseError');\n  console.log(\n    'Known solutions:',\n    solutions.map((s) => s.resolution),\n  );\n}\n\n// === 8. Performance Monitoring ===\nasync function examplePerformanceTracking() {\n  console.log('\\n=== Performance Tracking ===');\n\n  // Record performance metrics\n  await enhancedMemory.recordPerformance(\n    'file_analysis',\n    { files: 150, totalSize: '45MB' },\n    3420, // duration in ms\n    125.5, // memory in MB\n    45.2, // CPU %\n  );\n\n  // Get performance trends\n  const trends = await enhancedMemory.getPerformanceTrends('file_analysis', 7);\n  console.log('Performance trends:', trends);\n}\n\n// === 9. User Preference Learning ===\nasync function examplePreferenceLearning() {\n  console.log('\\n=== Preference Learning ===');\n\n  // Learn from user actions\n  await enhancedMemory.learnPreference(\n    'indent_style',\n    'spaces',\n    'coding_style',\n    'inferred',\n    0.95, // high confidence based on consistent usage\n  );\n\n  await enhancedMemory.learnPreference(\n    'test_framework',\n    'jest',\n    'tool_usage',\n    'explicit',\n    1.0, // user explicitly stated preference\n  );\n\n  // Get learned preferences\n  const codingPrefs = await enhancedMemory.getPreferences('coding_style');\n  console.log('Coding preferences:', codingPrefs);\n}\n\n// === 10. Comprehensive Session Export ===\nasync function exampleSessionExport() {\n  console.log('\\n=== Session Export ===');\n\n  const sessionId = 'session-example';\n  const exportData = await enhancedMemory.exportSessionData(sessionId);\n\n  console.log('Exported data includes:');\n  console.log('- Session state:', exportData.session ? 'Yes' : 'No');\n  console.log('- Tool usage:', exportData.tools.length, 'records');\n  console.log('- Performance:', exportData.performance.length, 'benchmarks');\n  console.log('- Interactions:', exportData.interactions.length, 'messages');\n}\n\n// Run all examples\nasync function runAllExamples() {\n  await exampleSessionManagement();\n  await exampleToolTracking();\n  await exampleTrainingData();\n  await exampleCodePatterns();\n  await exampleAgentCollaboration();\n  await exampleKnowledgeGraph();\n  await exampleErrorLearning();\n  await examplePerformanceTracking();\n  await examplePreferenceLearning();\n  await exampleSessionExport();\n\n  // Show database statistics\n  const stats = await enhancedMemory.getDatabaseStats();\n  console.log('\\n=== Database Statistics ===');\n  console.log(stats);\n\n  enhancedMemory.close();\n}\n\n// Export for testing\nexport {\n  exampleSessionManagement,\n  exampleToolTracking,\n  exampleTrainingData,\n  exampleCodePatterns,\n  exampleAgentCollaboration,\n  exampleKnowledgeGraph,\n  exampleErrorLearning,\n  examplePerformanceTracking,\n  examplePreferenceLearning,\n  exampleSessionExport,\n  runAllExamples,\n};\n"],"names":["enhancedMemory","initialize","exampleSessionManagement","console","log","sessionId","Date","now","saveSessionState","state","context","currentTask","openFiles","cursorPositions","line","column","activeAgents","completedSteps","nextSteps","resumed","resumeSession","exampleToolTracking","startTime","trackToolUsage","action","key","value","success","stored","topology","stats","getToolStats","exampleTrainingData","recordTrainingExample","error","code","fix","explanation","errorResolved","testsPass","examples","getTrainingData","length","exampleCodePatterns","recordCodePattern","patterns","findSimilarPatterns","map","p","pattern_name","exampleAgentCollaboration","taskId","recordAgentInteraction","component","design","estimatedTime","dependencies","conversation","getAgentConversation","exampleKnowledgeGraph","addKnowledgeEntity","exports","complexity","methods","tokenExpiry","related","findRelatedEntities","e","entity_name","exampleErrorLearning","recordError","operation","config","host","port","solutions","getErrorSolutions","s","resolution","examplePerformanceTracking","recordPerformance","files","totalSize","trends","getPerformanceTrends","examplePreferenceLearning","learnPreference","codingPrefs","getPreferences","exampleSessionExport","exportData","exportSessionData","session","tools","performance","interactions","runAllExamples","getDatabaseStats","close"],"mappings":"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"}