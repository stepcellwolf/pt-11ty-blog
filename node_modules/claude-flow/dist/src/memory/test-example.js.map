{"version":3,"sources":["../../../src/memory/test-example.js"],"sourcesContent":["/**\n * Test example for SharedMemory and SwarmMemory\n *\n * Demonstrates basic usage patterns\n */\n\nimport { SharedMemory, SwarmMemory, createMemory } from './index.js';\n\nasync function testSharedMemory() {\n  console.log('=== Testing SharedMemory ===\\n');\n\n  const memory = new SharedMemory({\n    directory: '.hive-mind',\n    cacheSize: 100,\n    cacheMemoryMB: 10,\n  });\n\n  try {\n    await memory.initialize();\n    console.log('✓ Initialized SharedMemory');\n\n    // Store some data\n    await memory.store('test-key', { message: 'Hello, World!' });\n    console.log('✓ Stored test data');\n\n    // Retrieve data\n    const retrieved = await memory.retrieve('test-key');\n    console.log('✓ Retrieved:', retrieved);\n\n    // Store with TTL\n    await memory.store('temp-key', 'Temporary data', {\n      ttl: 60, // 60 seconds\n      tags: ['temp', 'test'],\n    });\n    console.log('✓ Stored temporary data with TTL');\n\n    // List entries\n    const entries = await memory.list('default', { limit: 10 });\n    console.log(`✓ Found ${entries.length} entries`);\n\n    // Get statistics\n    const stats = await memory.getStats();\n    console.log('✓ Statistics:', stats);\n\n    await memory.close();\n    console.log('✓ Closed SharedMemory\\n');\n  } catch (error) {\n    console.error('✗ Error:', error);\n  }\n}\n\nasync function testSwarmMemory() {\n  console.log('=== Testing SwarmMemory ===\\n');\n\n  const swarm = new SwarmMemory({\n    swarmId: 'test-swarm',\n    directory: '.swarm',\n  });\n\n  try {\n    await swarm.initialize();\n    console.log('✓ Initialized SwarmMemory');\n\n    // Store agent\n    await swarm.storeAgent('agent-1', {\n      id: 'agent-1',\n      name: 'Test Agent',\n      type: 'coder',\n      status: 'active',\n      capabilities: ['javascript', 'python'],\n    });\n    console.log('✓ Stored agent');\n\n    // Store task\n    await swarm.storeTask('task-1', {\n      id: 'task-1',\n      description: 'Test task',\n      priority: 'high',\n      status: 'pending',\n      assignedAgents: ['agent-1'],\n    });\n    console.log('✓ Stored task');\n\n    // Update task status\n    await swarm.updateTaskStatus('task-1', 'in_progress');\n    console.log('✓ Updated task status');\n\n    // Store pattern\n    await swarm.storePattern('pattern-1', {\n      id: 'pattern-1',\n      type: 'optimization',\n      confidence: 0.85,\n      data: { strategy: 'parallel' },\n    });\n    console.log('✓ Stored pattern');\n\n    // Get swarm stats\n    const stats = await swarm.getSwarmStats();\n    console.log('✓ Swarm statistics:', {\n      agents: stats.swarm.agents,\n      tasks: stats.swarm.tasks,\n      patterns: stats.swarm.patterns,\n    });\n\n    await swarm.close();\n    console.log('✓ Closed SwarmMemory\\n');\n  } catch (error) {\n    console.error('✗ Error:', error);\n  }\n}\n\nasync function testMemoryFactory() {\n  console.log('=== Testing Memory Factory ===\\n');\n\n  // Create SharedMemory\n  const shared = createMemory({ type: 'shared' });\n  console.log('✓ Created SharedMemory via factory');\n\n  // Create SwarmMemory\n  const swarm = createMemory({ type: 'swarm', swarmId: 'factory-test' });\n  console.log('✓ Created SwarmMemory via factory\\n');\n}\n\n// Run tests\nasync function runTests() {\n  await testSharedMemory();\n  await testSwarmMemory();\n  await testMemoryFactory();\n\n  console.log('=== All tests completed ===');\n}\n\n// Only run if executed directly\nif (import.meta.url === `file://${process.argv[1]}`) {\n  runTests().catch(console.error);\n}\n\nexport { testSharedMemory, testSwarmMemory, testMemoryFactory };\n"],"names":["SharedMemory","SwarmMemory","createMemory","testSharedMemory","console","log","memory","directory","cacheSize","cacheMemoryMB","initialize","store","message","retrieved","retrieve","ttl","tags","entries","list","limit","length","stats","getStats","close","error","testSwarmMemory","swarm","swarmId","storeAgent","id","name","type","status","capabilities","storeTask","description","priority","assignedAgents","updateTaskStatus","storePattern","confidence","data","strategy","getSwarmStats","agents","tasks","patterns","testMemoryFactory","shared","runTests","url","process","argv","catch"],"mappings":"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"}