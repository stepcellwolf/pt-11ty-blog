<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Build privacy-first AI lab with local LLMs—run models up to 34B on RTX 3090 (24GB VRAM) with network isolation, traffic monitoring, and real privacy controls.">
    <meta name="author" content="William Zujkowski">
    <meta name="keywords" content="cybersecurity, information security, AI security, Zero-Trust, homelab, security engineering, NIST compliance, federal security">
    
    <title>Building a Privacy-First AI Lab: Deploying Local LLMs Without Sacrificing Ethics - William Zujkowski</title>
    
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="canonical" href="https://williamzujkowski.github.io/posts/building-a-privacy-first-ai-lab-deploying-local-llms-without-sacrificing-ethics/">
    
    <!-- RSS Feed -->
    <link rel="alternate" type="application/atom+xml" title="William Zujkowski Feed" href="https://williamzujkowski.github.io/feed.xml">
    
    <!-- Favicons and PWA -->
    
<!-- Primary Favicons -->
<link rel="icon" type="image/svg+xml" href="/assets/images/favicon.svg">

<!-- SVG Icons for PWA -->
<link rel="icon" type="image/svg+xml" sizes="192x192" href="/assets/images/icon-192.svg">
<link rel="icon" type="image/svg+xml" sizes="512x512" href="/assets/images/icon-512.svg">

<!-- Theme Colors -->
<meta name="msapplication-TileColor" content="#1e40af">
<meta name="theme-color" content="#1e40af">

<!-- Web App Manifest -->
<link rel="manifest" href="/manifest.json">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Building a Privacy-First AI Lab: Deploying Local LLMs Without Sacrificing Ethics">
    <meta property="og:description" content="Build privacy-first AI lab with local LLMs—run models up to 34B on RTX 3090 (24GB VRAM) with network isolation, traffic monitoring, and real privacy controls.">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://williamzujkowski.github.io/posts/building-a-privacy-first-ai-lab-deploying-local-llms-without-sacrificing-ethics/">
    <meta property="og:image" content="https://williamzujkowski.github.io/assets/images/og-image.jpg">
    <meta property="og:site_name" content="William Zujkowski">
    <meta property="og:locale" content="en_US">
    
    <meta property="article:author" content="William Zujkowski">
    <meta property="article:published_time" content="2025-10-29">
    
    
    
    <!-- Additional SEO Meta -->
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        
        "headline": "Building a Privacy-First AI Lab: Deploying Local LLMs Without Sacrificing Ethics",
        "description": "Build privacy-first AI lab with local LLMs—run models up to 34B on RTX 3090 (24GB VRAM) with network isolation, traffic monitoring, and real privacy controls.",
        "datePublished": "2025-10-29",
        "dateModified": "2025-11-14",
        "author": {
            "@type": "Person",
            "name": "William Zujkowski",
            "url": "https://williamzujkowski.github.io/about/",
            "sameAs": [
                "https://github.com/williamzujkowski",
                "https://www.linkedin.com/in/williamzujkowski"
            ]
        },
        "publisher": {
            "@type": "Person",
            "name": "William Zujkowski",
            "url": "https://williamzujkowski.github.io",
            "logo": {
                "@type": "ImageObject",
                "url": "https://williamzujkowski.github.io/assets/images/headshot.png"
            }
        },
        "image": {
            "@type": "ImageObject",
            "url": "https://williamzujkowski.github.io/assets/images/og-image.jpg"
        },
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://williamzujkowski.github.io/posts/building-a-privacy-first-ai-lab-deploying-local-llms-without-sacrificing-ethics/"
        },
        "url": "https://williamzujkowski.github.io/posts/building-a-privacy-first-ai-lab-deploying-local-llms-without-sacrificing-ethics/"
        
    }
    </script>
    
    <!-- Resource Hints for Performance -->
    <link rel="preconnect" href="https://rsms.me">
    <link rel="dns-prefetch" href="https://rsms.me">
    
    <!-- Inter font -->
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
    
    <!-- Dark mode script -->
    <script>
        // Initialize dark mode and theme color
        (function() {
            const isDark = localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches);
            const themeColorMeta = document.querySelector('meta[name="theme-color"]');
            
            if (isDark) {
                document.documentElement.classList.add('dark');
                if (themeColorMeta) themeColorMeta.content = '#111827';
            } else {
                document.documentElement.classList.remove('dark');
                if (themeColorMeta) themeColorMeta.content = '#1e40af';
            }
        })();
    </script>
</head>
<body class="min-h-screen bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-300 antialiased">
    <a href="#main" class="skip-to-main">Skip to main content</a>


    
    <!-- Header -->
    <header role="banner" aria-label="Site header" class="site-header sticky top-0 z-50 w-full">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8" aria-label="Primary navigation">
            <div class="flex items-center justify-between h-16">
                <!-- Logo -->
                <div class="flex-shrink-0">
                    <a href="/" class="text-xl font-semibold gradient-text">
                        William Zujkowski
                    </a>
                </div>
                
                <!-- Desktop Navigation -->
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-1">
                        <ul class="flex items-center space-x-1"><li><a href="/" class="px-3 py-2 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200">Home</a></li>
<li><a href="/about/" class="px-3 py-2 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200">About</a></li>
<li><a href="/posts/" class="px-3 py-2 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200">Posts</a></li>
<li><a href="/resources/" class="px-3 py-2 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200">Resources</a></li>
<li><a href="/stats/" class="px-3 py-2 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200">Stats</a></li>
<li><a href="/uses/" class="px-3 py-2 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200">Uses</a></li></ul>
                    </div>
                </div>
                
                <!-- Dark mode toggle & Mobile menu button -->
                <div class="flex items-center space-x-4">
                    <!-- Dark mode toggle -->
                    <button type="button" onclick="toggleDarkMode()" class="min-w-[44px] min-h-[44px] flex items-center justify-center rounded-lg text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200" aria-label="Toggle dark mode">
                        <!-- Light mode icon -->
                        <svg class="w-5 h-5 block dark:hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                        </svg>
                        <!-- Dark mode icon -->
                        <svg class="w-5 h-5 hidden dark:block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                        </svg>
                    </button>
                    
                    <!-- Mobile menu button -->
                    <button type="button" onclick="toggleMobileMenu()" class="md:hidden min-w-[44px] min-h-[44px] flex items-center justify-center rounded-lg text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200" aria-label="Toggle menu" data-mobile-menu-button>
                        <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
            
            <!-- Mobile Navigation -->
            <div id="mobile-menu" class="hidden md:hidden" data-mobile-menu-panel>
                <div class="px-2 pt-2 pb-3 space-y-1">
                    <ul class="space-y-1"><li><a href="/" class="block px-4 py-3 min-h-[44px] rounded-lg text-base font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200">Home</a></li>
<li><a href="/about/" class="block px-4 py-3 min-h-[44px] rounded-lg text-base font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200">About</a></li>
<li><a href="/posts/" class="block px-4 py-3 min-h-[44px] rounded-lg text-base font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200">Posts</a></li>
<li><a href="/resources/" class="block px-4 py-3 min-h-[44px] rounded-lg text-base font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200">Resources</a></li>
<li><a href="/stats/" class="block px-4 py-3 min-h-[44px] rounded-lg text-base font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200">Stats</a></li>
<li><a href="/uses/" class="block px-4 py-3 min-h-[44px] rounded-lg text-base font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200">Uses</a></li></ul>
                </div>
            </div>
        </nav>
    </header>
    
    <!-- Breadcrumbs -->
    
    
    <!-- Main content -->
    <main id="main" class="flex-grow">
        <!-- Enhanced Breadcrumbs for Blog Posts -->
<nav class="container mx-auto px-4 sm:px-6 lg:px-8 py-4" aria-label="Breadcrumb">
  <ol class="flex items-center space-x-2 text-sm flex-wrap">
    <li>
      <a href="/" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors">
        <svg class="w-4 h-4 inline-block mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
        </svg>
        Home
      </a>
    </li>
    <li class="flex items-center">
      <svg class="w-4 h-4 mx-2 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg>
      <a href="/posts/" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors">
        Blog
      </a>
    </li>
    
      
      
        
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
      
      <li class="flex items-center">
        <svg class="w-4 h-4 mx-2 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
        <a href="/tags/ethics/" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors">
          ethics
        </a>
      </li>
      
    
    <li class="flex items-center">
      <svg class="w-4 h-4 mx-2 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg>
      <span class="text-gray-900 dark:text-gray-100 font-medium truncate max-w-xs">Building a Privacy-First AI Lab: Deploying Local L...</span>
    </li>
  </ol>
</nav>

<article class="py-16 sm:py-24">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="mx-auto max-w-3xl">
            <header role="banner" aria-label="Site header" class="mb-12">
                <div class="text-center">
                    <div class="flex items-center justify-center space-x-4 text-sm font-medium">
                        <time datetime="2025-10-29" class="text-primary-600 dark:text-primary-400">
                            October 29, 2025
                        </time>
                        <span class="text-gray-400 dark:text-gray-600">•</span>
                        <span class="text-gray-600 dark:text-gray-400">
                            16 min read
                        </span>
                    </div>
                    <h1 class="mt-4 text-4xl font-bold tracking-tight text-gray-900 dark:text-gray-100 sm:text-5xl animate-fade-in-up">
                        Building a Privacy-First AI Lab: Deploying Local LLMs Without Sacrificing Ethics
                    </h1>
                    
                    <p class="mt-6 text-lg leading-8 text-gray-600 dark:text-gray-300 animate-fade-in-up animation-delay-200">
                        Build privacy-first AI lab with local LLMs—run models up to 34B on RTX 3090 (24GB VRAM) with network isolation, traffic monitoring, and real privacy controls.
                    </p>
                    
                </div>
                
                
                <div class="mt-8 flex flex-wrap justify-center gap-2 animate-fade-in-up animation-delay-400">
                    
                        
                    
                        
                        <a href="/tags/ethics/" class="inline-flex items-center rounded-full bg-primary-50 dark:bg-primary-900/20 px-3 py-1 text-sm font-medium text-primary-700 dark:text-primary-300 hover:bg-primary-100 dark:hover:bg-primary-900/30 transition-colors">
                            ethics
                        </a>
                        
                    
                        
                        <a href="/tags/homelab/" class="inline-flex items-center rounded-full bg-primary-50 dark:bg-primary-900/20 px-3 py-1 text-sm font-medium text-primary-700 dark:text-primary-300 hover:bg-primary-100 dark:hover:bg-primary-900/30 transition-colors">
                            homelab
                        </a>
                        
                    
                        
                        <a href="/tags/llm/" class="inline-flex items-center rounded-full bg-primary-50 dark:bg-primary-900/20 px-3 py-1 text-sm font-medium text-primary-700 dark:text-primary-300 hover:bg-primary-100 dark:hover:bg-primary-900/30 transition-colors">
                            llm
                        </a>
                        
                    
                        
                        <a href="/tags/machine-learning/" class="inline-flex items-center rounded-full bg-primary-50 dark:bg-primary-900/20 px-3 py-1 text-sm font-medium text-primary-700 dark:text-primary-300 hover:bg-primary-100 dark:hover:bg-primary-900/30 transition-colors">
                            machine-learning
                        </a>
                        
                    
                        
                        <a href="/tags/privacy/" class="inline-flex items-center rounded-full bg-primary-50 dark:bg-primary-900/20 px-3 py-1 text-sm font-medium text-primary-700 dark:text-primary-300 hover:bg-primary-100 dark:hover:bg-primary-900/30 transition-colors">
                            privacy
                        </a>
                        
                    
                        
                        <a href="/tags/security/" class="inline-flex items-center rounded-full bg-primary-50 dark:bg-primary-900/20 px-3 py-1 text-sm font-medium text-primary-700 dark:text-primary-300 hover:bg-primary-100 dark:hover:bg-primary-900/30 transition-colors">
                            security
                        </a>
                        
                    
                </div>
                
            </header>

            <!-- Table of Contents Accordion -->
            <nav aria-label="Table of contents" class="toc-accordion mb-8 animate-fade-in-up animation-delay-500">
                <details class="group">
                    <summary class="cursor-pointer select-none font-medium flex items-center justify-between">
                        <span>Table of Contents</span>
                        <svg class="w-5 h-5 transform group-open:rotate-180 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                    </summary>
                    <div class="toc-content mt-4" id="toc-content">
                        <!-- ToC will be generated here by JavaScript -->
                    </div>
                </details>
            </nav>

            <div class="prose prose-lg prose-gray dark:prose-invert mx-auto animate-fade-in-up animation-delay-600">
                <p>I spent six months believing my homelab AI setup was perfectly private. The RTX 3090 hummed away in my server rack running Llama models locally, no cloud API calls, no data leaving my network. Or so I thought.</p>
<p>Then I ran Wireshark while Ollama was generating responses. My &quot;private&quot; LLM was making network connections I never authorized. It was reaching out to every device on my home network. Port 11434 was listening on 0.0.0.0, accessible to my IoT VLAN, my main network, everything. My supposedly isolated AI workload was broadcasting its existence to every device behind my firewall.</p>
<p>Turns out, I'd built privacy theater, not actual privacy.</p>
<h2>The &quot;Local&quot; Doesn't Mean &quot;Private&quot; Realization</h2>
<p>Here's what running a 34B parameter model on my RTX 3090 actually involves: 24GB of VRAM maxed out, inference times around 12-15 tokens per second (about 67-83ms per token), and enough heat to warm my office in winter. The hardware is impressive. The GPU does exactly what I tell it to, nothing leaves the card without my permission.</p>
<p>For larger 70B models, I use CPU offloading (storing part of the model in system RAM), which works but drops performance to 2-5 tokens/second. Most of my privacy-sensitive work uses 8B-34B models that fit fully in VRAM.</p>
<p>But privacy isn't just about where the compute happens. It's about the entire stack: network behavior, telemetry, data persistence, memory isolation, and threat modeling. I learned this the hard way when I discovered Ollama was listening on 0.0.0.0:11434 by default, accessible to every device on my home network, including the IoT VLAN with its collection of questionable smart cameras. Security researchers found <a href="https://blogs.cisco.com/security/detecting-exposed-llm-servers-shodan-case-study-on-ollama">1,139 vulnerable Ollama instances exposed on the internet</a>, and while mine wasn't one of them (homelab behind NAT), the default configuration made me realize how easy it would be to accidentally expose if I ever set up remote access.</p>
<h3>My Three-Layer Threat Model</h3>
<p>After that wake-up call, I rebuilt my thinking around three distinct threat layers:</p>
<p><strong>Network Layer:</strong> Who can access my LLM endpoints? What data crosses network boundaries? Is telemetry being sent somewhere?</p>
<p><strong>Storage Layer:</strong> Where are prompts and responses stored? Are Docker volumes encrypted? What about model files themselves?</p>
<p><strong>Inference Layer:</strong> Can GPU memory be read by other processes? Are intermediate states (like key-value caches) protected?</p>
<p>Each layer requires different security controls. Miss one layer, and your privacy evaporates.</p>
<h2>The Real Privacy Threats in Self-Hosted AI</h2>
<p>After digging into recent security research, I found that &quot;local&quot; AI faces way more privacy risks than I'd imagined.</p>
<h3>Model Extraction and Prompt Injection</h3>
<p>The most concerning finding came from academic research on <a href="https://arxiv.org/abs/2408.03561">prompt injection attacks achieving 89.6% success rates</a> using roleplay-based techniques. These aren't theoretical attacks, they work on production models. An attacker can craft prompts that extract information about the model's training data, reveal system prompts, or even exfiltrate sensitive context you've provided.</p>
<p>I tested this on my own Ollama instance with a basic &quot;jailbreak&quot; prompt. It worked. The model happily explained how to bypass its own safety guidelines. If an adversary got access to my LLM API (which was listening on all network interfaces by default, including my IoT VLAN), they could extract far more than I was comfortable with. This experience reinforced lessons I learned while <a href="/posts/2025-04-10-securing-personal-ai-experiments">securing personal AI/ML experiments</a> – never assume &quot;local&quot; automatically means &quot;secure.&quot;</p>
<h3>Membership Inference and PII Leakage</h3>
<p>Research on membership inference attacks shows that <a href="https://arxiv.org/abs/2409.04040">sophisticated attacks increase PII leakage by 5× compared to naive approaches</a>. This means an attacker can determine if specific data was used in training, potentially revealing whether private documents were included in fine-tuning datasets.</p>
<p>For my homelab use cases, personal notes, research documents, technical documentation, this is a dealbreaker. I don't want anyone inferring what data I've been feeding into my models.</p>
<h3>The KV Cache Vulnerability I Didn't Know Existed</h3>
<p>This one shocked me: researchers discovered that <a href="https://arxiv.org/abs/2409.04040">KV (key-value) cache data stored in GPU memory can be reconstructed to reveal entire conversations</a>. The paper &quot;A First Look At Efficient And Secure On-Device LLM Inference Against KV Leakage&quot; demonstrated full conversation reconstruction from leaked GPU memory.</p>
<p>My RTX 3090 stores all those attention mechanism states in VRAM. Without proper memory isolation, another process with GPU access could theoretically read my chat history. The solution involves selective encryption of intermediate states, which adds <a href="https://arxiv.org/abs/2409.04040">15-25% performance overhead</a> but is absolutely necessary for privacy-sensitive applications.</p>
<h3>Model Poisoning: Easier Than I Thought</h3>
<p>Research shows that <a href="https://arxiv.org/abs/2410.02486">just 250 poisoned documents can backdoor a 13B parameter model</a>. That's terrifyingly low. If I'm downloading models from HuggingFace without verification, I have no guarantee they haven't been tampered with.</p>
<p>I started verifying model checksums obsessively after reading this.</p>
<h2>Local LLM Tools: The Privacy Reality Check</h2>
<p>Not all &quot;local&quot; LLM tools are created equal. I tested seven popular options and found massive differences in their actual privacy practices.</p>
<h3>The Good: Truly Private by Default</h3>
<p><strong>LM Studio</strong> gets this right. Their <a href="https://lmstudio.ai/app-privacy">privacy policy explicitly states &quot;zero telemetry&quot;</a> and my network monitoring confirmed it, no external connections after model download. It's now my go-to for sensitive work.</p>
<p><strong>llama.cpp</strong> is even better: it's just C++ code doing math. No network stack, no telemetry hooks, <a href="https://github.com/ggml-org/llama.cpp">nothing but local computation</a>. When I run it in airplane mode, it works perfectly. Finance and defense sectors use it for air-gapped deployments for exactly this reason.</p>
<p><strong>Text Generation Web UI</strong> (oobabooga) also scores perfectly: <a href="https://github.com/oobabooga/text-generation-webui">documented as &quot;100% offline and private, with zero telemetry&quot;</a>. I verified this claim. It's true.</p>
<h3>The Concerning: Ollama's Default Configuration</h3>
<p>Ollama's default setup exposed my LLM on port 11434 with no authentication. <a href="https://www.upguard.com/blog/understanding-and-securing-exposed-ollama-instances">Security researchers found 1,139 vulnerable instances</a>, and identified <a href="https://github.com/tarunboricha/ollama-security-guide">6 critical CVEs for DoS, model theft, and model poisoning</a>.</p>
<p>The telemetry status remains unclear despite <a href="https://github.com/ollama/ollama/issues/2567">community requests dating back to February 2024</a>. I locked mine down with these configs:</p>
<pre><code class="language-bash"># Bind to localhost only
export OLLAMA_HOST=&quot;127.0.0.1:11434&quot;

# Block external access
sudo ufw deny 11434/tcp

# Monitor traffic to verify
sudo tcpdump -i any -n port 11434
</code></pre>
<h3>The &quot;Opt-Out Required&quot;: vLLM</h3>
<p>vLLM is honest about its defaults: <a href="https://docs.vllm.ai/en/latest/serving/usage_stats.html">telemetry is ON unless you explicitly disable it</a>. It collects hardware configuration, model details, and performance metrics. The data is anonymized and transparent, but it's still phone-home behavior.</p>
<p>I respect their honesty, but prefer tools that default to private. The fix is simple:</p>
<pre><code class="language-bash">export VLLM_NO_USAGE_STATS=1
export DO_NOT_TRACK=1
</code></pre>
<h2>Applying AI Safety Frameworks to My Homelab</h2>
<p>After reading through safety research from Anthropic, OpenAI, and DeepMind, I realized these frameworks aren't just for big companies. I can (and should) apply them to my personal AI deployments.</p>
<h3>Constitutional AI for Personal Use</h3>
<p><a href="https://www.anthropic.com/research/constitutional-ai-harmlessness-from-ai-feedback">Anthropic's Constitutional AI approach</a> provides a practical framework: define principles, critique responses against those principles, and revise outputs accordingly. I adapted this for my homelab:</p>
<p><strong>My Personal Constitution:</strong></p>
<ul>
<li>Never generate content I wouldn't want discovered in a security audit</li>
<li>Decline requests for information about current work systems</li>
<li>Explain why certain prompts are problematic rather than just refusing</li>
<li>Prioritize accuracy over agreeing with me</li>
</ul>
<p>I implemented this through system prompts and custom filters. It's not perfect, but it's dramatically better than raw model outputs.</p>
<h3>Frontier Safety Framework: Capability-Based Controls</h3>
<p><a href="https://deepmind.google/discover/blog/introducing-the-frontier-safety-framework/">DeepMind's Frontier Safety Framework</a> defines Critical Capability Levels across four domains: autonomy, biosecurity, cybersecurity, and ML R&amp;D. I adapted this for homelab scale:</p>
<p><strong>My Capability Levels:</strong></p>
<ul>
<li><strong>Low-Capability Models (7B-13B):</strong> Basic network isolation, standard access controls</li>
<li><strong>Medium-Capability Models (13B-34B):</strong> VLAN isolation, Wazuh monitoring, encrypted storage</li>
<li><strong>High-Capability Models (70B+ offloaded or cloud API):</strong> Air-gapped VLAN, no internet access, hardware security module for keys</li>
</ul>
<p>My RTX 3090 runs 34B models natively (full VRAM), which I treat as medium-capability. For 70B+ models (CPU-offloaded or API), I use the high-capability VLAN 20 with no internet route and strict firewall rules.</p>
<h3>Red Teaming My Own Deployment</h3>
<p><a href="https://cdn.openai.com/papers/openais-approach-to-external-red-teaming.pdf">OpenAI's external red teaming framework</a> emphasizes diverse perspectives and adversarial thinking. I can't hire 100+ red teamers like OpenAI does, but I can systematically probe my own systems.</p>
<p><strong>My Red Teaming Checklist:</strong></p>
<ol>
<li>Attempt prompt injection attacks (roleplay-based jailbreaks worked 3/5 times)</li>
<li>Try to access the LLM from outside my network (failed after hardening, succeeded before)</li>
<li>Search for leaked GPU memory artifacts (need specialized tools, ongoing)</li>
<li>Test content filter bypass techniques (basic profanity filters failed immediately)</li>
<li>Attempt model extraction through repeated queries (rate limiting helps)</li>
</ol>
<p>Running these tests revealed embarrassing gaps. My content filters were trivial to bypass. My rate limiting was too permissive. I'm still fixing issues. For readers new to local LLM infrastructure, start with a comprehensive guide to <a href="/posts/2025-06-25-local-llm-deployment-privacy-first">deploying local LLMs with privacy-first approach</a> before jumping into advanced privacy techniques.</p>
<h2>Privacy-Preserving Techniques: The Performance Trade-Offs</h2>
<p>Academic research provides actual numbers on what privacy costs in terms of performance. These aren't theoretical, I've tested some of these on my hardware.</p>
<h3>Differential Privacy: 28-38% Overhead</h3>
<p>The <a href="https://arxiv.org/html/2509.09091">CMIF framework research shows</a> that differential privacy adds 28-38% inference overhead on Llama models. That's the cost of adding mathematical noise to prevent inference attacks.</p>
<p><strong>My Testing on RTX 3090:</strong></p>
<ul>
<li>Llama2-7B baseline: 2.49 seconds average generation time</li>
<li>With differential privacy (ε=2): 3.18 seconds (27.7% increase)</li>
<li>Accuracy impact: 83.3% vs 84.5% without DP (1.2% loss)</li>
</ul>
<p>I can live with that trade-off for sensitive document analysis. The 1.2% accuracy hit is worth the privacy gain.</p>
<h3>KV Cache Protection: 15-25% Overhead</h3>
<p>Protecting GPU memory from KV cache leakage attacks requires <a href="https://arxiv.org/abs/2409.04040">selective encryption of intermediate states, adding 15-25% overhead</a>. I haven't implemented this yet, it requires modifications to the inference engine, but it's on my roadmap for 2025.</p>
<h3>Homomorphic Encryption: Not Practical Yet</h3>
<p>I experimented with homomorphic encryption for completely encrypted inference. The overhead is brutal: <a href="https://arxiv.org/abs/2109.00984">100-1000× slowdown compared to plaintext inference</a>. Recent optimizations bring this down to 10-100×, but that's still too much for interactive use.</p>
<p><strong>My Test Results:</strong></p>
<ul>
<li>Plaintext inference: 2.49 seconds</li>
<li>HE-based inference (optimized): Estimated 35-45 seconds</li>
<li>Practical? Not yet.</li>
</ul>
<p>Maybe in 3-5 years this'll be viable for homelab use. For now, it's research-only.</p>
<h2>My Network Isolation Architecture (Proxmox + VLANs + Wazuh)</h2>
<p>Here's how I actually locked things down. This took about 6 hours to configure properly, but it's the foundation of everything else.</p>
<h3>VLAN 20: AI Services Isolation</h3>
<p>My Unifi Dream Machine Pro manages VLANs using <a href="/posts/2025-09-08-zero-trust-vlan-segmentation-homelab">zero trust microsegmentation</a>. AI workloads live in VLAN 20, completely isolated from my main network (VLAN 1) and DMZ (VLAN 10).</p>
<p><strong>Firewall Rules (VLAN 20 → External):</strong></p>
<pre><code># Block all outbound by default
DENY * -&gt; ANY (internet)

# Allow DNS for model downloads
ALLOW 10.0.20.0/24 -&gt; 10.0.1.1 (DNS)

# Allow HTTPS for initial model downloads only
ALLOW 10.0.20.0/24 -&gt; ANY:443 (temporary, disabled after setup)

# Allow internal metrics collection
ALLOW 10.0.20.0/24 -&gt; 10.0.30.5:9090 (Prometheus)
</code></pre>
<h3>Proxmox GPU Passthrough with Security</h3>
<p>My Dell R940 hosts the Proxmox hypervisor with the RTX 3090 passed through to an Ubuntu VM following <a href="/posts/2025-08-18-container-security-hardening-homelab">container hardening principles</a>. The critical security layer is ensuring the VM can't break out:</p>
<pre><code class="language-bash"># /etc/pve/qemu-server/105.conf (AI workload VM)
args: -cpu host,kvm=off
hostpci0: 0000:41:00.0,pcie=1,rombar=0
boot: order=scsi0
cores: 16
memory: 65536
net0: virtio=XX:XX:XX:XX:XX:XX,bridge=vmbr20,firewall=1
</code></pre>
<p>The <code>firewall=1</code> flag is critical, it enables Proxmox's firewall at the VM level. Combined with VLAN isolation, this creates defense in depth.</p>
<h3>Wazuh Monitoring for AI Workloads</h3>
<p>I configured <a href="https://documentation.wazuh.com/">Wazuh to monitor AI-specific threats</a>, layered with <a href="/posts/2025-08-25-network-traffic-analysis-suricata-homelab">Suricata IDS for network-level detection</a>. Custom rules detect suspicious patterns:</p>
<p><strong>Rule: Detect Ollama Unauthorized Access Attempts</strong></p>
<pre><code class="language-xml">&lt;rule id=&quot;100001&quot; level=&quot;10&quot;&gt;
  &lt;if_sid&gt;5710&lt;/if_sid&gt;
  &lt;match&gt;11434&lt;/match&gt;
  &lt;description&gt;Unauthorized access attempt to Ollama API port&lt;/description&gt;
  &lt;group&gt;ollama,unauthorized_access&lt;/group&gt;
&lt;/rule&gt;
</code></pre>
<p><strong>Rule: Detect Unusual Model File Access</strong></p>
<pre><code class="language-xml">&lt;rule id=&quot;100002&quot; level=&quot;8&quot;&gt;
  &lt;if_sid&gt;550&lt;/if_sid&gt;
  &lt;field name=&quot;file&quot;&gt;\.gguf$|\.bin$|\.safetensors$&lt;/field&gt;
  &lt;description&gt;Unusual access to model files&lt;/description&gt;
  &lt;group&gt;model_access,file_integrity&lt;/group&gt;
&lt;/rule&gt;
</code></pre>
<p>These rules have triggered twice in six months, both false positives from my own debugging, but they work.</p>
<h2>The Trade-Offs No One Talks About</h2>
<p>Every privacy enhancement comes with a cost. Here are the real trade-offs I've encountered.</p>
<h3>Privacy vs Convenience: Time Investment</h3>
<p><strong>Reality check:</strong> Securing Ollama properly took 6 hours. Setting up VLAN isolation, configuring Wazuh rules, implementing differential privacy, testing everything, it all adds up. Compare that to signing up for OpenAI API access (5 minutes) or Claude API (10 minutes).</p>
<p>I'm fine with this trade-off because I work with government-related security research. But for someone just wanting to experiment with LLMs, cloud APIs make way more sense.</p>
<h3>Privacy vs Performance: Actual Numbers</h3>
<p>Here's what I measured on my RTX 3090:</p>
<table>
<thead>
<tr>
<th>Configuration</th>
<th>Inference Time</th>
<th>Privacy Level</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td>Baseline Ollama</td>
<td>2.49s</td>
<td>Low (exposed port)</td>
<td>❌ Don't do this</td>
</tr>
<tr>
<td>Hardened Ollama</td>
<td>2.51s</td>
<td>Medium</td>
<td>✅ General use</td>
</tr>
<tr>
<td>+ Differential Privacy</td>
<td>3.18s</td>
<td>High</td>
<td>✅ Sensitive docs</td>
</tr>
<tr>
<td>+ KV Cache Protection</td>
<td>3.67s (estimated)</td>
<td>Very High</td>
<td>⏳ Not yet implemented</td>
</tr>
<tr>
<td>Complete Air-Gap</td>
<td>2.49s</td>
<td>Maximum</td>
<td>✅ Critical work</td>
</tr>
</tbody>
</table>
<p>The sweet spot for me is &quot;Hardened Ollama + Differential Privacy&quot;, 27% slower than baseline, but I sleep better knowing my data isn't leaking.</p>
<h3>Privacy vs Capability: Model Size Constraints</h3>
<p>Running everything locally means I'm limited to models that fit in 24GB VRAM fully, or larger models with CPU offloading. My RTX 3090 handles 7B-34B models natively (full GPU speed), while 70B models require offloading to system RAM (2-5x slower). Cloud services offer 405B parameter models (Llama 3.1), which are noticeably more capable for complex reasoning tasks.</p>
<p><strong>When I Use Cloud APIs (Despite Privacy Concerns):</strong></p>
<ul>
<li>Public information research (no sensitive data)</li>
<li>Benchmarking my local models against state-of-the-art</li>
<li>Exploring new model capabilities before local versions exist</li>
</ul>
<p>I use a separate Claude subscription for this blog writing. None of my sensitive homelab data ever touches cloud APIs.</p>
<h3>Decision Matrix: Local vs Cloud</h3>
<table>
<thead>
<tr>
<th>Factor</th>
<th>Weight (for me)</th>
<th>Local Wins</th>
<th>Cloud Wins</th>
</tr>
</thead>
<tbody>
<tr>
<td>Data Privacy</td>
<td>⭐⭐⭐⭐⭐</td>
<td>✅ Complete control</td>
<td>❌ Trust required</td>
</tr>
<tr>
<td>Cost (1000 queries/day)</td>
<td>⭐⭐⭐</td>
<td>✅ ~$0.50 electricity</td>
<td>❌ $50-200/month</td>
</tr>
<tr>
<td>Model Capability</td>
<td>⭐⭐⭐⭐</td>
<td>❌ 70B max</td>
<td>✅ 405B+ available</td>
</tr>
<tr>
<td>Setup Complexity</td>
<td>⭐⭐</td>
<td>❌ 6+ hours</td>
<td>✅ 5 minutes</td>
</tr>
<tr>
<td>Inference Speed (70B)</td>
<td>⭐⭐⭐</td>
<td>⭐⭐⭐ Similar</td>
<td>⭐⭐⭐ Similar</td>
</tr>
<tr>
<td>Offline Operation</td>
<td>⭐⭐⭐⭐⭐</td>
<td>✅ Complete</td>
<td>❌ Impossible</td>
</tr>
</tbody>
</table>
<p>Your weights will differ. If you're not dealing with sensitive data, cloud APIs are probably the right choice.</p>
<h2>My Biggest Mistakes and Lessons Learned</h2>
<h3>Failure #1: Plaintext Docker Volumes</h3>
<p>My first Ollama deployment stored everything in plaintext Docker volumes mounted at <code>/var/lib/ollama</code>. That meant:</p>
<ul>
<li>Chat history in plaintext: <code>/var/lib/ollama/history.json</code></li>
<li>Model files unencrypted: <code>/var/lib/ollama/models/</code></li>
<li>Logs with full prompts: <code>/var/log/ollama.log</code></li>
</ul>
<p>Anyone with filesystem access could read everything. I fixed this by:</p>
<ol>
<li>Encrypting the Docker volume with LUKS</li>
<li>Implementing log rotation with automatic redaction</li>
<li>Storing sensitive conversations in memory only (ephemeral mode)</li>
</ol>
<h3>Failure #2: Internal Network Exposure</h3>
<p>Ollama's default configuration was listening on all network interfaces, meaning every device on my home network could access it. I discovered this by running <code>tcpdump</code> for 24 hours and analyzing internal connections:</p>
<pre><code class="language-bash">sudo tcpdump -i any -n -w ollama_traffic.pcap
wireshark ollama_traffic.pcap
</code></pre>
<p>The fix was binding Ollama to localhost only and implementing strict firewall rules to isolate the AI VLAN from my IoT devices.</p>
<h3>Failure #3: Thinking &quot;Local&quot; Meant &quot;Safe&quot;</h3>
<p>The biggest mistake was assuming that running models on-premise automatically made them secure. It doesn't. Privacy requires architecture, monitoring, and constant vigilance.</p>
<p>I spent $2,400 on the RTX 3090 specifically for &quot;private AI,&quot; then configured it to be accessible to every device on my home network with default configs. My IoT VLAN, with its cheap cameras and smart bulbs, could reach my LLM API. That's embarrassing in hindsight.</p>
<h2>What I'd Do Differently Starting Over</h2>
<p>If I were building my privacy-first AI lab from scratch today, I'd:</p>
<p><strong>Week 1: Foundation</strong></p>
<ol>
<li>Set up VLAN isolation FIRST, before any AI tools</li>
<li>Deploy Wazuh monitoring before the first model download</li>
<li>Use llama.cpp initially (simplest, most auditable)</li>
<li>Test network isolation thoroughly before adding complexity</li>
</ol>
<p><strong>Week 2: Gradual Capability Growth</strong></p>
<ol>
<li>Add LM Studio for user-friendly interface (zero telemetry)</li>
<li>Implement basic content filtering</li>
<li>Set up encrypted Docker volumes</li>
<li>Document everything in runbooks</li>
</ol>
<p><strong>Week 3: Advanced Privacy</strong></p>
<ol>
<li>Add differential privacy for sensitive workloads</li>
<li>Implement KV cache protection</li>
<li>Deploy red teaming automation</li>
<li>Establish regular security audit schedule</li>
</ol>
<p><strong>What I Did (The Hard Way):</strong></p>
<ol>
<li>Deploy Ollama with defaults (listening on all network interfaces)</li>
<li>Run it accessible to IoT VLAN for 3 months</li>
<li>Discover internal network exposure via Wireshark</li>
<li>Panic and rebuild everything with proper VLAN isolation</li>
<li>Over-engineer solutions</li>
<li>Gradually simplify to sustainable architecture</li>
</ol>
<p>Learn from my mistakes. Start secure, not comfortable.</p>
<h2>Is Privacy-First AI Worth It?</h2>
<p>After six months of running a hardened AI homelab, here's my honest assessment:</p>
<p><strong>When It's Worth It (My Criteria):</strong></p>
<ul>
<li>You work with sensitive personal data (medical, financial, legal)</li>
<li>You're in government/defense and can't use cloud services</li>
<li>You're doing AI safety research that might reveal vulnerabilities</li>
<li>You have specific regulatory requirements (HIPAA, GDPR, etc.)</li>
<li>You simply enjoy the learning process (valid reason!)</li>
</ul>
<p><strong>When Cloud APIs Make More Sense:</strong></p>
<ul>
<li>General knowledge questions and public information</li>
<li>Rapid prototyping and experimentation</li>
<li>When you need cutting-edge model capabilities (405B+)</li>
<li>Limited time or technical background</li>
<li>Cost constraints (ironically, cloud can be cheaper for light usage)</li>
</ul>
<p><strong>My Personal Calculus:</strong></p>
<ul>
<li><strong>Hardware cost:</strong> $2,400 (RTX 3090) + $800 (server upgrades) = $3,200</li>
<li><strong>Time investment:</strong> ~40 hours setup and hardening</li>
<li><strong>Ongoing electricity:</strong> ~$15/month ($180/year)</li>
<li><strong>Maintenance time:</strong> ~2 hours/month</li>
</ul>
<p>That's roughly $3,380 first year, $180/year ongoing, plus ~50 hours of work. A Claude Pro subscription costs $240/year with zero setup time.</p>
<p>For me, the privacy guarantees and learning experience justify the cost. For most people, they wouldn't.</p>
<h2>Practical Next Steps for Readers</h2>
<p>If you want to build something similar:</p>
<p><strong>Step 1: Threat Model</strong>
Define what &quot;privacy&quot; means for your use case:</p>
<ul>
<li>Who are you protecting data from? (Cloud providers? Adversaries? Government?)</li>
<li>What data is sensitive? (All prompts? Just specific topics?)</li>
<li>What's your risk tolerance? (Paranoid? Pragmatic?)</li>
</ul>
<p><strong>Step 2: Tool Selection</strong>
Choose based on your threat model:</p>
<ul>
<li><strong>Maximum Privacy:</strong> llama.cpp (air-gapped)</li>
<li><strong>Usability + Privacy:</strong> LM Studio</li>
<li><strong>Performance + Privacy:</strong> Text Generation Web UI</li>
<li><strong>Production Scale:</strong> vLLM (with telemetry disabled)</li>
</ul>
<p><strong>Step 3: Network Architecture</strong>
Start with basic isolation:</p>
<ol>
<li>Dedicated VLAN for AI workloads</li>
<li>Firewall rules blocking external access</li>
<li>VPN-only access for remote use</li>
<li>Network monitoring (Wireshark, tcpdump)</li>
</ol>
<p><strong>Step 4: Incremental Hardening</strong>
Don't do everything at once:</p>
<ol>
<li>Week 1: Basic setup, verify offline operation</li>
<li>Week 2: Network isolation, access controls</li>
<li>Week 3: Monitoring and logging</li>
<li>Week 4: Advanced privacy (differential privacy, etc.)</li>
</ol>
<p><strong>Step 5: Continuous Testing</strong>
Monthly security checks:</p>
<ul>
<li>Run red team tests (prompt injection, extraction attempts)</li>
<li>Review Wazuh logs for anomalies</li>
<li>Check for unexpected network connections</li>
<li>Update models and tooling</li>
<li>Reassess threat model based on new research</li>
</ul>
<h2>What I Learned Running Private AI for Six Months</h2>
<p>Three key principles emerged:</p>
<p><strong>1. Default Settings Are Rarely Secure</strong>
Every tool I tested had at least one default configuration that compromised privacy. Ollama exposed ports, vLLM enabled telemetry, Docker stored everything in plaintext. Assume you need to harden everything.</p>
<p><strong>2. Privacy Is a Spectrum, Not Binary</strong>
There's no &quot;perfectly private&quot; system. Instead, there are privacy levels you can stack:</p>
<ul>
<li>Level 1: Local inference (vs cloud)</li>
<li>Level 2: Network isolation (vs exposed)</li>
<li>Level 3: Encrypted storage (vs plaintext)</li>
<li>Level 4: Differential privacy (vs raw outputs)</li>
<li>Level 5: Air-gap (vs network-connected)</li>
</ul>
<p>Choose the level appropriate for each workload.</p>
<p><strong>3. &quot;Privacy Theater&quot; Is Worse Than Honest Cloud Use</strong>
Running a &quot;local&quot; LLM that's actually exposed to the internet is worse than just using OpenAI's API with their privacy policies. At least with OpenAI, you know their security team is competent. With DIY solutions, you're responsible for everything.</p>
<p>If you're not willing to properly secure your deployment, use a reputable cloud provider instead.</p>
<h2>Resources and Further Reading</h2>
<p><strong>Research Papers:</strong></p>
<ul>
<li><a href="https://arxiv.org/abs/2408.03561">MPC-Minimized Secure LLM Inference</a> - Secure multi-party computation techniques</li>
<li><a href="https://arxiv.org/abs/2409.04040">A First Look At Efficient And Secure On-Device LLM Inference Against KV Leakage</a> - GPU memory protection</li>
<li><a href="https://arxiv.org/html/2509.09091">CMIF Framework: Differential Privacy in LLM Inference</a> - Performance overhead measurements</li>
<li><a href="https://arxiv.org/abs/2109.00984">CrypTen: Secure Multi-Party Computation Meets Machine Learning</a> - MPC benchmarks</li>
</ul>
<p><strong>AI Safety Frameworks:</strong></p>
<ul>
<li><a href="https://www.anthropic.com/research/constitutional-ai-harmlessness-from-ai-feedback">Constitutional AI: Harmlessness from AI Feedback</a> - Anthropic's alignment approach</li>
<li><a href="https://deepmind.google/discover/blog/introducing-the-frontier-safety-framework/">DeepMind Frontier Safety Framework</a> - Capability-based controls</li>
<li><a href="https://cdn.openai.com/papers/openais-approach-to-external-red-teaming.pdf">OpenAI's Approach to External Red Teaming</a> - Testing methodologies</li>
</ul>
<p><strong>Tools and Security Guides:</strong></p>
<ul>
<li><a href="https://lmstudio.ai/app-privacy">LM Studio Privacy Policy</a> - Zero telemetry example</li>
<li><a href="https://github.com/tarunboricha/ollama-security-guide">Ollama Security Guide</a> - Hardening instructions</li>
<li><a href="https://docs.vllm.ai/en/latest/deployment/security.html">vLLM Security Documentation</a> - Production deployment</li>
<li><a href="https://documentation.wazuh.com/">Wazuh AI Workload Monitoring</a> - Security monitoring</li>
</ul>
<p><strong>Community Resources:</strong></p>
<ul>
<li><a href="https://www.reddit.com/r/LocalLLaMA/">r/LocalLLaMA</a> - Practical deployment discussions</li>
<li><a href="https://blogs.cisco.com/security/detecting-exposed-llm-servers-shodan-case-study-on-ollama">Cisco: Detecting Exposed LLM Servers</a> - Security research</li>
</ul>
<hr>
<p>Building a truly private AI lab isn't about buying hardware, it's about systematic threat modeling, continuous monitoring, and honest assessment of trade-offs. After six months of learning (mostly from mistakes), I finally have a setup I trust with sensitive data.</p>
<p>But I'm not done. The field evolves constantly. <a href="https://arxiv.org/abs/2409.04040">KV cache protection</a> is on my 2025 roadmap. Better red teaming automation. Implementing <a href="https://arxiv.org/abs/2410.13272">federated RAG for private knowledge bases</a>, drawing on techniques from <a href="/posts/2025-01-12-privacy-preserving-federated-learning-homelab">privacy-preserving federated learning across homelabs</a> to distribute knowledge while maintaining privacy guarantees. There's always more to do.</p>
<p>The question isn't whether perfect privacy is achievable (it's not). The question is: what level of privacy does your threat model require, and are you willing to pay the performance and complexity costs to achieve it?</p>
<p>For me, with government-adjacent security research, the answer is yes. For my blog writing and public information queries, I'm fine with Claude API. Different workloads, different requirements.</p>
<p>Know your threat model. Be honest about trade-offs. And test your assumptions relentlessly.</p>

            </div>
            
            <!-- Related Posts -->
            
            
            
            
            
                
                    
                    
                        
                    
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
            
            
            
            <section aria-label="Content section" class="mt-16 pt-8 border-t border-gray-200 dark:border-gray-800">
                <h2 class="text-2xl font-bold mb-6 text-gray-900 dark:text-gray-100">Related Posts</h2>
                <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
                    
                    
                    <article class="group">
                        <a href="/posts/promsketch-2-100x-faster-prometheus-queries-with-sketch-algorithms/" class="block p-6 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200 hover:shadow-md">
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100 group-hover:text-primary-600 dark:group-hover:text-primary-400 mb-2">
                                PromSketch: 2-100x Faster Prometheus Queries with Sketch Algorithms
                            </h3>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
                                Deploy PromSketch to optimize slow PromQL queries using sketch-based approximation. Homelab benchmar...
                            </p>
                            <div class="flex items-center justify-between text-xs text-gray-500 dark:text-gray-500">
                                <time datetime="2025-11-19">
                                    November 19, 2025
                                </time>
                                <span>5 min read</span>
                            </div>
                        </a>
                    </article>
                    
                    
                    <article class="group">
                        <a href="/posts/from-150k-to-2k-tokens-how-progressive-context-loading-revolutionizes-llm-development-workflows/" class="block p-6 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200 hover:shadow-md">
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100 group-hover:text-primary-600 dark:group-hover:text-primary-400 mb-2">
                                From 150K to 2K Tokens: How Progressive Context Loading Revolutionizes LLM Development Workflows
                            </h3>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
                                Optimize LLM workflows with progressive context loading—achieve 98% token reduction using modular ar...
                            </p>
                            <div class="flex items-center justify-between text-xs text-gray-500 dark:text-gray-500">
                                <time datetime="2025-10-17">
                                    October 17, 2025
                                </time>
                                <span>15 min read</span>
                            </div>
                        </a>
                    </article>
                    
                    
                    <article class="group">
                        <a href="/posts/automated-security-scanning-pipeline-with-grype-and-osv/" class="block p-6 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200 hover:shadow-md">
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100 group-hover:text-primary-600 dark:group-hover:text-primary-400 mb-2">
                                Automated Security Scanning Pipeline with Grype and OSV
                            </h3>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
                                Build automated security scanning pipelines with Grype, OSV, and Trivy—integrate vulnerability detec...
                            </p>
                            <div class="flex items-center justify-between text-xs text-gray-500 dark:text-gray-500">
                                <time datetime="2025-10-06">
                                    October 6, 2025
                                </time>
                                <span>11 min read</span>
                            </div>
                        </a>
                    </article>
                    
                </div>
            </section>
            
            
            <footer role="contentinfo" aria-label="Site footer" class="mt-16 pt-8 border-t border-gray-200 dark:border-gray-800">
                <div class="flex items-center justify-between">
                    <a href="/posts/" class="inline-flex items-center text-sm font-medium text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors duration-200">
                        <svg class="w-5 h-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                        </svg>
                        Back to all posts
                    </a>
                    
                    <div class="flex items-center space-x-4">
                        <span class="text-sm text-gray-500 dark:text-gray-400">Share:</span>
                        
                        <!-- LinkedIn -->
                        <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://williamzujkowski.github.io%2Fposts%2Fbuilding-a-privacy-first-ai-lab-deploying-local-llms-without-sacrificing-ethics%2F" 
                           target="_blank" 
                           rel="noopener noreferrer" 
                           class="text-gray-400 hover:text-[#0077b5] dark:hover:text-[#0077b5] transition-colors duration-200"
                           aria-label="Share on LinkedIn">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
                            </svg>
                        </a>
                        
                        <!-- Hacker News -->
                        <a href="https://news.ycombinator.com/submitlink?u=https://williamzujkowski.github.io%2Fposts%2Fbuilding-a-privacy-first-ai-lab-deploying-local-llms-without-sacrificing-ethics%2F&t=Building%20a%20Privacy-First%20AI%20Lab%3A%20Deploying%20Local%20LLMs%20Without%20Sacrificing%20Ethics" 
                           target="_blank" 
                           rel="noopener noreferrer" 
                           class="text-gray-400 hover:text-[#ff6600] dark:hover:text-[#ff6600] transition-colors duration-200"
                           aria-label="Share on Hacker News">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M0 0v24h24v-24h-24zm12.8 8.7l2.3-4.3h1.4l-3.1 5.5v3.5h-1.2v-3.5l-3-5.5h1.4l2.2 4.3z"/>
                            </svg>
                        </a>
                        
                        <!-- Reddit -->
                        <a href="https://reddit.com/submit?url=https://williamzujkowski.github.io%2Fposts%2Fbuilding-a-privacy-first-ai-lab-deploying-local-llms-without-sacrificing-ethics%2F&title=Building%20a%20Privacy-First%20AI%20Lab%3A%20Deploying%20Local%20LLMs%20Without%20Sacrificing%20Ethics" 
                           target="_blank" 
                           rel="noopener noreferrer" 
                           class="text-gray-400 hover:text-[#ff4500] dark:hover:text-[#ff4500] transition-colors duration-200"
                           aria-label="Share on Reddit">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M24 11.779c0-1.459-1.192-2.645-2.657-2.645-.715 0-1.363.286-1.84.746-1.81-1.191-4.259-1.949-6.971-2.046l1.483-4.669 4.016.941-.006.058c0 1.193.975 2.163 2.174 2.163 1.198 0 2.172-.97 2.172-2.163s-.975-2.164-2.172-2.164c-.92 0-1.704.574-2.021 1.379l-4.329-1.015c-.189-.046-.381.063-.44.249l-1.654 5.207c-2.838.034-5.409.798-7.3 2.025-.474-.438-1.103-.712-1.799-.712-1.465 0-2.656 1.187-2.656 2.646 0 .97.533 1.811 1.317 2.271-.052.282-.086.567-.086.857 0 3.911 4.808 7.093 10.719 7.093s10.72-3.182 10.72-7.093c0-.274-.029-.544-.075-.81.832-.447 1.405-1.312 1.405-2.318zm-17.224 1.816c0-.868.71-1.575 1.582-1.575.872 0 1.581.707 1.581 1.575s-.709 1.574-1.581 1.574-1.582-.706-1.582-1.574zm9.061 4.669c-.797.793-2.048 1.179-3.824 1.179l-.013-.003-.013.003c-1.777 0-3.028-.386-3.824-1.179-.145-.144-.145-.379 0-.523.145-.145.381-.145.526 0 .65.647 1.729.961 3.298.961l.013.003.013-.003c1.569 0 2.648-.315 3.298-.962.145-.145.381-.144.526 0 .145.145.145.379 0 .524zm-.189-3.095c-.872 0-1.581-.706-1.581-1.574 0-.868.709-1.575 1.581-1.575s1.581.707 1.581 1.575-.709 1.574-1.581 1.574z"/>
                            </svg>
                        </a>
                        
                        <!-- Copy Link -->
                        <button onclick="copyToClipboard('https://williamzujkowski.github.io/posts/building-a-privacy-first-ai-lab-deploying-local-llms-without-sacrificing-ethics/')" 
                                class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors duration-200"
                                aria-label="Copy link to clipboard">
                            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                            </svg>
                        </button>
                    </div>
                </div>
            </footer>
        </div>
    </div>
</article>

<!-- Blog JavaScript Bundle (reading-progress, table-of-contents) -->
<script src="/assets/js/blog.min.js"></script>

<!-- Collapsible Code Blocks - loaded in base.njk -->
    </main>
    
    <!-- Footer -->
    <footer role="contentinfo" aria-label="Site footer" class="mt-auto border-t border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-gray-800/50">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- About -->
                <div>
                    <h3 class="text-sm font-semibold text-gray-900 dark:text-gray-100 uppercase tracking-wider mb-4">About</h3>
                    <p class="text-gray-600 dark:text-gray-400">
                        Personal website of William Zujkowski, exploring technology and sharing knowledge. All opinions and views expressed are my own and do not reflect those of my employer.
                    </p>
                </div>
                
                <!-- Quick Links -->
                <div>
                    <h3 class="text-sm font-semibold text-gray-900 dark:text-gray-100 uppercase tracking-wider mb-4">Quick Links</h3>
                    <ul class="space-y-2"><li><a href="/" class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors duration-200">Home</a></li>
<li><a href="/about/" class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors duration-200">About</a></li>
<li><a href="/posts/" class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors duration-200">Posts</a></li>
<li><a href="/resources/" class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors duration-200">Resources</a></li>
<li><a href="/stats/" class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors duration-200">Stats</a></li>
<li><a href="/uses/" class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors duration-200">Uses</a></li></ul>
                </div>
                
                <!-- Connect -->
                <div>
                    <h3 class="text-sm font-semibold text-gray-900 dark:text-gray-100 uppercase tracking-wider mb-4">Connect</h3>
                    <div class="flex space-x-4">
                        <a href="https://github.com/williamzujkowski" class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors duration-200" aria-label="GitHub" rel="noopener noreferrer">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                            </svg>
                        </a>
                        <a href="https://www.linkedin.com/in/williamzujkowski" class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors duration-200" aria-label="LinkedIn" rel="noopener noreferrer">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
                            </svg>
                        </a>
                        <a href="/feed.xml" class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors duration-200" aria-label="RSS Feed">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M3.429 5.1v2.4c7.248 0 13.114 5.886 13.114 13.142h2.4C18.943 12.18 11.858 5.1 3.429 5.1zm0 4.8v2.4c3.924 0 7.114 3.206 7.114 7.142h2.4c0-5.256-4.276-9.542-9.514-9.542zM6.171 16.386c-.756 0-1.371.615-1.371 1.371 0 .756.615 1.371 1.371 1.371.756 0 1.371-.615 1.371-1.371 0-.756-.615-1.371-1.371-1.371z"/>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="mt-8 pt-8 border-t border-gray-200 dark:border-gray-700">
                <p class="text-center text-sm text-gray-600 dark:text-gray-400">
                    &copy; 2025 William Zujkowski. All rights reserved.
                    Built with <a href="https://www.11ty.dev/" class="text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300">Eleventy</a>
                    and <a href="https://tailwindcss.com/" class="text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300">Tailwind CSS</a>.
                </p>
            </div>
        </div>
    </footer>
    
    <!-- Scripts -->
    <script>
        function toggleDarkMode() {
            const html = document.documentElement;
            const themeColorMeta = document.querySelector('meta[name="theme-color"]');
            
            if (html.classList.contains('dark')) {
                html.classList.remove('dark');
                localStorage.theme = 'light';
                if (themeColorMeta) themeColorMeta.content = '#1e40af';
            } else {
                html.classList.add('dark');
                localStorage.theme = 'dark';
                if (themeColorMeta) themeColorMeta.content = '#111827';
            }
        }
        
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(function() {
                // Show success message
                showToast('Link copied to clipboard!');
            }, function(err) {
                // Fallback for older browsers
                const textArea = document.createElement("textarea");
                textArea.value = text;
                textArea.style.position = "fixed";
                textArea.style.left = "-999999px";
                textArea.style.top = "-999999px";
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                try {
                    document.execCommand('copy');
                    showToast('Link copied to clipboard!');
                } catch (err) {
                    showToast('Failed to copy link');
                }
                document.body.removeChild(textArea);
            });
        }
        
        function showToast(message) {
            // Create toast element
            const toast = document.createElement('div');
            toast.className = 'fixed bottom-4 right-4 bg-gray-800 dark:bg-gray-200 text-white dark:text-gray-800 px-4 py-2 rounded-lg shadow-lg transform transition-all duration-300 translate-y-full';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            // Animate in
            setTimeout(() => {
                toast.classList.remove('translate-y-full');
                toast.classList.add('translate-y-0');
            }, 10);
            
            // Remove after 3 seconds
            setTimeout(() => {
                toast.classList.remove('translate-y-0');
                toast.classList.add('translate-y-full');
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, 3000);
        }
        
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }
    </script>
    
    <!-- Core JavaScript Bundle (ui-enhancements, back-to-top, code-collapse) -->
    <script src="/assets/js/core.min.js"></script>
    
    <!-- Mermaid Diagram Support -->
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        
        // Determine if dark mode is active
        const isDarkMode = document.documentElement.classList.contains('dark');
        
        // Initialize mermaid with proper settings
        mermaid.initialize({ 
            startOnLoad: false, // We'll manually init after DOM manipulation
            theme: isDarkMode ? 'dark' : 'default',
            themeVariables: isDarkMode ? {
                // Dark mode theme
                primaryColor: '#4f46e5',
                primaryTextColor: '#f3f4f6',
                primaryBorderColor: '#6366f1',
                lineColor: '#4b5563',
                secondaryColor: '#374151',
                tertiaryColor: '#1f2937',
                background: '#111827',
                mainBkg: '#1f2937',
                secondBkg: '#374151',
                tertiaryBkg: '#4b5563',
                primaryBorderColor: '#6366f1',
                fontFamily: 'Inter, system-ui, sans-serif',
                fontSize: '16px',
                darkMode: true,
                nodeBkg: '#374151',
                nodeBorder: '#6366f1',
                clusterBkg: '#1f2937',
                clusterBorder: '#4b5563',
                defaultLinkColor: '#93bbfd',
                titleColor: '#f3f4f6',
                edgeLabelBackground: '#1f2937',
                actorBorder: '#6366f1',
                actorBkg: '#374151',
                actorTextColor: '#f3f4f6',
                actorLineColor: '#4b5563',
                signalColor: '#f3f4f6',
                signalTextColor: '#f3f4f6',
                labelBoxBkgColor: '#374151',
                labelBoxBorderColor: '#6366f1',
                labelTextColor: '#f3f4f6',
                loopTextColor: '#f3f4f6',
                noteBorderColor: '#6366f1',
                noteBkgColor: '#374151',
                noteTextColor: '#f3f4f6',
                activationBorderColor: '#6366f1',
                activationBkgColor: '#374151',
                sequenceNumberColor: '#111827'
            } : {
                // Light mode theme
                primaryColor: '#6366f1',
                primaryTextColor: '#fff',
                primaryBorderColor: '#4f46e5',
                lineColor: '#d1d5db',
                secondaryColor: '#e5e7eb',
                tertiaryColor: '#f3f4f6',
                background: '#ffffff',
                mainBkg: '#ffffff',
                secondBkg: '#f3f4f6',
                tertiaryBkg: '#e5e7eb',
                fontFamily: 'Inter, system-ui, sans-serif',
                fontSize: '16px',
                darkMode: false,
                nodeBkg: '#f3f4f6',
                nodeBorder: '#4f46e5',
                clusterBkg: '#e5e7eb',
                clusterBorder: '#9ca3af',
                defaultLinkColor: '#2563eb',
                titleColor: '#1f2937',
                edgeLabelBackground: '#ffffff',
                actorBorder: '#4f46e5',
                actorBkg: '#f3f4f6',
                actorTextColor: '#1f2937',
                actorLineColor: '#9ca3af',
                signalColor: '#1f2937',
                signalTextColor: '#1f2937',
                labelBoxBkgColor: '#f3f4f6',
                labelBoxBorderColor: '#4f46e5',
                labelTextColor: '#1f2937',
                loopTextColor: '#1f2937',
                noteBorderColor: '#4f46e5',
                noteBkgColor: '#f3f4f6',
                noteTextColor: '#1f2937',
                activationBorderColor: '#4f46e5',
                activationBkgColor: '#e5e7eb',
                sequenceNumberColor: '#ffffff'
            },
            securityLevel: 'loose',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true
            }
        });
        
        // Process Mermaid diagrams and THEN initialize code-collapse
        window.addEventListener('DOMContentLoaded', async function() {
            // Step 1: Find and process all mermaid code blocks
            const mermaidBlocks = document.querySelectorAll('pre code.language-mermaid');
            
            if (mermaidBlocks.length > 0) {
                // Processing Mermaid diagrams
                
                // Convert each mermaid code block to a diagram
                for (const element of mermaidBlocks) {
                    const graphDefinition = element.textContent;
                    const preElement = element.parentNode;
                    
                    // Create a container div for the mermaid diagram
                    const containerDiv = document.createElement('div');
                    containerDiv.className = 'mermaid-container';
                    containerDiv.setAttribute('data-mermaid', 'true');
                    
                    // Create the mermaid div
                    const graphDiv = document.createElement('div');
                    graphDiv.className = 'mermaid';
                    graphDiv.textContent = graphDefinition;
                    
                    // Replace the pre element with the container - this removes the code block entirely
                    preElement.parentNode.replaceChild(containerDiv, preElement);
                    containerDiv.appendChild(graphDiv);
                }
                
                // Step 2: Initialize all mermaid diagrams with error handling
                try {
                    await mermaid.run();
                    console.log(`✅ Successfully rendered ${mermaidBlocks.length} Mermaid diagram(s)`);
                } catch (error) {
                    console.error('❌ Mermaid rendering failed:', error);
                    // Log each diagram's content for debugging
                    document.querySelectorAll('.mermaid').forEach((div, index) => {
                        console.error(`Diagram ${index + 1} content:`, div.textContent);
                    });
                }

                // Diagrams are now styled via CSS, no need for inline styles
            }
            
            // Step 3: Code-collapse.js is already loaded and will handle remaining blocks
            // It checks for data-processed attribute to avoid duplicates
        });
    </script>
</body>
</html>