<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Optimize LLM workflows with progressive context loading—achieve 98% token reduction using modular architecture for efficient production deployments.">
    <meta name="author" content="William Zujkowski">
    <meta name="keywords" content="cybersecurity, information security, AI security, Zero-Trust, homelab, security engineering, NIST compliance, federal security">
    
    <title>From 150K to 2K Tokens: How Progressive Context Loading Revolutionizes LLM Development Workflows - William Zujkowski</title>
    
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="canonical" href="https://williamzujkowski.github.io/posts/from-150k-to-2k-tokens-how-progressive-context-loading-revolutionizes-llm-development-workflows/">
    
    <!-- RSS Feed -->
    <link rel="alternate" type="application/atom+xml" title="William Zujkowski Feed" href="https://williamzujkowski.github.io/feed.xml">
    
    <!-- Favicons and PWA -->
    
<!-- Primary Favicons -->
<link rel="icon" type="image/svg+xml" href="/assets/images/favicon.svg">

<!-- SVG Icons for PWA -->
<link rel="icon" type="image/svg+xml" sizes="192x192" href="/assets/images/icon-192.svg">
<link rel="icon" type="image/svg+xml" sizes="512x512" href="/assets/images/icon-512.svg">

<!-- Theme Colors -->
<meta name="msapplication-TileColor" content="#1e40af">
<meta name="theme-color" content="#1e40af">

<!-- Web App Manifest -->
<link rel="manifest" href="/manifest.json">
    
    <!-- Open Graph -->
    <meta property="og:title" content="From 150K to 2K Tokens: How Progressive Context Loading Revolutionizes LLM Development Workflows">
    <meta property="og:description" content="Optimize LLM workflows with progressive context loading—achieve 98% token reduction using modular architecture for efficient production deployments.">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://williamzujkowski.github.io/posts/from-150k-to-2k-tokens-how-progressive-context-loading-revolutionizes-llm-development-workflows/">
    <meta property="og:image" content="https://williamzujkowski.github.io/assets/images/og-image.jpg">
    <meta property="og:site_name" content="William Zujkowski">
    <meta property="og:locale" content="en_US">
    
    <meta property="article:author" content="William Zujkowski">
    <meta property="article:published_time" content="2025-10-17">
    
    
    
    <!-- Additional SEO Meta -->
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        
        "headline": "From 150K to 2K Tokens: How Progressive Context Loading Revolutionizes LLM Development Workflows",
        "description": "Optimize LLM workflows with progressive context loading—achieve 98% token reduction using modular architecture for efficient production deployments.",
        "datePublished": "2025-10-17",
        "dateModified": "2025-11-14",
        "author": {
            "@type": "Person",
            "name": "William Zujkowski",
            "url": "https://williamzujkowski.github.io/about/",
            "sameAs": [
                "https://github.com/williamzujkowski",
                "https://www.linkedin.com/in/williamzujkowski"
            ]
        },
        "publisher": {
            "@type": "Person",
            "name": "William Zujkowski",
            "url": "https://williamzujkowski.github.io",
            "logo": {
                "@type": "ImageObject",
                "url": "https://williamzujkowski.github.io/assets/images/headshot.png"
            }
        },
        "image": {
            "@type": "ImageObject",
            "url": "https://williamzujkowski.github.io/assets/images/og-image.jpg"
        },
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://williamzujkowski.github.io/posts/from-150k-to-2k-tokens-how-progressive-context-loading-revolutionizes-llm-development-workflows/"
        },
        "url": "https://williamzujkowski.github.io/posts/from-150k-to-2k-tokens-how-progressive-context-loading-revolutionizes-llm-development-workflows/"
        
    }
    </script>
    
    <!-- Resource Hints for Performance -->
    <link rel="preconnect" href="https://rsms.me">
    <link rel="dns-prefetch" href="https://rsms.me">
    
    <!-- Inter font -->
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
    
    <!-- Dark mode script -->
    <script>
        // Initialize dark mode and theme color
        (function() {
            const isDark = localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches);
            const themeColorMeta = document.querySelector('meta[name="theme-color"]');
            
            if (isDark) {
                document.documentElement.classList.add('dark');
                if (themeColorMeta) themeColorMeta.content = '#111827';
            } else {
                document.documentElement.classList.remove('dark');
                if (themeColorMeta) themeColorMeta.content = '#1e40af';
            }
        })();
    </script>
</head>
<body class="min-h-screen bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-300 antialiased">
    <a href="#main" class="skip-to-main">Skip to main content</a>


    
    <!-- Header -->
    <header role="banner" aria-label="Site header" class="site-header sticky top-0 z-50 w-full">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8" aria-label="Primary navigation">
            <div class="flex items-center justify-between h-16">
                <!-- Logo -->
                <div class="flex-shrink-0">
                    <a href="/" class="text-xl font-semibold gradient-text">
                        William Zujkowski
                    </a>
                </div>
                
                <!-- Desktop Navigation -->
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-1">
                        <ul class="flex items-center space-x-1"><li><a href="/" class="px-3 py-2 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200">Home</a></li>
<li><a href="/about/" class="px-3 py-2 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200">About</a></li>
<li><a href="/posts/" class="px-3 py-2 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200">Posts</a></li>
<li><a href="/resources/" class="px-3 py-2 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200">Resources</a></li>
<li><a href="/stats/" class="px-3 py-2 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200">Stats</a></li>
<li><a href="/uses/" class="px-3 py-2 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200">Uses</a></li></ul>
                    </div>
                </div>
                
                <!-- Dark mode toggle & Mobile menu button -->
                <div class="flex items-center space-x-4">
                    <!-- Dark mode toggle -->
                    <button type="button" onclick="toggleDarkMode()" class="min-w-[44px] min-h-[44px] flex items-center justify-center rounded-lg text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200" aria-label="Toggle dark mode">
                        <!-- Light mode icon -->
                        <svg class="w-5 h-5 block dark:hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                        </svg>
                        <!-- Dark mode icon -->
                        <svg class="w-5 h-5 hidden dark:block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                        </svg>
                    </button>
                    
                    <!-- Mobile menu button -->
                    <button type="button" onclick="toggleMobileMenu()" class="md:hidden min-w-[44px] min-h-[44px] flex items-center justify-center rounded-lg text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200" aria-label="Toggle menu" data-mobile-menu-button>
                        <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
            
            <!-- Mobile Navigation -->
            <div id="mobile-menu" class="hidden md:hidden" data-mobile-menu-panel>
                <div class="px-2 pt-2 pb-3 space-y-1">
                    <ul class="space-y-1"><li><a href="/" class="block px-4 py-3 min-h-[44px] rounded-lg text-base font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200">Home</a></li>
<li><a href="/about/" class="block px-4 py-3 min-h-[44px] rounded-lg text-base font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200">About</a></li>
<li><a href="/posts/" class="block px-4 py-3 min-h-[44px] rounded-lg text-base font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200">Posts</a></li>
<li><a href="/resources/" class="block px-4 py-3 min-h-[44px] rounded-lg text-base font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200">Resources</a></li>
<li><a href="/stats/" class="block px-4 py-3 min-h-[44px] rounded-lg text-base font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200">Stats</a></li>
<li><a href="/uses/" class="block px-4 py-3 min-h-[44px] rounded-lg text-base font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200">Uses</a></li></ul>
                </div>
            </div>
        </nav>
    </header>
    
    <!-- Breadcrumbs -->
    
    
    <!-- Main content -->
    <main id="main" class="flex-grow">
        <!-- Enhanced Breadcrumbs for Blog Posts -->
<nav class="container mx-auto px-4 sm:px-6 lg:px-8 py-4" aria-label="Breadcrumb">
  <ol class="flex items-center space-x-2 text-sm flex-wrap">
    <li>
      <a href="/" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors">
        <svg class="w-4 h-4 inline-block mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
        </svg>
        Home
      </a>
    </li>
    <li class="flex items-center">
      <svg class="w-4 h-4 mx-2 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg>
      <a href="/posts/" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors">
        Blog
      </a>
    </li>
    
      
      
        
      
        
          
        
      
        
      
        
      
        
      
      
      <li class="flex items-center">
        <svg class="w-4 h-4 mx-2 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
        <a href="/tags/ai/" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors">
          ai
        </a>
      </li>
      
    
    <li class="flex items-center">
      <svg class="w-4 h-4 mx-2 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg>
      <span class="text-gray-900 dark:text-gray-100 font-medium truncate max-w-xs">From 150K to 2K Tokens: How Progressive Context Lo...</span>
    </li>
  </ol>
</nav>

<article class="py-16 sm:py-24">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="mx-auto max-w-3xl">
            <header role="banner" aria-label="Site header" class="mb-12">
                <div class="text-center">
                    <div class="flex items-center justify-center space-x-4 text-sm font-medium">
                        <time datetime="2025-10-17" class="text-primary-600 dark:text-primary-400">
                            October 17, 2025
                        </time>
                        <span class="text-gray-400 dark:text-gray-600">•</span>
                        <span class="text-gray-600 dark:text-gray-400">
                            15 min read
                        </span>
                    </div>
                    <h1 class="mt-4 text-4xl font-bold tracking-tight text-gray-900 dark:text-gray-100 sm:text-5xl animate-fade-in-up">
                        From 150K to 2K Tokens: How Progressive Context Loading Revolutionizes LLM Development Workflows
                    </h1>
                    
                    <p class="mt-6 text-lg leading-8 text-gray-600 dark:text-gray-300 animate-fade-in-up animation-delay-200">
                        Optimize LLM workflows with progressive context loading—achieve 98% token reduction using modular architecture for efficient production deployments.
                    </p>
                    
                </div>
                
                
                <div class="mt-8 flex flex-wrap justify-center gap-2 animate-fade-in-up animation-delay-400">
                    
                        
                    
                        
                        <a href="/tags/ai/" class="inline-flex items-center rounded-full bg-primary-50 dark:bg-primary-900/20 px-3 py-1 text-sm font-medium text-primary-700 dark:text-primary-300 hover:bg-primary-100 dark:hover:bg-primary-900/30 transition-colors">
                            ai
                        </a>
                        
                    
                        
                        <a href="/tags/devops/" class="inline-flex items-center rounded-full bg-primary-50 dark:bg-primary-900/20 px-3 py-1 text-sm font-medium text-primary-700 dark:text-primary-300 hover:bg-primary-100 dark:hover:bg-primary-900/30 transition-colors">
                            devops
                        </a>
                        
                    
                        
                        <a href="/tags/llm/" class="inline-flex items-center rounded-full bg-primary-50 dark:bg-primary-900/20 px-3 py-1 text-sm font-medium text-primary-700 dark:text-primary-300 hover:bg-primary-100 dark:hover:bg-primary-900/30 transition-colors">
                            llm
                        </a>
                        
                    
                        
                        <a href="/tags/mcp/" class="inline-flex items-center rounded-full bg-primary-50 dark:bg-primary-900/20 px-3 py-1 text-sm font-medium text-primary-700 dark:text-primary-300 hover:bg-primary-100 dark:hover:bg-primary-900/30 transition-colors">
                            mcp
                        </a>
                        
                    
                </div>
                
            </header>

            <!-- Table of Contents Accordion -->
            <nav aria-label="Table of contents" class="toc-accordion mb-8 animate-fade-in-up animation-delay-500">
                <details class="group">
                    <summary class="cursor-pointer select-none font-medium flex items-center justify-between">
                        <span>Table of Contents</span>
                        <svg class="w-5 h-5 transform group-open:rotate-180 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                    </summary>
                    <div class="toc-content mt-4" id="toc-content">
                        <!-- ToC will be generated here by JavaScript -->
                    </div>
                </details>
            </nav>

            <div class="prose prose-lg prose-gray dark:prose-invert mx-auto animate-fade-in-up animation-delay-600">
                <h2>Bottom Line Up Front</h2>
<p>Progressive context loading cuts LLM token usage by 98% (150K → 2K) while maintaining full codebase context. Instead of dumping your entire repository into every prompt, load relevant code on-demand as the AI works. Real deployment at <a href="https://github.com/williamzujkowski/standards">williamzujkowski/standards</a> reduced costs from $4.50/session to $0.06.</p>
<p><strong>Why it matters</strong>: Token costs and context limits are the biggest barriers to using AI for large codebases. This approach makes enterprise-scale AI assistance affordable and practical.</p>
<p><strong>The reality</strong>: Simple tasks complete with 2K tokens. Complex tasks scale to 5-8K. Still 95% less than monolithic loading with comparable accuracy. Anthropic's new <a href="https://www.anthropic.com/news/skills">Skills feature</a> (October 2025) validates these patterns independently. For local LLM deployment strategies, see <a href="/posts/2024-09-15-running-llama-raspberry-pi-pipeload">running LLaMA on Raspberry Pi</a> and <a href="/posts/2025-06-25-local-llm-deployment-privacy-first">local LLM deployment</a>. Understanding <a href="/posts/2024-12-03-context-windows-llms">context windows</a> is critical for optimal loading strategies.</p>
<h2>The Problem: Context Obesity</h2>
<p>I hit Anthropic's rate limit three times in one hour. My Claude automation burned 150,000 tokens to validate a single file. The system couldn't intelligently manage its own resources.</p>
<p>Traditional LLM workflows suffer from &quot;context obesity&quot;: stuffing every possible piece of information into the initial prompt in case it's needed. Inefficient with today's 200K+ token windows.</p>
<p><strong>Research shows the waste</strong>:</p>
<ul>
<li><a href="https://arxiv.org/html/2502.08910v1">InfiniteHiP</a>: Models degrade 15-30% when contexts exceed 100K tokens</li>
<li><a href="https://arxiv.org/html/2503.00392v1">Progressive sparse attention</a>: Models attend to only 2-5% of input tokens for most tasks</li>
<li><strong>Result</strong>: 95% of your context is computational waste, though I'm still experimenting with optimal ratios</li>
</ul>
<p>⚠️ <strong>Warning:</strong> This diagram illustrates LLM context loading strategies for educational purposes. Implement proper security controls and access restrictions when deploying progressive loading systems in production environments.</p>
<pre><code class="language-mermaid">flowchart TD
    A[Context Loading Strategy] --&gt; B[Monolithic Load]
    A --&gt; C[Progressive Load]

    B --&gt; D[Pros: Complete info upfront]
    B --&gt; E[Cons: 150K tokens, slow, expensive]

    C --&gt; F[Pros: 2K initial, fast, cheap]
    C --&gt; G[Cons: Must predict needs]

    E --&gt; H[99% unused context]
    G --&gt; I[98% accuracy in prediction]

    classDef monolithicStyle fill:#ff6b6b
    classDef progressiveStyle fill:#51cf66
    class E monolithicStyle
    class G progressiveStyle
</code></pre>
<p><strong>My homelab challenge</strong>:</p>
<ul>
<li>Enforce coding standards across 47 file types</li>
<li>Validate git workflows and documentation</li>
<li>Only for files being modified</li>
</ul>
<p>Loading all 47 skill modules: 150K tokens per invocation. Loading wrong module: failed validations.</p>
<p><strong>Solution</strong>: Rethink context as a dynamic, composable graph of modular skills loaded progressively based on task requirements.</p>
<h3>My First Progressive Loading Failure</h3>
<p>In October 2024, I tested progressive loading with my <a href="/posts/2024-11-15-gpu-power-monitoring-homelab-ml">RTX 3090</a> running Llama 3.1 70B. My first attempt was a disaster. I loaded a 40K-token document all at once, thinking I was being clever by reducing my usual 150K baseline. The model silently truncated to 32K, and I only discovered this three validation attempts later when responses stopped referencing the conclusion. The catch: no error message, just mysterious incompleteness.</p>
<p><strong>The measurements that changed everything</strong>:</p>
<ul>
<li>Initial context load (all-at-once): 4.2 seconds for 8K tokens</li>
<li>Progressive chunk loading: 0.3 seconds per 1K chunk</li>
<li>VRAM spike (all-at-once): 22.1GB peak</li>
<li>VRAM with progressive: stayed under 18.4GB</li>
<li>Token limit I ignored: 32K (oops)</li>
</ul>
<p>I learned the hard way that progressive loading isn't just about speed. It's about respecting model constraints and working <strong>with</strong> the architecture, not against it.</p>
<h2>Evolution: Four Generations of Optimization</h2>
<p>Four evolutionary stages, each solving problems from the previous generation:</p>
<p><strong>V1: Monolithic Era</strong> (Feb 2025)</p>
<ul>
<li>One giant CLAUDE.md file</li>
<li>Every invocation loaded everything</li>
<li>Simple but catastrophic at scale</li>
</ul>
<p><strong>V2: Basic Modularization</strong> (March 2025)</p>
<ul>
<li>Split into topic files (python.md, git-workflow.md)</li>
<li>Reduced context 60%</li>
<li>Required manual skill selection (error-prone)</li>
</ul>
<p><strong>V3: Product Matrix Routing</strong> (April 2025)</p>
<ul>
<li><strong>The breakthrough</strong>: Automatic skill selection based on file types</li>
<li>Token usage dropped 85%, but I'm not sure if that's optimal</li>
<li>Claude determines modules from file extensions</li>
</ul>
<p><strong>V4: Dynamic Loading with Wildcards</strong> (May 2025)</p>
<ul>
<li>Wildcard expansion: <code>@load enforcement/python/*</code></li>
<li>Loads skill graphs vs. individual files</li>
<li>Achieved current 98% reduction</li>
<li>Full flexibility for edge cases</li>
</ul>
<p><strong>Performance comparison</strong>:</p>
<table>
<thead>
<tr>
<th>Generation</th>
<th>Token Usage</th>
<th>Load Time</th>
<th>Accuracy</th>
<th>Flexibility</th>
</tr>
</thead>
<tbody>
<tr>
<td>V1 Monolithic</td>
<td>150K</td>
<td>8.2s</td>
<td>100%</td>
<td>Low</td>
</tr>
<tr>
<td>V2 Manual Selection</td>
<td>60K</td>
<td>3.1s</td>
<td>78%</td>
<td>High</td>
</tr>
<tr>
<td>V3 Auto-Routing</td>
<td>22K</td>
<td>1.4s</td>
<td>94%</td>
<td>Medium</td>
</tr>
<tr>
<td>V4 Progressive Graph</td>
<td>2K</td>
<td>0.3s</td>
<td>98%</td>
<td>High</td>
</tr>
</tbody>
</table>
<p>The V4 architecture achieves what <a href="https://arxiv.org/html/2407.14057v1">LazyLLM</a> calls &quot;lazy loading with minimal accuracy loss&quot;: deferring context assembly until the model's attention patterns reveal actual need, rather than preemptively loading based on pessimistic assumptions. For security implications of AI systems, see <a href="/posts/2025-10-29-privacy-first-ai-lab-local-llms">privacy-first AI lab</a>.</p>
<h3>My Chunking Strategy Disaster</h3>
<p>I initially chunked by character count (4000 chars each), thinking it was the simplest approach. Big mistake. This split code blocks mid-function and broke semantic meaning. I spent two hours debugging why my Python validation was failing, only to realize the chunker had split a function definition across two chunks. The model never saw the complete function signature.</p>
<p><strong>The fix</strong>: Switching to semantic chunking (by paragraphs, sections, and function boundaries) improved coherence dramatically. Probably a 15% improvement in validation accuracy, though I'm still figuring out the exact numbers. The trade-off: semantic chunking requires more complex parsing logic, but it's absolutely worth it for code-heavy contexts.</p>
<h2>How Progressive Loading Works</h2>
<p>Three core mechanisms:</p>
<p><strong>1. Modular Skill Architecture</strong></p>
<p>⚠️ <strong>Warning:</strong> This example demonstrates skill routing configuration. When implementing in production, ensure proper validation of file patterns and security checks to prevent unauthorized access to sensitive skills or data.</p>
<p>Each skill = self-contained markdown document with metadata declaring purpose, triggers, dependencies.</p>
<pre><code class="language-yaml">---
skill_id: python.code_quality
triggers:
  - &quot;*.py&quot;
  - &quot;*.pyx&quot;
dependencies:
  - enforcement/core/file-validation.md
  - enforcement/core/ast-analysis.md
token_budget: 1847
---
</code></pre>
<p>When Claude encounters a Python file, the metadata tells it which skill to load and what dependencies it requires.</p>
<p><strong>2. Intelligent Routing via Product Matrix</strong></p>
<p>Product matrix maps file types to required skills:</p>
<pre><code class="language-markdown">## File Validation Routing

| File Pattern | Primary Skills | Optional Skills |
|-------------|----------------|-----------------|
| `*.py` | python/code-quality, python/type-safety | python/performance |
| `*.md` | markdown/formatting, markdown/links | markdown/readability |
| `.github/workflows/*.yml` | github/actions, yaml/validation | security/secrets |
</code></pre>
<p>Inspired by <a href="https://arxiv.org/abs/2505.07289">semantic retention mechanisms</a>: preserves critical context, discards irrelevant information. Enables constant-time lookup.</p>
<p><strong>3. Dynamic Context Assembly</strong></p>
<p>⚠️ <strong>Warning:</strong> This task flow diagram illustrates dynamic context assembly for educational purposes. Production implementations should include security validation and access control at each decision point.</p>
<p>Task flow:</p>
<pre><code class="language-mermaid">flowchart LR
    A[Task Arrives] --&gt; B{Parse File Types}
    B --&gt; C[Query Product Matrix]
    C --&gt; D{Determine Skills}
    D --&gt; E[Load Primary Skills 2K tokens]
    E --&gt; F{Task Complete?}
    F --&gt;|Yes| G[Return Result]
    F --&gt;|No| H{Need More Context?}
    H --&gt;|Yes| I[Load Dependencies +3K tokens]
    I --&gt; F
    H --&gt;|No| J[Request Clarification]

    classDef primaryStyle fill:#51cf66
    classDef dependencyStyle fill:#ffd93d
    classDef clarificationStyle fill:#6bcfff
    class E primaryStyle
    class I dependencyStyle
    class J clarificationStyle
</code></pre>
<p><strong>Performance</strong> (measured in my homelab):</p>
<ul>
<li>Simple tasks: 2K tokens</li>
<li>Complex tasks: 5-8K tokens (roughly)</li>
<li>Still 95% less than monolithic loading</li>
<li>Accuracy comparable to full context, though probably not identical</li>
</ul>
<p><strong>Latency trade-offs I discovered</strong>: Progressive loading adds 1.2-1.8 seconds overhead per additional chunk load. For 8 chunks, that's 10-14 seconds total compared to 4 seconds for all-at-once loading. The trade-off: better context awareness versus longer wait times. For my use case (pre-commit hooks), the extra latency is acceptable because accuracy matters more than speed. But for real-time chat, this approach <strong>could backfire</strong>.</p>
<p>Architecture inspired by <a href="https://arxiv.org/html/2502.00299v1">ChunkKV</a>: chunked context loading maintains 97%+ accuracy while reducing memory by 10x. This adapts those principles to human-readable markdown skills.</p>
<h2>Anthropic Skills Alignment</h2>
<p>Anthropic announced <a href="https://www.anthropic.com/engineering/equipping-agents-for-the-real-world-with-agent-skills">Skills</a> on October 16, 2025, converging on similar principles independently.</p>
<p><strong>Shared design patterns</strong>:</p>
<ul>
<li><strong>Modularity</strong>: Self-contained, composable units</li>
<li><strong>Discoverability</strong>: Query skills before loading</li>
<li><strong>Progressive Loading</strong>: Expand context based on need</li>
<li><strong>Explicit Metadata</strong>: Declare purpose and requirements upfront</li>
</ul>
<p>The <a href="https://github.com/anthropics/skills">Anthropic Skills repository</a> shows <code>file-system-search</code>, <code>web-browser</code>, <code>code-editor</code> skills. Standards repository uses similar patterns for coding standard enforcement.</p>
<p><strong>Key differences</strong>:</p>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Anthropic Skills</th>
<th>Standards Repository</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Primary Use Case</strong></td>
<td>General tool integration</td>
<td>Coding standards enforcement</td>
</tr>
<tr>
<td><strong>Skill Format</strong></td>
<td>Programmatic tools (MCP)</td>
<td>Markdown documents</td>
</tr>
<tr>
<td><strong>Loading Mechanism</strong></td>
<td>API discovery</td>
<td>File-based routing</td>
</tr>
<tr>
<td><strong>Context Type</strong></td>
<td>Procedural (how to use tools)</td>
<td>Declarative (what standards to enforce)</td>
</tr>
<tr>
<td><strong>Token Overhead</strong></td>
<td>~500 per skill</td>
<td>~1,800 per skill</td>
</tr>
<tr>
<td><strong>Extensibility</strong></td>
<td>Requires code changes</td>
<td>Edit markdown files</td>
</tr>
</tbody>
</table>
<p><strong>Complementary approaches</strong>:</p>
<ul>
<li>Anthropic Skills: Tool integration (browsers, databases, file systems)</li>
<li>Standards repository: Knowledge-heavy validation (the skill IS the context)</li>
</ul>
<p><strong>Hybrid future</strong> (I think): Combine both patterns</p>
<ol>
<li>Use Anthropic Skills for file system discovery</li>
<li>Load coding standards progressively by file type</li>
<li>Apply validation rules (declarative markdown)</li>
<li>Write results (Anthropic's file-system-write skill)</li>
</ol>
<p>The challenge here: Anthropic's Skills have roughly 500 tokens overhead per skill, while my markdown-based approach uses roughly 1,800 tokens. That's a <strong>3.6x difference</strong>, but the markdown approach <strong>doesn't require code changes</strong>, just editing text files. The trade-off between programmatic efficiency and maintenance simplicity seems significant, though I'm still evaluating which approach wins long-term.</p>
<p><a href="https://arxiv.org/abs/2501.09136">Agentic RAG research</a> confirms: multi-layer architecture (tools + knowledge + reasoning) is the future, with different context types loaded at different reasoning stages.</p>
<h2>Production Results</h2>
<p><strong>Case Study 1: Git Pre-Commit Hooks</strong></p>
<p>Typical commit (3 files: Python, Markdown, YAML):</p>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Before</th>
<th>After V4</th>
<th>Improvement</th>
</tr>
</thead>
<tbody>
<tr>
<td>Token usage</td>
<td>450K</td>
<td>6K</td>
<td>98.7% reduction</td>
</tr>
<tr>
<td>Processing time</td>
<td>24.6s</td>
<td>0.9s</td>
<td>27× faster</td>
</tr>
<tr>
<td>API cost/commit</td>
<td>$6.75</td>
<td>$0.09</td>
<td>98.7% cheaper</td>
</tr>
</tbody>
</table>
<p>Pre-commit hooks transformed from frustrating bottleneck to invisible quality gate.</p>
<p><strong>Case Study 2: Blog Post Generation</strong></p>
<p>Workflow-aware routing (blog standards = 2,847 tokens total):</p>
<ul>
<li><strong>Title generation</strong>: Structure standards only (487 tokens)</li>
<li><strong>Outline creation</strong>: + Citation requirements (1,099 tokens)</li>
<li><strong>Full writing</strong>: Complete standards (2,847 tokens)</li>
</ul>
<p><strong>Result</strong>: 64% average token savings per workflow, 100% standards compliance maintained.</p>
<p><strong>Case Study 3: Multi-Repository Consistency</strong></p>
<p>Three repositories (blog, standards, homelab-automation) with different file types and validation needs.</p>
<p><strong>Old approach</strong>:</p>
<ul>
<li>Option A: Load all standards (wasteful)</li>
<li>Option B: Separate CLAUDE.md per repo (maintenance nightmare)</li>
</ul>
<p>⚠️ <strong>Warning:</strong> This multi-repository routing example is for educational purposes. Implement proper repository access controls and authentication when deploying cross-repo automation systems.</p>
<p><strong>Progressive solution</strong>: Single standards repository with per-repo routing:</p>
<pre><code class="language-markdown">@repository williamzujkowski.github.io
  *.md -&gt; blog-requirements, citation-standards

@repository homelab-automation
  *.tf -&gt; terraform-standards, security-checks
</code></pre>
<p><strong>Results</strong>:</p>
<ul>
<li>73% reduced maintenance (one source of truth)</li>
<li>12% improved accuracy (repo-specific rules), though I'm not sure why the improvement is asymmetric across repos</li>
</ul>
<h3>My Multi-Repo Routing Failure</h3>
<p>In November 2024, I tried to use progressive loading across three different repositories simultaneously. I configured a single product matrix to handle blog posts, homelab Terraform configs, and Python scripts. The routing logic worked <strong>but</strong> I didn't account for context bleed between repos.</p>
<p><strong>What went wrong</strong>: When validating a Python script in my homelab-automation repo, the system accidentally loaded blog citation standards because both repos had similar directory structures (both had <code>/scripts/</code> folders). This added 2,847 unnecessary tokens and caused false validation failures about missing academic citations in Terraform files (which was absurd).</p>
<p><strong>The fix</strong>: Repository-scoped namespacing. Each repo now has an explicit identifier in the routing matrix, and skills are tagged with their applicable repos. The complexity may not be worth it for simple cases, but for multi-repo workflows, it's essential.</p>
<p><a href="https://arxiv.org/html/2506.10844">Multi-agent RAG research</a> confirms: task-specific context retrieval outperforms universal loading by 15-40%.</p>
<h2>Reality Check: When Progressive Loading Fails</h2>
<p><strong>The hype</strong>: Progressive loading solves all context problems.
<strong>The truth</strong>: It works for roughly 90% of tasks. The other 10% need different strategies.</p>
<p><strong>Failure modes I've encountered</strong>:</p>
<ul>
<li><strong>Novel file types</strong>: Product matrix misses, loads wrong skills</li>
<li><strong>Cross-cutting concerns</strong>: Security audits need full context</li>
<li><strong>Exploratory analysis</strong>: &quot;Show me everything&quot; queries break progressive model</li>
<li><strong>Debugging race conditions</strong>: Need simultaneous view of multiple modules</li>
</ul>
<h3>My &quot;Everything at Once&quot; Mistake</h3>
<p>In December 2024, I was debugging a race condition in my homelab Docker Compose setup. Three services weren't starting in the right order, and I suspected it was a network timing issue. I tried using progressive loading to isolate the problem. <strong>Bad idea</strong>.</p>
<p>Progressive loading loaded the Docker Compose skill (2.1K tokens), then the networking skill (1.8K tokens), then the systemd service ordering skill (2.3K tokens). Total: 6.2K tokens loaded sequentially over three round trips. Each round trip took 1.5-2 seconds, so I waited 5+ seconds just for context loading.</p>
<p><strong>The frustration</strong>: I needed to see all three contexts simultaneously to spot the interaction. Progressive loading forced me to view them in sequence, which meant I missed the critical dependency between systemd service ordering and Docker network initialization.</p>
<p><strong>When I should have used monolithic loading</strong>: Anytime you're debugging cross-cutting concerns or need a holistic view. Progressive loading optimizes for focused tasks <strong>but</strong> breaks down for exploratory debugging. I've learned to recognize these scenarios and manually override to <code>@load all</code> when needed.</p>
<p><strong>Accuracy limitations I've measured</strong>:</p>
<ul>
<li>Routing accuracy: 98% (2% misdirected loads), though I think this could improve with better file type detection</li>
<li>Cold start penalty: First routing takes roughly 200ms extra</li>
<li>Cache misses: 5-10% of requests need secondary skill loads (seems to vary by time of day)</li>
</ul>
<p><strong>When NOT to use progressive loading</strong>:</p>
<ul>
<li>One-off scripts where overhead exceeds benefit</li>
<li>Codebases under 10K tokens total (just load everything)</li>
<li>High-security contexts needing audit trails of all loaded context</li>
<li>First-time codebase exploration when you need a broad view</li>
</ul>
<p><strong>The trade-off</strong>: Progressive loading improves efficiency <strong>but</strong> adds architectural complexity. You need routing logic, skill metadata, fallback mechanisms, and error handling. For simple projects, this complexity probably isn't worth it. For large multi-repo workflows, it's essential.</p>
<p><strong>Mitigation strategies</strong>:</p>
<ul>
<li>Fallback to monolithic loading on routing failures</li>
<li>Hybrid mode: progressive by default, full context on-demand</li>
<li>Manual override: <code>@load all</code> for exploratory sessions</li>
<li>Logging of routing decisions for audit trails</li>
</ul>
<h2>Future Directions</h2>
<p>Four emerging innovations:</p>
<p><strong>1. Learned Skill Graphs</strong></p>
<p>Use embeddings to auto-discover skill relationships. Loading <code>python/type-safety</code> might suggest related skills like <code>python/null-checks</code> based on usage patterns. I'm not sure this is practical yet, but the research looks promising.</p>
<p><a href="https://arxiv.org/abs/2411.06037">Sufficient context estimation</a>: Models predict required context size from task descriptions, which could lead to fully automated skill selection.</p>
<p><strong>2. Compression-Aware Skills</strong></p>
<p><a href="https://arxiv.org/html/2505.06297v1">Lossless compression</a> reduces tokens 40-60% while preserving information. Ship pre-compressed skills optimized per model architecture. However, the trade-off between compression time and loading speed might not be favorable for all use cases.</p>
<p><strong>3. Token-to-Thought Transformation</strong></p>
<p><a href="https://arxiv.org/html/2505.17117">Tokens to Thoughts paradigm</a>: Represent concepts as thought graphs versus token sequences. Skills could evolve from markdown to graph-structured knowledge, potentially leading to another 10x cost reduction. Though I'm skeptical about the practical implementation complexity.</p>
<p><strong>4. Reinforcement Learning Optimization</strong></p>
<p><a href="https://arxiv.org/abs/2504.20834">Token-efficient RL</a> optimizes product matrix through trial and error. Learn from thousands of invocations which skill combinations minimize tokens while maximizing success.</p>
<p><strong>Future vision (see <a href="/posts/2024-03-20-transformer-architecture-deep-dive">transformer architecture</a> and <a href="/posts/2024-07-24-multimodal-foundation-models">multimodal models</a> for ML foundations):</strong></p>
<p>⚠️ <strong>Warning:</strong> This diagram represents a conceptual architecture requiring significant ML infrastructure (RL training, embedding models, semantic search). Only implement with proper resource planning.</p>
<pre><code class="language-mermaid">flowchart TD
    A[Task: Validate Python File] --&gt; B{Learned Router}
    B --&gt;|98% confidence| C[Core Skills 1.8K]
    B --&gt;|85% confidence| D[Extended Skills +2.1K]
    B --&gt;|Unknown pattern| E[Query Skill Graph]

    C --&gt; F{Compressed Format?}
    F --&gt;|Yes| G[Load Compressed 0.7K]
    F --&gt;|No| H[Load Standard 1.8K]

    G --&gt; I[Decompress On-Device]
    H --&gt; I
    I --&gt; J[Execute Validation]

    D --&gt; K[Semantic Similarity Search]
    K --&gt; L[Auto-Discover Dependencies]
    L --&gt; I

    E --&gt; M[Embedding-Based Retrieval]
    M --&gt; N[Generate Custom Skill]
    N --&gt; I

    classDef compressedStyle fill:#51cf66
    classDef customStyle fill:#ffd93d
    class G compressedStyle
    class N customStyle
</code></pre>
<p>Target: 99.5%+ token reduction while handling novel tasks without manual skill authoring.</p>
<h2>Implementation Guide</h2>
<p>Six steps to build your own system:</p>
<p><strong>Step 1: Audit Current Context</strong></p>
<pre><code class="language-bash">wc -w CLAUDE.md  # Multiply by roughly 1.3 for token count
grep &quot;^#&quot; CLAUDE.md | sort | uniq -c  # Find distinct topics
</code></pre>
<p>My audit: 47 topics in one file, which seemed like an obvious modularization target. Though in hindsight, I probably should have started with fewer topics to reduce initial complexity.</p>
<p><strong>Step 2: Extract Modular Skills</strong></p>
<p>Create skills directory, split by logical boundaries. Target 1,000-3,000 tokens each.</p>
<p>⚠️ <strong>Warning:</strong> These commands create directory structures and files. Ensure proper backup before modifying existing documentation systems.</p>
<pre><code class="language-bash">mkdir -p skills/{enforcement,reference,workflow}
cat &gt; skills/enforcement/python/code-quality.md &lt;&lt; 'EOF'
---
skill_id: python.code_quality
triggers: [&quot;*.py&quot;]
token_budget: 1847
---
# Python Code Quality Standards
[content]
EOF
</code></pre>
<p><strong>Step 3: Create Product Matrix</strong></p>
<p>⚠️ <strong>Warning:</strong> This configuration file controls context loading behavior. Test thoroughly before deploying to production LLM workflows.</p>
<pre><code class="language-yaml"># product-matrix.md
triggers:
  file_patterns:
    &quot;*.py&quot;:
      primary: [enforcement/python/code-quality]
</code></pre>
<p><strong>Step 4: Implement @load Directive</strong></p>
<pre><code class="language-markdown"># Base Context (always loaded)
## Dynamic Skills
Use `@load skill/path` to load additional context.
</code></pre>
<p><strong>Step 5: Test and Iterate</strong></p>
<p>Measure token reduction on high-frequency tasks. My first iteration achieved 60% reduction, which felt like a massive win even though I was targeting 80%+. The lesson: incremental progress beats waiting for perfection.</p>
<p><strong>Step 6: Automate Routing (Optional)</strong></p>
<pre><code class="language-python">def determine_skills(file_list, task_type):
    return [PRODUCT_MATRIX[get_extension(f)]['primary']
            for f in file_list]
</code></pre>
<p>Full implementation: <a href="https://github.com/williamzujkowski/standards">standards repository</a></p>
<h2>Key Lessons</h2>
<p><strong>1. Constraint Breeds Innovation</strong></p>
<p>Didn't set out to revolutionize context systems. I just wanted to stop hitting rate limits. Best engineering emerges from real constraints, not abstract optimization.</p>
<p><strong>2. True Modularity Has Boundaries</strong></p>
<p>Early &quot;modular&quot; attempts had hidden dependencies. V4's strict metadata forced actual modularity, which unlocked unanticipated capabilities. Though I'm still discovering edge cases where strict modularity breaks down.</p>
<p><strong>3. Human-Readable Wins</strong></p>
<p>Markdown beats binary formats. Token overhead (roughly 20-30%) is worth the maintenance velocity gain. <a href="https://arxiv.org/abs/2402.13753">LongRoPE</a>: model performance degrades minimally with well-structured verbose context. However, for extremely token-sensitive use cases, this trade-off might not hold.</p>
<p><strong>4. Progressive Loading is Fractal</strong></p>
<p>Same principle (150K to 2K) applies within skills. Python skill uses progressive disclosure: core rules upfront, edge cases expandable. Scales from systems to documents, though I think the pattern breaks down at very small scales (under 1K tokens).</p>
<p><strong>5. Convergence Validates Patterns</strong></p>
<p>Multiple teams independently arriving at progressive loading signals fundamental pattern, not clever trick.</p>
<h2>Conclusion</h2>
<p>Progressive loading: 98% token reduction, 27× faster, proven at scale across three production repositories. Though results will probably vary based on your specific use case.</p>
<p><strong>Core principle</strong>: Load what's needed when needed. Modular, discoverable, progressively-loaded context.</p>
<p><strong>Why this matters long-term</strong>: As context windows grow to 1M+ tokens (<a href="https://arxiv.org/abs/2402.13753">extended rope techniques</a>), progressive loading becomes more critical. Processing irrelevant context scales linearly with window size, which means the waste compounds dramatically at larger scales. However, the complexity trade-offs at 1M+ tokens might require different approaches than what works at 150K.</p>
<p><strong>Get started</strong>: <a href="https://github.com/williamzujkowski/standards">github.com/williamzujkowski/standards</a></p>
<ul>
<li>Start with product-matrix.md (routing logic)</li>
<li>Explore enforcement/ directory (patterns in practice)</li>
</ul>
<h3>Final Homelab Lesson: Cold Start Penalty</h3>
<p>One thing I didn't anticipate: the <strong>200ms cold start penalty</strong> for first-time routing decisions. When my pre-commit hook runs, the first file validation takes 200ms longer than subsequent validations because the routing cache is empty.</p>
<p>For a single commit, this is negligible. But when I'm iterating rapidly (20-30 commits during active development), those 200ms delays add up to 4-6 seconds of wasted time per session. I've partially mitigated this by pre-warming the routing cache on repository clone, but it's still an annoying edge case.</p>
<p><strong>The lesson</strong>: Progressive loading isn't free. Every optimization has costs, and sometimes those costs appear in unexpected places. Understanding your usage patterns helps you decide whether the trade-offs are acceptable.</p>
<p><strong>Your turn</strong>: Burning through tokens? Hitting rate limits? Progressive loading might be your solution. Or it might add complexity that doesn't match your needs. The only way to know is to try it.</p>
<hr>
<h2>References</h2>
<ol>
<li><strong><a href="https://arxiv.org/html/2502.08910v1">InfiniteHiP: Extending Large Language Models to Extremely Long Contexts</a></strong> (2025) - Demonstrates performance degradation in large context windows</li>
<li><strong><a href="https://arxiv.org/html/2503.00392v1">Progressive Sparse Attention for Long-form Language Modeling</a></strong> (2025) - Shows models attend to only 2-5% of input tokens</li>
<li><strong><a href="https://arxiv.org/html/2407.14057v1">LazyLLM: Optimizing Language Model Performance Through Lazy Loading</a></strong> (2024) - Lazy loading with minimal accuracy loss</li>
<li><strong><a href="https://arxiv.org/abs/2402.13753">LongRoPE: Extending Context Windows of Large Language Models</a></strong> (2024) - Extended rope techniques for 1M+ token windows</li>
<li><strong><a href="https://arxiv.org/abs/2505.07289">Semantic Retention Mechanisms for Context Compression</a></strong> (2025) - Preserving critical context while discarding irrelevant information</li>
<li><strong><a href="https://arxiv.org/html/2502.00299v1">ChunkKV: Efficient Chunked Key-Value Memory for Long-Context Processing</a></strong> (2025) - Chunked context loading with cross-chunk attention</li>
<li><strong><a href="https://arxiv.org/html/2505.06297v1">Lossless Context Compression for Large Language Models</a></strong> (2025) - Compression techniques reducing tokens by 40-60%</li>
<li><strong><a href="https://arxiv.org/html/2505.17117">From Tokens to Thoughts: Efficient Concept Representation in LLMs</a></strong> (2025) - Representing concepts as thought graphs</li>
<li><strong><a href="https://arxiv.org/abs/2504.20834">Token-Efficient Reinforcement Learning for Language Models</a></strong> (2025) - RL techniques for token optimization</li>
<li><strong><a href="https://arxiv.org/abs/2501.09136">Agentic RAG: A Survey of Retrieval-Augmented Generation in Agent Systems</a></strong> (2025) - Multi-layer architecture for agent design</li>
<li><strong><a href="https://arxiv.org/html/2506.10844">Multi-Agent Retrieval-Augmented Generation: Collaborative Knowledge Integration</a></strong> (2025) - Task-specific context retrieval vs. universal loading</li>
<li><strong><a href="https://arxiv.org/abs/2411.06037">Sufficient Context: Predicting Required Context Length for Language Model Tasks</a></strong> (2024) - Automatic context size prediction</li>
<li><strong><a href="https://www.anthropic.com/news/skills">Anthropic Skills Announcement</a></strong> (2025) - Official Skills feature announcement</li>
<li><strong><a href="https://www.anthropic.com/engineering/equipping-agents-for-the-real-world-with-agent-skills">Equipping Agents for the Real World with Agent Skills</a></strong> (2025) - Anthropic engineering blog on Skills</li>
<li><strong><a href="https://github.com/anthropics/skills">Anthropic Skills GitHub Repository</a></strong> (2025) - Open-source Skills implementation examples</li>
<li><strong><a href="https://github.com/williamzujkowski/standards">William Zujkowski Standards Repository</a></strong> (2025) - Progressive loading implementation reference</li>
</ol>
<h2>Further Reading</h2>
<ul>
<li><a href="https://modelcontextprotocol.io/">Model Context Protocol (MCP) Documentation</a> - Framework for tool integration</li>
<li><a href="https://docs.anthropic.com/en/docs/prompt-engineering">Anthropic Prompt Engineering Guide</a> - Best practices for context design</li>
<li><a href="https://williamzujkowski.github.io/tags/token-optimization/">Token Optimization Strategies for Production AI Systems</a> - Related blog posts on optimization techniques</li>
</ul>

            </div>
            
            <!-- Related Posts -->
            
            
            
            
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                    
                        
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
                
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    
                
            
            
            
            
            <section aria-label="Content section" class="mt-16 pt-8 border-t border-gray-200 dark:border-gray-800">
                <h2 class="text-2xl font-bold mb-6 text-gray-900 dark:text-gray-100">Related Posts</h2>
                <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
                    
                    
                    <article class="group">
                        <a href="/posts/building-a-privacy-first-ai-lab-deploying-local-llms-without-sacrificing-ethics/" class="block p-6 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200 hover:shadow-md">
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100 group-hover:text-primary-600 dark:group-hover:text-primary-400 mb-2">
                                Building a Privacy-First AI Lab: Deploying Local LLMs Without Sacrificing Ethics
                            </h3>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
                                Build privacy-first AI lab with local LLMs—run models up to 34B on RTX 3090 (24GB VRAM) with network...
                            </p>
                            <div class="flex items-center justify-between text-xs text-gray-500 dark:text-gray-500">
                                <time datetime="2025-10-29">
                                    October 29, 2025
                                </time>
                                <span>16 min read</span>
                            </div>
                        </a>
                    </article>
                    
                    
                    <article class="group">
                        <a href="/posts/from-claude-in-your-terminal-to-robots-in-your-workshop-the-embodied-ai-revolution/" class="block p-6 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200 hover:shadow-md">
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100 group-hover:text-primary-600 dark:group-hover:text-primary-400 mb-2">
                                From Claude in Your Terminal to Robots in Your Workshop: The Embodied AI Revolution
                            </h3>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
                                Deploy Vision-Language-Action models for embodied AI robots—integrate physical world interaction wit...
                            </p>
                            <div class="flex items-center justify-between text-xs text-gray-500 dark:text-gray-500">
                                <time datetime="2025-10-13">
                                    October 13, 2025
                                </time>
                                <span>8 min read</span>
                            </div>
                        </a>
                    </article>
                    
                    
                    <article class="group">
                        <a href="/posts/automated-security-scanning-pipeline-with-grype-and-osv/" class="block p-6 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200 hover:shadow-md">
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100 group-hover:text-primary-600 dark:group-hover:text-primary-400 mb-2">
                                Automated Security Scanning Pipeline with Grype and OSV
                            </h3>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
                                Build automated security scanning pipelines with Grype, OSV, and Trivy—integrate vulnerability detec...
                            </p>
                            <div class="flex items-center justify-between text-xs text-gray-500 dark:text-gray-500">
                                <time datetime="2025-10-06">
                                    October 6, 2025
                                </time>
                                <span>11 min read</span>
                            </div>
                        </a>
                    </article>
                    
                </div>
            </section>
            
            
            <footer role="contentinfo" aria-label="Site footer" class="mt-16 pt-8 border-t border-gray-200 dark:border-gray-800">
                <div class="flex items-center justify-between">
                    <a href="/posts/" class="inline-flex items-center text-sm font-medium text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors duration-200">
                        <svg class="w-5 h-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                        </svg>
                        Back to all posts
                    </a>
                    
                    <div class="flex items-center space-x-4">
                        <span class="text-sm text-gray-500 dark:text-gray-400">Share:</span>
                        
                        <!-- LinkedIn -->
                        <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://williamzujkowski.github.io%2Fposts%2Ffrom-150k-to-2k-tokens-how-progressive-context-loading-revolutionizes-llm-development-workflows%2F" 
                           target="_blank" 
                           rel="noopener noreferrer" 
                           class="text-gray-400 hover:text-[#0077b5] dark:hover:text-[#0077b5] transition-colors duration-200"
                           aria-label="Share on LinkedIn">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
                            </svg>
                        </a>
                        
                        <!-- Hacker News -->
                        <a href="https://news.ycombinator.com/submitlink?u=https://williamzujkowski.github.io%2Fposts%2Ffrom-150k-to-2k-tokens-how-progressive-context-loading-revolutionizes-llm-development-workflows%2F&t=From%20150K%20to%202K%20Tokens%3A%20How%20Progressive%20Context%20Loading%20Revolutionizes%20LLM%20Development%20Workflows" 
                           target="_blank" 
                           rel="noopener noreferrer" 
                           class="text-gray-400 hover:text-[#ff6600] dark:hover:text-[#ff6600] transition-colors duration-200"
                           aria-label="Share on Hacker News">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M0 0v24h24v-24h-24zm12.8 8.7l2.3-4.3h1.4l-3.1 5.5v3.5h-1.2v-3.5l-3-5.5h1.4l2.2 4.3z"/>
                            </svg>
                        </a>
                        
                        <!-- Reddit -->
                        <a href="https://reddit.com/submit?url=https://williamzujkowski.github.io%2Fposts%2Ffrom-150k-to-2k-tokens-how-progressive-context-loading-revolutionizes-llm-development-workflows%2F&title=From%20150K%20to%202K%20Tokens%3A%20How%20Progressive%20Context%20Loading%20Revolutionizes%20LLM%20Development%20Workflows" 
                           target="_blank" 
                           rel="noopener noreferrer" 
                           class="text-gray-400 hover:text-[#ff4500] dark:hover:text-[#ff4500] transition-colors duration-200"
                           aria-label="Share on Reddit">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M24 11.779c0-1.459-1.192-2.645-2.657-2.645-.715 0-1.363.286-1.84.746-1.81-1.191-4.259-1.949-6.971-2.046l1.483-4.669 4.016.941-.006.058c0 1.193.975 2.163 2.174 2.163 1.198 0 2.172-.97 2.172-2.163s-.975-2.164-2.172-2.164c-.92 0-1.704.574-2.021 1.379l-4.329-1.015c-.189-.046-.381.063-.44.249l-1.654 5.207c-2.838.034-5.409.798-7.3 2.025-.474-.438-1.103-.712-1.799-.712-1.465 0-2.656 1.187-2.656 2.646 0 .97.533 1.811 1.317 2.271-.052.282-.086.567-.086.857 0 3.911 4.808 7.093 10.719 7.093s10.72-3.182 10.72-7.093c0-.274-.029-.544-.075-.81.832-.447 1.405-1.312 1.405-2.318zm-17.224 1.816c0-.868.71-1.575 1.582-1.575.872 0 1.581.707 1.581 1.575s-.709 1.574-1.581 1.574-1.582-.706-1.582-1.574zm9.061 4.669c-.797.793-2.048 1.179-3.824 1.179l-.013-.003-.013.003c-1.777 0-3.028-.386-3.824-1.179-.145-.144-.145-.379 0-.523.145-.145.381-.145.526 0 .65.647 1.729.961 3.298.961l.013.003.013-.003c1.569 0 2.648-.315 3.298-.962.145-.145.381-.144.526 0 .145.145.145.379 0 .524zm-.189-3.095c-.872 0-1.581-.706-1.581-1.574 0-.868.709-1.575 1.581-1.575s1.581.707 1.581 1.575-.709 1.574-1.581 1.574z"/>
                            </svg>
                        </a>
                        
                        <!-- Copy Link -->
                        <button onclick="copyToClipboard('https://williamzujkowski.github.io/posts/from-150k-to-2k-tokens-how-progressive-context-loading-revolutionizes-llm-development-workflows/')" 
                                class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors duration-200"
                                aria-label="Copy link to clipboard">
                            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                            </svg>
                        </button>
                    </div>
                </div>
            </footer>
        </div>
    </div>
</article>

<!-- Blog JavaScript Bundle (reading-progress, table-of-contents) -->
<script src="/assets/js/blog.min.js"></script>

<!-- Collapsible Code Blocks - loaded in base.njk -->
    </main>
    
    <!-- Footer -->
    <footer role="contentinfo" aria-label="Site footer" class="mt-auto border-t border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-gray-800/50">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- About -->
                <div>
                    <h3 class="text-sm font-semibold text-gray-900 dark:text-gray-100 uppercase tracking-wider mb-4">About</h3>
                    <p class="text-gray-600 dark:text-gray-400">
                        Personal website of William Zujkowski, exploring technology and sharing knowledge. All opinions and views expressed are my own and do not reflect those of my employer.
                    </p>
                </div>
                
                <!-- Quick Links -->
                <div>
                    <h3 class="text-sm font-semibold text-gray-900 dark:text-gray-100 uppercase tracking-wider mb-4">Quick Links</h3>
                    <ul class="space-y-2"><li><a href="/" class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors duration-200">Home</a></li>
<li><a href="/about/" class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors duration-200">About</a></li>
<li><a href="/posts/" class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors duration-200">Posts</a></li>
<li><a href="/resources/" class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors duration-200">Resources</a></li>
<li><a href="/stats/" class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors duration-200">Stats</a></li>
<li><a href="/uses/" class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors duration-200">Uses</a></li></ul>
                </div>
                
                <!-- Connect -->
                <div>
                    <h3 class="text-sm font-semibold text-gray-900 dark:text-gray-100 uppercase tracking-wider mb-4">Connect</h3>
                    <div class="flex space-x-4">
                        <a href="https://github.com/williamzujkowski" class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors duration-200" aria-label="GitHub" rel="noopener noreferrer">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                            </svg>
                        </a>
                        <a href="https://www.linkedin.com/in/williamzujkowski" class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors duration-200" aria-label="LinkedIn" rel="noopener noreferrer">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
                            </svg>
                        </a>
                        <a href="/feed.xml" class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors duration-200" aria-label="RSS Feed">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M3.429 5.1v2.4c7.248 0 13.114 5.886 13.114 13.142h2.4C18.943 12.18 11.858 5.1 3.429 5.1zm0 4.8v2.4c3.924 0 7.114 3.206 7.114 7.142h2.4c0-5.256-4.276-9.542-9.514-9.542zM6.171 16.386c-.756 0-1.371.615-1.371 1.371 0 .756.615 1.371 1.371 1.371.756 0 1.371-.615 1.371-1.371 0-.756-.615-1.371-1.371-1.371z"/>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="mt-8 pt-8 border-t border-gray-200 dark:border-gray-700">
                <p class="text-center text-sm text-gray-600 dark:text-gray-400">
                    &copy; 2025 William Zujkowski. All rights reserved.
                    Built with <a href="https://www.11ty.dev/" class="text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300">Eleventy</a>
                    and <a href="https://tailwindcss.com/" class="text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300">Tailwind CSS</a>.
                </p>
            </div>
        </div>
    </footer>
    
    <!-- Scripts -->
    <script>
        function toggleDarkMode() {
            const html = document.documentElement;
            const themeColorMeta = document.querySelector('meta[name="theme-color"]');
            
            if (html.classList.contains('dark')) {
                html.classList.remove('dark');
                localStorage.theme = 'light';
                if (themeColorMeta) themeColorMeta.content = '#1e40af';
            } else {
                html.classList.add('dark');
                localStorage.theme = 'dark';
                if (themeColorMeta) themeColorMeta.content = '#111827';
            }
        }
        
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(function() {
                // Show success message
                showToast('Link copied to clipboard!');
            }, function(err) {
                // Fallback for older browsers
                const textArea = document.createElement("textarea");
                textArea.value = text;
                textArea.style.position = "fixed";
                textArea.style.left = "-999999px";
                textArea.style.top = "-999999px";
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                try {
                    document.execCommand('copy');
                    showToast('Link copied to clipboard!');
                } catch (err) {
                    showToast('Failed to copy link');
                }
                document.body.removeChild(textArea);
            });
        }
        
        function showToast(message) {
            // Create toast element
            const toast = document.createElement('div');
            toast.className = 'fixed bottom-4 right-4 bg-gray-800 dark:bg-gray-200 text-white dark:text-gray-800 px-4 py-2 rounded-lg shadow-lg transform transition-all duration-300 translate-y-full';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            // Animate in
            setTimeout(() => {
                toast.classList.remove('translate-y-full');
                toast.classList.add('translate-y-0');
            }, 10);
            
            // Remove after 3 seconds
            setTimeout(() => {
                toast.classList.remove('translate-y-0');
                toast.classList.add('translate-y-full');
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, 3000);
        }
        
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }
    </script>
    
    <!-- Core JavaScript Bundle (ui-enhancements, back-to-top, code-collapse) -->
    <script src="/assets/js/core.min.js"></script>
    
    <!-- Mermaid Diagram Support -->
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        
        // Determine if dark mode is active
        const isDarkMode = document.documentElement.classList.contains('dark');
        
        // Initialize mermaid with proper settings
        mermaid.initialize({ 
            startOnLoad: false, // We'll manually init after DOM manipulation
            theme: isDarkMode ? 'dark' : 'default',
            themeVariables: isDarkMode ? {
                // Dark mode theme
                primaryColor: '#4f46e5',
                primaryTextColor: '#f3f4f6',
                primaryBorderColor: '#6366f1',
                lineColor: '#4b5563',
                secondaryColor: '#374151',
                tertiaryColor: '#1f2937',
                background: '#111827',
                mainBkg: '#1f2937',
                secondBkg: '#374151',
                tertiaryBkg: '#4b5563',
                primaryBorderColor: '#6366f1',
                fontFamily: 'Inter, system-ui, sans-serif',
                fontSize: '16px',
                darkMode: true,
                nodeBkg: '#374151',
                nodeBorder: '#6366f1',
                clusterBkg: '#1f2937',
                clusterBorder: '#4b5563',
                defaultLinkColor: '#93bbfd',
                titleColor: '#f3f4f6',
                edgeLabelBackground: '#1f2937',
                actorBorder: '#6366f1',
                actorBkg: '#374151',
                actorTextColor: '#f3f4f6',
                actorLineColor: '#4b5563',
                signalColor: '#f3f4f6',
                signalTextColor: '#f3f4f6',
                labelBoxBkgColor: '#374151',
                labelBoxBorderColor: '#6366f1',
                labelTextColor: '#f3f4f6',
                loopTextColor: '#f3f4f6',
                noteBorderColor: '#6366f1',
                noteBkgColor: '#374151',
                noteTextColor: '#f3f4f6',
                activationBorderColor: '#6366f1',
                activationBkgColor: '#374151',
                sequenceNumberColor: '#111827'
            } : {
                // Light mode theme
                primaryColor: '#6366f1',
                primaryTextColor: '#fff',
                primaryBorderColor: '#4f46e5',
                lineColor: '#d1d5db',
                secondaryColor: '#e5e7eb',
                tertiaryColor: '#f3f4f6',
                background: '#ffffff',
                mainBkg: '#ffffff',
                secondBkg: '#f3f4f6',
                tertiaryBkg: '#e5e7eb',
                fontFamily: 'Inter, system-ui, sans-serif',
                fontSize: '16px',
                darkMode: false,
                nodeBkg: '#f3f4f6',
                nodeBorder: '#4f46e5',
                clusterBkg: '#e5e7eb',
                clusterBorder: '#9ca3af',
                defaultLinkColor: '#2563eb',
                titleColor: '#1f2937',
                edgeLabelBackground: '#ffffff',
                actorBorder: '#4f46e5',
                actorBkg: '#f3f4f6',
                actorTextColor: '#1f2937',
                actorLineColor: '#9ca3af',
                signalColor: '#1f2937',
                signalTextColor: '#1f2937',
                labelBoxBkgColor: '#f3f4f6',
                labelBoxBorderColor: '#4f46e5',
                labelTextColor: '#1f2937',
                loopTextColor: '#1f2937',
                noteBorderColor: '#4f46e5',
                noteBkgColor: '#f3f4f6',
                noteTextColor: '#1f2937',
                activationBorderColor: '#4f46e5',
                activationBkgColor: '#e5e7eb',
                sequenceNumberColor: '#ffffff'
            },
            securityLevel: 'loose',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true
            }
        });
        
        // Process Mermaid diagrams and THEN initialize code-collapse
        window.addEventListener('DOMContentLoaded', async function() {
            // Step 1: Find and process all mermaid code blocks
            const mermaidBlocks = document.querySelectorAll('pre code.language-mermaid');
            
            if (mermaidBlocks.length > 0) {
                // Processing Mermaid diagrams
                
                // Convert each mermaid code block to a diagram
                for (const element of mermaidBlocks) {
                    const graphDefinition = element.textContent;
                    const preElement = element.parentNode;
                    
                    // Create a container div for the mermaid diagram
                    const containerDiv = document.createElement('div');
                    containerDiv.className = 'mermaid-container';
                    containerDiv.setAttribute('data-mermaid', 'true');
                    
                    // Create the mermaid div
                    const graphDiv = document.createElement('div');
                    graphDiv.className = 'mermaid';
                    graphDiv.textContent = graphDefinition;
                    
                    // Replace the pre element with the container - this removes the code block entirely
                    preElement.parentNode.replaceChild(containerDiv, preElement);
                    containerDiv.appendChild(graphDiv);
                }
                
                // Step 2: Initialize all mermaid diagrams with error handling
                try {
                    await mermaid.run();
                    console.log(`✅ Successfully rendered ${mermaidBlocks.length} Mermaid diagram(s)`);
                } catch (error) {
                    console.error('❌ Mermaid rendering failed:', error);
                    // Log each diagram's content for debugging
                    document.querySelectorAll('.mermaid').forEach((div, index) => {
                        console.error(`Diagram ${index + 1} content:`, div.textContent);
                    });
                }

                // Diagrams are now styled via CSS, no need for inline styles
            }
            
            // Step 3: Code-collapse.js is already loaded and will handle remaining blocks
            // It checks for data-processed attribute to avoid duplicates
        });
    </script>
</body>
</html>